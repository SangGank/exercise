/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=4)})([function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActionsEnhanced/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_embeddableEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _node_modules_val_loader_dist_cjs_js_key_embeddableEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_embeddableEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/embeddableEnhanced/public",__webpack_require__,6)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["embeddableEnhanced"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"EmbeddableEnhancedSetupContract",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"EmbeddableEnhancedSetupDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"EmbeddableEnhancedStartContract",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"EmbeddableEnhancedStartDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"EnhancedEmbeddable",(function(){return types["EnhancedEmbeddable"]}));__webpack_require__.d(__webpack_exports__,"EnhancedEmbeddableContext",(function(){return types["EnhancedEmbeddableContext"]}));__webpack_require__.d(__webpack_exports__,"isEnhancedEmbeddable",(function(){return isEnhancedEmbeddable}));__webpack_require__.d(__webpack_exports__,"embeddableEnhancedContextMenuDrilldownGrouping",(function(){return contextMenuDrilldownGrouping}));var public_=__webpack_require__(0);var uiActionsEnhanced_public_=__webpack_require__(1);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}var EmbeddableActionStorage=function(_AbstractActionStorag){_inherits(EmbeddableActionStorage,_AbstractActionStorag);var _super=_createSuper(EmbeddableActionStorage);function EmbeddableActionStorage(embbeddable){var _this;_classCallCheck(this,EmbeddableActionStorage);_this=_super.call(this);_this.embbeddable=embbeddable;return _this}_createClass(EmbeddableActionStorage,[{key:"put",value:function put(input,events){var _input$enhancements;this.embbeddable.updateInput({enhancements:_objectSpread(_objectSpread({},input.enhancements||{}),{},{dynamicActions:_objectSpread(_objectSpread({},((_input$enhancements=input.enhancements)===null||_input$enhancements===void 0?void 0:_input$enhancements.dynamicActions)||{}),{},{events:events})})})}},{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark((function _callee(event){var input,events,exists;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:input=this.embbeddable.getInput();events=this.getEventsFromEmbeddable();exists=!!events.find((function(_ref){var eventId=_ref.eventId;return eventId===event.eventId}));if(!exists){_context.next=5;break}throw new Error("[EEXIST]: Event with [eventId = ".concat(event.eventId,"] already exists on ")+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.put(input,[].concat(_toConsumableArray(events),[event]));case 6:case"end":return _context.stop()}}}),_callee,this)})));function create(_x){return _create.apply(this,arguments)}return create}()},{key:"update",value:function(){var _update=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(event){var input,events,index;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:input=this.embbeddable.getInput();events=this.getEventsFromEmbeddable();index=events.findIndex((function(_ref2){var eventId=_ref2.eventId;return eventId===event.eventId}));if(!(index===-1)){_context2.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(event.eventId,"] could not be ")+"updated as it does not exist in "+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.put(input,[].concat(_toConsumableArray(events.slice(0,index)),[event],_toConsumableArray(events.slice(index+1))));case 6:case"end":return _context2.stop()}}}),_callee2,this)})));function update(_x2){return _update.apply(this,arguments)}return update}()},{key:"remove",value:function(){var _remove=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(eventId){var input,events,index;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:input=this.embbeddable.getInput();events=this.getEventsFromEmbeddable();index=events.findIndex((function(event){return eventId===event.eventId}));if(!(index===-1)){_context3.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(eventId,"] could not be ")+"removed as it does not exist in "+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:this.put(input,[].concat(_toConsumableArray(events.slice(0,index)),_toConsumableArray(events.slice(index+1))));case 6:case"end":return _context3.stop()}}}),_callee3,this)})));function remove(_x3){return _remove.apply(this,arguments)}return remove}()},{key:"read",value:function(){var _read=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(eventId){var input,events,event;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:input=this.embbeddable.getInput();events=this.getEventsFromEmbeddable();event=events.find((function(ev){return eventId===ev.eventId}));if(event){_context4.next=5;break}throw new Error("[ENOENT]: Event with [eventId = ".concat(eventId,"] could not be found in ")+"[embeddable.id = ".concat(input.id,", embeddable.title = ").concat(input.title,"]."));case 5:return _context4.abrupt("return",event);case 6:case"end":return _context4.stop()}}}),_callee4,this)})));function read(_x4){return _read.apply(this,arguments)}return read}()},{key:"list",value:function(){var _list=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(){return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",this.getEventsFromEmbeddable());case 1:case"end":return _context5.stop()}}}),_callee5,this)})));function list(){return _list.apply(this,arguments)}return list}()},{key:"getEventsFromEmbeddable",value:function getEventsFromEmbeddable(){var _input$enhancements2,_input$enhancements2$;var input=this.embbeddable.getInput();var events=((_input$enhancements2=input.enhancements)===null||_input$enhancements2===void 0?void 0:(_input$enhancements2$=_input$enhancements2.dynamicActions)===null||_input$enhancements2$===void 0?void 0:_input$enhancements2$.events)||[];return this.migrate(events)}},{key:"migrate",value:function migrate(events){return events.map((function(event){if(event.action.factoryId==="DASHBOARD_TO_DASHBOARD_DRILLDOWN"){return _objectSpread(_objectSpread({},event),{},{triggers:["FILTER_TRIGGER"]})}return event}))}}]);return EmbeddableActionStorage}(uiActionsEnhanced_public_["UiActionsEnhancedAbstractActionStorage"]);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(3);function panel_notifications_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function panel_notifications_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){panel_notifications_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){panel_notifications_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function panel_notifications_action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function panel_notifications_action_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function panel_notifications_action_createClass(Constructor,protoProps,staticProps){if(protoProps)panel_notifications_action_defineProperties(Constructor.prototype,protoProps);if(staticProps)panel_notifications_action_defineProperties(Constructor,staticProps);return Constructor}function panel_notifications_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var txtOneDrilldown=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.embeddableEnhanced.actions.panelNotifications.oneDrilldown",{defaultMessage:"Panel has 1 drilldown"});var panel_notifications_action_txtManyDrilldowns=function txtManyDrilldowns(count){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.embeddableEnhanced.actions.panelNotifications.manyDrilldowns",{defaultMessage:"Panel has {count} drilldowns",values:{count:String(count)}})};var ACTION_PANEL_NOTIFICATIONS="ACTION_PANEL_NOTIFICATIONS";var panel_notifications_action_PanelNotificationsAction=function(){function PanelNotificationsAction(){var _this=this;panel_notifications_action_classCallCheck(this,PanelNotificationsAction);panel_notifications_action_defineProperty(this,"id",ACTION_PANEL_NOTIFICATIONS);panel_notifications_action_defineProperty(this,"getDisplayName",(function(_ref){var embeddable=_ref.embeddable;return String(_this.getEventCount(embeddable))}));panel_notifications_action_defineProperty(this,"getDisplayNameTooltip",(function(_ref2){var embeddable=_ref2.embeddable;var count=_this.getEventCount(embeddable);return!count?"":count===1?txtOneDrilldown:panel_notifications_action_txtManyDrilldowns(count)}));panel_notifications_action_defineProperty(this,"isCompatible",function(){var _ref4=panel_notifications_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref3.embeddable;if(!(embeddable.getInput().viewMode!==public_["ViewMode"].EDIT)){_context.next=3;break}return _context.abrupt("return",false);case 3:return _context.abrupt("return",_this.getEventCount(embeddable)>0);case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref4.apply(this,arguments)}}());panel_notifications_action_defineProperty(this,"execute",panel_notifications_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:case"end":return _context2.stop()}}}),_callee2)}))))}panel_notifications_action_createClass(PanelNotificationsAction,[{key:"getEventCount",value:function getEventCount(embeddable){return embeddable.enhancements.dynamicActions.state.get().events.length}}]);return PanelNotificationsAction}();var contextMenuDrilldownGrouping=[{id:"drilldowns",getDisplayName:function getDisplayName(){return"Drilldowns"},getIconType:function getIconType(){return"symlink"},order:25}];function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function plugin_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){plugin_ownKeys(Object(source),true).forEach((function(key){plugin_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{plugin_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_EmbeddableEnhancedPlugin=function(){function EmbeddableEnhancedPlugin(context){plugin_classCallCheck(this,EmbeddableEnhancedPlugin);this.context=context;plugin_defineProperty(this,"uiActions",void 0);plugin_defineProperty(this,"isEmbeddableContext",(function(context){if(!(context===null||context===void 0?void 0:context.embeddable)){console.warn("For drilldowns to work action context should contain .embeddable field.");return false}return true}))}plugin_createClass(EmbeddableEnhancedPlugin,[{key:"setup",value:function setup(core,plugins){this.setCustomEmbeddableFactoryProvider(plugins);var panelNotificationAction=new panel_notifications_action_PanelNotificationsAction;plugins.uiActionsEnhanced.registerAction(panelNotificationAction);plugins.uiActionsEnhanced.attachAction(public_["PANEL_NOTIFICATION_TRIGGER"],panelNotificationAction.id);return{}}},{key:"start",value:function start(core,plugins){this.uiActions=plugins.uiActionsEnhanced;return{}}},{key:"stop",value:function stop(){}},{key:"setCustomEmbeddableFactoryProvider",value:function setCustomEmbeddableFactoryProvider(plugins){var _this=this;plugins.embeddable.setCustomEmbeddableFactoryProvider((function(def){var factory=Object(public_["defaultEmbeddableFactoryProvider"])(def);return plugin_objectSpread(plugin_objectSpread({},factory),{},{create:function(){var _create=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var embeddable,_args=arguments;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return factory.create.apply(factory,_args);case 2:embeddable=_context.sent;if(embeddable){_context.next=5;break}return _context.abrupt("return",embeddable);case 5:return _context.abrupt("return",_this.enhanceEmbeddableWithDynamicActions(embeddable));case 6:case"end":return _context.stop()}}}),_callee)})));function create(){return _create.apply(this,arguments)}return create}(),createFromSavedObject:function(){var _createFromSavedObject=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var embeddable,_args2=arguments;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return factory.createFromSavedObject.apply(factory,_args2);case 2:embeddable=_context2.sent;if(embeddable){_context2.next=5;break}return _context2.abrupt("return",embeddable);case 5:return _context2.abrupt("return",_this.enhanceEmbeddableWithDynamicActions(embeddable));case 6:case"end":return _context2.stop()}}}),_callee2)})));function createFromSavedObject(){return _createFromSavedObject.apply(this,arguments)}return createFromSavedObject}()})}))}},{key:"enhanceEmbeddableWithDynamicActions",value:function enhanceEmbeddableWithDynamicActions(embeddable){var _this2=this;var enhancedEmbeddable=embeddable;var storage=new EmbeddableActionStorage(embeddable);var dynamicActions=new uiActionsEnhanced_public_["UiActionsEnhancedDynamicActionManager"]({isCompatible:function(){var _isCompatible=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee3(context){return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(_this2.isEmbeddableContext(context)){_context3.next=2;break}return _context3.abrupt("return",false);case 2:if(!(context.embeddable.getInput().viewMode!==public_["ViewMode"].VIEW)){_context3.next=4;break}return _context3.abrupt("return",false);case 4:return _context3.abrupt("return",context.embeddable.runtimeId===embeddable.runtimeId);case 5:case"end":return _context3.stop()}}}),_callee3)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}(),storage:storage,uiActions:this.uiActions});dynamicActions.start().catch((function(error){console.log("Failed to start embeddable dynamic actions",embeddable);console.error(error)}));var stop=function stop(){dynamicActions.stop().catch((function(error){console.log("Failed to stop embeddable dynamic actions",embeddable);console.error(error)}))};embeddable.getInput$().subscribe({next:function next(){storage.reload$.next()},error:stop,complete:stop});enhancedEmbeddable.enhancements=plugin_objectSpread(plugin_objectSpread({},enhancedEmbeddable.enhancements),{},{dynamicActions:dynamicActions});return enhancedEmbeddable}}]);return EmbeddableEnhancedPlugin}();var types=__webpack_require__(2);var isEnhancedEmbeddable=function isEnhancedEmbeddable(maybeEnhancedEmbeddable){var _enhancements;return typeof(maybeEnhancedEmbeddable===null||maybeEnhancedEmbeddable===void 0?void 0:(_enhancements=maybeEnhancedEmbeddable.enhancements)===null||_enhancements===void 0?void 0:_enhancements.dynamicActions)==="object"};function public_plugin(context){return new plugin_EmbeddableEnhancedPlugin(context)}}]);
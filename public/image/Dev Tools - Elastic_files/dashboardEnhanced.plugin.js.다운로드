/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=12)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddableEnhanced/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/share/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_dashboardEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);var _node_modules_val_loader_dist_cjs_js_key_dashboardEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_dashboardEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/dashboardEnhanced/public",__webpack_require__,14)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["dashboardEnhanced"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DashboardEnhancedSetupContract",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedSetupDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedStartContract",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedStartDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedAbstractDashboardDrilldown",(function(){return abstract_dashboard_drilldown_AbstractDashboardDrilldown}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedAbstractDashboardDrilldownConfig",(function(){return types["Config"]}));__webpack_require__.d(__webpack_exports__,"DashboardEnhancedAbstractDashboardDrilldownParams",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_=__webpack_require__(7);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(1);var kibanaReact_public_=__webpack_require__(4);var embeddableEnhanced_public_=__webpack_require__(3);var uiActions_public_=__webpack_require__(5);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ensureNestedTriggers(triggers){if(!triggers.includes(uiActions_public_["APPLY_FILTER_TRIGGER"])&&(triggers.includes(uiActions_public_["VALUE_CLICK_TRIGGER"])||triggers.includes(uiActions_public_["SELECT_RANGE_TRIGGER"]))){return[].concat(_toConsumableArray(triggers),[uiActions_public_["APPLY_FILTER_TRIGGER"]])}return triggers}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OPEN_FLYOUT_ADD_DRILLDOWN="OPEN_FLYOUT_ADD_DRILLDOWN";var flyout_create_drilldown_FlyoutCreateDrilldownAction=function(){function FlyoutCreateDrilldownAction(params){_classCallCheck(this,FlyoutCreateDrilldownAction);this.params=params;_defineProperty(this,"type",OPEN_FLYOUT_ADD_DRILLDOWN);_defineProperty(this,"id",OPEN_FLYOUT_ADD_DRILLDOWN);_defineProperty(this,"order",12);_defineProperty(this,"grouping",embeddableEnhanced_public_["embeddableEnhancedContextMenuDrilldownGrouping"])}_createClass(FlyoutCreateDrilldownAction,[{key:"getDisplayName",value:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.FlyoutCreateDrilldownAction.displayName",{defaultMessage:"Create drilldown"})}},{key:"getIconType",value:function getIconType(){return"plusInCircle"}},{key:"isEmbeddableCompatible",value:function isEmbeddableCompatible(context){if(!Object(embeddableEnhanced_public_["isEnhancedEmbeddable"])(context.embeddable))return false;var supportedTriggers=context.embeddable.supportedTriggers();if(!supportedTriggers||!supportedTriggers.length)return false;if(context.embeddable.getRoot().type!=="dashboard")return false;var allPossibleTriggers=this.params.start().plugins.uiActionsEnhanced.getActionFactories().map((function(factory){return factory.supportedTriggers()})).reduce((function(res,next){return res.concat(next)}),[]);return ensureNestedTriggers(supportedTriggers).some((function(trigger){return allPossibleTriggers.includes(trigger)}))}},{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var isEditMode;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:isEditMode=context.embeddable.getInput().viewMode==="edit";return _context.abrupt("return",isEditMode&&this.isEmbeddableCompatible(context));case 2:case"end":return _context.stop()}}}),_callee,this)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var _this$params$start,core,plugins,embeddable,handle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$params$start=this.params.start(),core=_this$params$start.core,plugins=_this$params$start.plugins;embeddable=context.embeddable;if(Object(embeddableEnhanced_public_["isEnhancedEmbeddable"])(embeddable)){_context2.next=4;break}throw new Error("Need embeddable to be EnhancedEmbeddable to execute FlyoutCreateDrilldownAction.");case 4:handle=core.overlays.openFlyout(Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(plugins.uiActionsEnhanced.FlyoutManageDrilldowns,{onClose:function onClose(){return handle.close()},viewMode:"create",dynamicActionManager:embeddable.enhancements.dynamicActions,triggers:ensureNestedTriggers(embeddable.supportedTriggers()),placeContext:{embeddable:embeddable}})),{ownFocus:true,"data-test-subj":"createDrilldownFlyout"});case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return FlyoutCreateDrilldownAction}();var txtDisplayName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.panel.openFlyoutEditDrilldown.displayName",{defaultMessage:"Manage drilldowns"});var external_kbnSharedDeps_ElasticEui_=__webpack_require__(2);var kibanaUtils_public_=__webpack_require__(8);var menu_item_MenuItem=function MenuItem(_ref){var context=_ref.context;var _useContainerState=Object(kibanaUtils_public_["useContainerState"])(context.embeddable.enhancements.dynamicActions.state),events=_useContainerState.events;var count=events.length;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},txtDisplayName),count>0&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiNotificationBadge"],null,count)))};function flyout_edit_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function flyout_edit_drilldown_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){flyout_edit_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){flyout_edit_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function flyout_edit_drilldown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function flyout_edit_drilldown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function flyout_edit_drilldown_createClass(Constructor,protoProps,staticProps){if(protoProps)flyout_edit_drilldown_defineProperties(Constructor.prototype,protoProps);if(staticProps)flyout_edit_drilldown_defineProperties(Constructor,staticProps);return Constructor}function flyout_edit_drilldown_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OPEN_FLYOUT_EDIT_DRILLDOWN="OPEN_FLYOUT_EDIT_DRILLDOWN";var flyout_edit_drilldown_FlyoutEditDrilldownAction=function(){function FlyoutEditDrilldownAction(params){flyout_edit_drilldown_classCallCheck(this,FlyoutEditDrilldownAction);this.params=params;flyout_edit_drilldown_defineProperty(this,"type",OPEN_FLYOUT_EDIT_DRILLDOWN);flyout_edit_drilldown_defineProperty(this,"id",OPEN_FLYOUT_EDIT_DRILLDOWN);flyout_edit_drilldown_defineProperty(this,"order",10);flyout_edit_drilldown_defineProperty(this,"grouping",embeddableEnhanced_public_["embeddableEnhancedContextMenuDrilldownGrouping"]);flyout_edit_drilldown_defineProperty(this,"MenuItem",Object(kibanaReact_public_["reactToUiComponent"])(menu_item_MenuItem))}flyout_edit_drilldown_createClass(FlyoutEditDrilldownAction,[{key:"getDisplayName",value:function getDisplayName(){return txtDisplayName}},{key:"getIconType",value:function getIconType(){return"list"}},{key:"isCompatible",value:function(){var _isCompatible=flyout_edit_drilldown_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;if(!(embeddable.getInput().viewMode!==public_["ViewMode"].EDIT)){_context.next=3;break}return _context.abrupt("return",false);case 3:if(Object(embeddableEnhanced_public_["isEnhancedEmbeddable"])(embeddable)){_context.next=5;break}return _context.abrupt("return",false);case 5:return _context.abrupt("return",embeddable.enhancements.dynamicActions.state.get().events.length>0);case 6:case"end":return _context.stop()}}}),_callee)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=flyout_edit_drilldown_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var _this$params$start,core,plugins,embeddable,handle;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$params$start=this.params.start(),core=_this$params$start.core,plugins=_this$params$start.plugins;embeddable=context.embeddable;if(Object(embeddableEnhanced_public_["isEnhancedEmbeddable"])(embeddable)){_context2.next=4;break}throw new Error("Need embeddable to be EnhancedEmbeddable to execute FlyoutEditDrilldownAction.");case 4:handle=core.overlays.openFlyout(Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(plugins.uiActionsEnhanced.FlyoutManageDrilldowns,{onClose:function onClose(){return handle.close()},viewMode:"manage",dynamicActionManager:embeddable.enhancements.dynamicActions,triggers:ensureNestedTriggers(embeddable.supportedTriggers()),placeContext:{embeddable:embeddable}})),{ownFocus:true,"data-test-subj":"editDrilldownFlyout"});case 5:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()}]);return FlyoutEditDrilldownAction}();var EMBEDDABLE_TO_DASHBOARD_DRILLDOWN="DASHBOARD_TO_DASHBOARD_DRILLDOWN";var data_public_=__webpack_require__(6);var external_kbnSharedDeps_Lodash_=__webpack_require__(9);var txtChooseDestinationDashboard=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.components.DashboardDrilldownConfig.chooseDestinationDashboard",{defaultMessage:"Choose destination dashboard"});var txtUseCurrentFilters=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.components.DashboardDrilldownConfig.useCurrentFilters",{defaultMessage:"Use filters and query from origin dashboard"});var txtUseCurrentDateRange=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.components.DashboardDrilldownConfig.useCurrentDateRange",{defaultMessage:"Use date range from origin dashboard"});function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||dashboard_drilldown_config_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dashboard_drilldown_config_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return dashboard_drilldown_config_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dashboard_drilldown_config_arrayLikeToArray(o,minLen)}function dashboard_drilldown_config_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var dashboard_drilldown_config_DashboardDrilldownConfig=function DashboardDrilldownConfig(_ref){var _dashboards$find;var activeDashboardId=_ref.activeDashboardId,dashboards=_ref.dashboards,currentFilters=_ref.currentFilters,keepRange=_ref.keepRange,onDashboardSelect=_ref.onDashboardSelect,onCurrentFiltersToggle=_ref.onCurrentFiltersToggle,onKeepRangeToggle=_ref.onKeepRangeToggle,onSearchChange=_ref.onSearchChange,isLoading=_ref.isLoading,error=_ref.error;var selectedTitle=((_dashboards$find=dashboards.find((function(item){return item.value===activeDashboardId})))===null||_dashboards$find===void 0?void 0:_dashboards$find.label)||"";return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_default.a.Fragment,null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{label:txtChooseDestinationDashboard,fullWidth:true,isInvalid:!!error,error:error},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiComboBox"],{async:true,selectedOptions:activeDashboardId?[{label:selectedTitle,value:activeDashboardId}]:[],options:dashboards,onChange:function onChange(_ref2){var _ref3=_slicedToArray(_ref2,1),_ref3$=_ref3[0];_ref3$=_ref3$===void 0?{value:""}:_ref3$;var _ref3$$value=_ref3$.value,value=_ref3$$value===void 0?"":_ref3$$value;return onDashboardSelect(value)},onSearchChange:onSearchChange,isLoading:isLoading,singleSelection:{asPlainText:true},fullWidth:true,"data-test-subj":"dashboardDrilldownSelectDashboard",isInvalid:!!error})),!!onCurrentFiltersToggle&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasChildLabel:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"useCurrentFilters",label:txtUseCurrentFilters,checked:!!currentFilters,onChange:onCurrentFiltersToggle})),!!onKeepRangeToggle&&external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{hasChildLabel:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{name:"useCurrentDateRange",label:txtUseCurrentDateRange,checked:!!keepRange,onChange:onKeepRangeToggle})))};var i18n_txtDestinationDashboardNotFound=function txtDestinationDashboardNotFound(dashboardId){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.drilldown.errorDestinationDashboardIsMissing",{defaultMessage:"Destination dashboard ('{dashboardId}') no longer exists. Choose another dashboard.",values:{dashboardId:dashboardId}})};function collect_config_container_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function collect_config_container_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){collect_config_container_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){collect_config_container_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){collect_config_container_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function collect_config_container_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function collect_config_container_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function collect_config_container_createClass(Constructor,protoProps,staticProps){if(protoProps)collect_config_container_defineProperties(Constructor.prototype,protoProps);if(staticProps)collect_config_container_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function collect_config_container_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function collect_config_container_toConsumableArray(arr){return collect_config_container_arrayWithoutHoles(arr)||collect_config_container_iterableToArray(arr)||collect_config_container_unsupportedIterableToArray(arr)||collect_config_container_nonIterableSpread()}function collect_config_container_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function collect_config_container_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return collect_config_container_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return collect_config_container_arrayLikeToArray(o,minLen)}function collect_config_container_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function collect_config_container_arrayWithoutHoles(arr){if(Array.isArray(arr))return collect_config_container_arrayLikeToArray(arr)}function collect_config_container_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var collect_config_container_mergeDashboards=function mergeDashboards(dashboards,selectedDashboard){if(selectedDashboard&&Object(external_kbnSharedDeps_Lodash_["findIndex"])(dashboards,{value:selectedDashboard.value})===-1){return[selectedDashboard].concat(collect_config_container_toConsumableArray(dashboards))}return dashboards};var dashboardSavedObjectToMenuItem=function dashboardSavedObjectToMenuItem(savedObject){return{value:savedObject.id,label:savedObject.attributes.title}};var collect_config_container_CollectConfigContainer=function(_React$Component){_inherits(CollectConfigContainer,_React$Component);var _super=_createSuper(CollectConfigContainer);function CollectConfigContainer(props){var _this;collect_config_container_classCallCheck(this,CollectConfigContainer);_this=_super.call(this,props);collect_config_container_defineProperty(_assertThisInitialized(_this),"isMounted",true);collect_config_container_defineProperty(_assertThisInitialized(_this),"state",{dashboards:[],isLoading:false,searchString:undefined,selectedDashboard:undefined,error:undefined});collect_config_container_defineProperty(_assertThisInitialized(_this),"debouncedLoadDashboards",void 0);_this.debouncedLoadDashboards=Object(external_kbnSharedDeps_Lodash_["debounce"])(_this.loadDashboards.bind(_assertThisInitialized(_this)),500);return _this}collect_config_container_createClass(CollectConfigContainer,[{key:"componentDidMount",value:function componentDidMount(){this.loadSelectedDashboard();this.loadDashboards()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=false}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,config=_this$props.config,onConfig=_this$props.onConfig;var _this$state=this.state,dashboards=_this$state.dashboards,selectedDashboard=_this$state.selectedDashboard,isLoading=_this$state.isLoading,error=_this$state.error;return external_kbnSharedDeps_React_default.a.createElement(dashboard_drilldown_config_DashboardDrilldownConfig,{activeDashboardId:config.dashboardId,dashboards:collect_config_container_mergeDashboards(dashboards,selectedDashboard),currentFilters:config.useCurrentFilters,keepRange:config.useCurrentDateRange,isLoading:isLoading,error:error,onDashboardSelect:function onDashboardSelect(dashboardId){onConfig(_objectSpread(_objectSpread({},config),{},{dashboardId:dashboardId}));if(_this2.state.error){_this2.setState({error:undefined})}},onSearchChange:this.debouncedLoadDashboards,onCurrentFiltersToggle:function onCurrentFiltersToggle(){return onConfig(_objectSpread(_objectSpread({},config),{},{useCurrentFilters:!config.useCurrentFilters}))},onKeepRangeToggle:function onKeepRangeToggle(){return onConfig(_objectSpread(_objectSpread({},config),{},{useCurrentDateRange:!config.useCurrentDateRange}))}})}},{key:"loadSelectedDashboard",value:function(){var _loadSelectedDashboard=collect_config_container_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _savedObject$error;var _this$props2,config,start,savedObject;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props2=this.props,config=_this$props2.config,start=_this$props2.params.start;if(config.dashboardId){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return start().core.savedObjects.client.get("dashboard",config.dashboardId);case 5:savedObject=_context.sent;if(this.isMounted){_context.next=8;break}return _context.abrupt("return");case 8:if(!(((_savedObject$error=savedObject.error)===null||_savedObject$error===void 0?void 0:_savedObject$error.statusCode)===404)){_context.next=12;break}this.setState({error:i18n_txtDestinationDashboardNotFound(config.dashboardId)});this.props.onConfig(_objectSpread(_objectSpread({},config),{},{dashboardId:undefined}));return _context.abrupt("return");case 12:if(!savedObject.error){_context.next=16;break}this.setState({error:savedObject.error.message});this.props.onConfig(_objectSpread(_objectSpread({},config),{},{dashboardId:undefined}));return _context.abrupt("return");case 16:this.setState({selectedDashboard:dashboardSavedObjectToMenuItem(savedObject)});case 17:case"end":return _context.stop()}}}),_callee,this)})));function loadSelectedDashboard(){return _loadSelectedDashboard.apply(this,arguments)}return loadSelectedDashboard}()},{key:"loadDashboards",value:function(){var _loadDashboards=collect_config_container_asyncToGenerator(regeneratorRuntime.mark((function _callee2(searchString){var savedObjectsClient,_yield$savedObjectsCl,savedObjects,dashboardList;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.setState({searchString:searchString,isLoading:true});savedObjectsClient=this.props.params.start().core.savedObjects.client;_context2.next=4;return savedObjectsClient.find({type:"dashboard",search:searchString?"".concat(searchString,"*"):undefined,searchFields:["title^3","description"],defaultSearchOperator:"AND",perPage:100});case 4:_yield$savedObjectsCl=_context2.sent;savedObjects=_yield$savedObjectsCl.savedObjects;if(this.isMounted){_context2.next=8;break}return _context2.abrupt("return");case 8:if(!(searchString!==this.state.searchString)){_context2.next=10;break}return _context2.abrupt("return");case 10:dashboardList=savedObjects.map(dashboardSavedObjectToMenuItem);this.setState({dashboards:dashboardList,isLoading:false});case 12:case"end":return _context2.stop()}}}),_callee2,this)})));function loadDashboards(_x){return _loadDashboards.apply(this,arguments)}return loadDashboards}()}]);return CollectConfigContainer}(external_kbnSharedDeps_React_default.a.Component);var txtGoToDashboard=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.dashboard.drilldown.goToDashboard",{defaultMessage:"Go to Dashboard"});function abstract_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function abstract_dashboard_drilldown_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){abstract_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){abstract_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function abstract_dashboard_drilldown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function abstract_dashboard_drilldown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function abstract_dashboard_drilldown_createClass(Constructor,protoProps,staticProps){if(protoProps)abstract_dashboard_drilldown_defineProperties(Constructor.prototype,protoProps);if(staticProps)abstract_dashboard_drilldown_defineProperties(Constructor,staticProps);return Constructor}function abstract_dashboard_drilldown_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var abstract_dashboard_drilldown_AbstractDashboardDrilldown=function(){function AbstractDashboardDrilldown(params){var _this=this;abstract_dashboard_drilldown_classCallCheck(this,AbstractDashboardDrilldown);this.params=params;abstract_dashboard_drilldown_defineProperty(this,"id",void 0);abstract_dashboard_drilldown_defineProperty(this,"supportedTriggers",void 0);abstract_dashboard_drilldown_defineProperty(this,"order",100);abstract_dashboard_drilldown_defineProperty(this,"getDisplayName",(function(){return txtGoToDashboard}));abstract_dashboard_drilldown_defineProperty(this,"euiIcon","dashboardApp");abstract_dashboard_drilldown_defineProperty(this,"ReactCollectConfig",(function(props){return external_kbnSharedDeps_React_default.a.createElement(collect_config_container_CollectConfigContainer,_extends({},props,{params:_this.params}))}));abstract_dashboard_drilldown_defineProperty(this,"CollectConfig",Object(kibanaReact_public_["reactToUiComponent"])(this.ReactCollectConfig));abstract_dashboard_drilldown_defineProperty(this,"createConfig",(function(){return{dashboardId:"",useCurrentFilters:true,useCurrentDateRange:true}}));abstract_dashboard_drilldown_defineProperty(this,"isConfigValid",(function(config){if(!config.dashboardId)return false;return true}));abstract_dashboard_drilldown_defineProperty(this,"getHref",function(){var _ref=abstract_dashboard_drilldown_asyncToGenerator(regeneratorRuntime.mark((function _callee(config,context){var url;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _this.getURL(config,context);case 2:url=_context.sent;return _context.abrupt("return",url.path);case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}());abstract_dashboard_drilldown_defineProperty(this,"execute",function(){var _ref2=abstract_dashboard_drilldown_asyncToGenerator(regeneratorRuntime.mark((function _callee2(config,context){var url;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _this.getURL(config,context);case 2:url=_context2.sent;_context2.next=5;return _this.params.start().core.application.navigateToApp(url.appName,{path:url.appPath});case 5:case"end":return _context2.stop()}}}),_callee2)})));return function(_x3,_x4){return _ref2.apply(this,arguments)}}())}abstract_dashboard_drilldown_createClass(AbstractDashboardDrilldown,[{key:"urlGenerator",get:function get(){var urlGenerator=this.params.start().plugins.dashboard.dashboardUrlGenerator;if(!urlGenerator)throw new Error("Dashboard URL generator is required for dashboard drilldown.");return urlGenerator}}]);return AbstractDashboardDrilldown}();var types=__webpack_require__(10);var share_public_=__webpack_require__(11);function embeddable_to_dashboard_drilldown_toConsumableArray(arr){return embeddable_to_dashboard_drilldown_arrayWithoutHoles(arr)||embeddable_to_dashboard_drilldown_iterableToArray(arr)||embeddable_to_dashboard_drilldown_unsupportedIterableToArray(arr)||embeddable_to_dashboard_drilldown_nonIterableSpread()}function embeddable_to_dashboard_drilldown_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function embeddable_to_dashboard_drilldown_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return embeddable_to_dashboard_drilldown_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return embeddable_to_dashboard_drilldown_arrayLikeToArray(o,minLen)}function embeddable_to_dashboard_drilldown_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function embeddable_to_dashboard_drilldown_arrayWithoutHoles(arr){if(Array.isArray(arr))return embeddable_to_dashboard_drilldown_arrayLikeToArray(arr)}function embeddable_to_dashboard_drilldown_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function embeddable_to_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function embeddable_to_dashboard_drilldown_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){embeddable_to_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){embeddable_to_dashboard_drilldown_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function embeddable_to_dashboard_drilldown_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function embeddable_to_dashboard_drilldown_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function embeddable_to_dashboard_drilldown_createClass(Constructor,protoProps,staticProps){if(protoProps)embeddable_to_dashboard_drilldown_defineProperties(Constructor.prototype,protoProps);if(staticProps)embeddable_to_dashboard_drilldown_defineProperties(Constructor,staticProps);return Constructor}function embeddable_to_dashboard_drilldown_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)embeddable_to_dashboard_drilldown_setPrototypeOf(subClass,superClass)}function embeddable_to_dashboard_drilldown_setPrototypeOf(o,p){embeddable_to_dashboard_drilldown_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return embeddable_to_dashboard_drilldown_setPrototypeOf(o,p)}function embeddable_to_dashboard_drilldown_createSuper(Derived){var hasNativeReflectConstruct=embeddable_to_dashboard_drilldown_isNativeReflectConstruct();return function _createSuperInternal(){var Super=embeddable_to_dashboard_drilldown_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=embeddable_to_dashboard_drilldown_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return embeddable_to_dashboard_drilldown_possibleConstructorReturn(this,result)}}function embeddable_to_dashboard_drilldown_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return embeddable_to_dashboard_drilldown_assertThisInitialized(self)}function embeddable_to_dashboard_drilldown_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function embeddable_to_dashboard_drilldown_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function embeddable_to_dashboard_drilldown_getPrototypeOf(o){embeddable_to_dashboard_drilldown_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return embeddable_to_dashboard_drilldown_getPrototypeOf(o)}function embeddable_to_dashboard_drilldown_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var embeddable_to_dashboard_drilldown_EmbeddableToDashboardDrilldown=function(_AbstractDashboardDri){embeddable_to_dashboard_drilldown_inherits(EmbeddableToDashboardDrilldown,_AbstractDashboardDri);var _super=embeddable_to_dashboard_drilldown_createSuper(EmbeddableToDashboardDrilldown);function EmbeddableToDashboardDrilldown(){var _this;embeddable_to_dashboard_drilldown_classCallCheck(this,EmbeddableToDashboardDrilldown);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));embeddable_to_dashboard_drilldown_defineProperty(embeddable_to_dashboard_drilldown_assertThisInitialized(_this),"id",EMBEDDABLE_TO_DASHBOARD_DRILLDOWN);embeddable_to_dashboard_drilldown_defineProperty(embeddable_to_dashboard_drilldown_assertThisInitialized(_this),"supportedTriggers",(function(){return[uiActions_public_["APPLY_FILTER_TRIGGER"]]}));return _this}embeddable_to_dashboard_drilldown_createClass(EmbeddableToDashboardDrilldown,[{key:"getURL",value:function(){var _getURL=embeddable_to_dashboard_drilldown_asyncToGenerator(regeneratorRuntime.mark((function _callee(config,context){var state,_input$filters,input,_esFilters$extractTim,filtersFromEvent,timeRangeFromEvent,_state$filters,path,url;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:state={dashboardId:config.dashboardId};if(context.embeddable){input=context.embeddable.getInput();if(Object(data_public_["isQuery"])(input.query)&&config.useCurrentFilters)state.query=input.query;if(Object(data_public_["isTimeRange"])(input.timeRange)&&config.useCurrentDateRange)state.timeRange=input.timeRange;if(Object(data_public_["isFilters"])(input.filters))state.filters=config.useCurrentFilters?input.filters:(_input$filters=input.filters)===null||_input$filters===void 0?void 0:_input$filters.filter((function(f){return data_public_["esFilters"].isFilterPinned(f)}))}_esFilters$extractTim=data_public_["esFilters"].extractTimeRange(context.filters,context.timeFieldName),filtersFromEvent=_esFilters$extractTim.restOfFilters,timeRangeFromEvent=_esFilters$extractTim.timeRange;if(filtersFromEvent){state.filters=[].concat(embeddable_to_dashboard_drilldown_toConsumableArray((_state$filters=state.filters)!==null&&_state$filters!==void 0?_state$filters:[]),embeddable_to_dashboard_drilldown_toConsumableArray(filtersFromEvent))}if(timeRangeFromEvent){state.timeRange=timeRangeFromEvent}_context.next=7;return this.urlGenerator.createUrl(state);case 7:path=_context.sent;url=new share_public_["KibanaURL"](path);return _context.abrupt("return",url);case 10:case"end":return _context.stop()}}}),_callee,this)})));function getURL(_x,_x2){return _getURL.apply(this,arguments)}return getURL}()}]);return EmbeddableToDashboardDrilldown}(abstract_dashboard_drilldown_AbstractDashboardDrilldown);function dashboard_drilldowns_services_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function dashboard_drilldowns_services_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function dashboard_drilldowns_services_createClass(Constructor,protoProps,staticProps){if(protoProps)dashboard_drilldowns_services_defineProperties(Constructor.prototype,protoProps);if(staticProps)dashboard_drilldowns_services_defineProperties(Constructor,staticProps);return Constructor}var dashboard_drilldowns_services_DashboardDrilldownsService=function(){function DashboardDrilldownsService(){dashboard_drilldowns_services_classCallCheck(this,DashboardDrilldownsService)}dashboard_drilldowns_services_createClass(DashboardDrilldownsService,[{key:"bootstrap",value:function bootstrap(core,plugins,_ref){var enableDrilldowns=_ref.enableDrilldowns;if(enableDrilldowns){this.setupDrilldowns(core,plugins)}}},{key:"setupDrilldowns",value:function setupDrilldowns(core,_ref2){var uiActions=_ref2.uiActionsEnhanced;var start=Object(kibanaUtils_public_["createStartServicesGetter"])(core.getStartServices);var actionFlyoutCreateDrilldown=new flyout_create_drilldown_FlyoutCreateDrilldownAction({start:start});uiActions.addTriggerAction(public_["CONTEXT_MENU_TRIGGER"],actionFlyoutCreateDrilldown);var actionFlyoutEditDrilldown=new flyout_edit_drilldown_FlyoutEditDrilldownAction({start:start});uiActions.addTriggerAction(public_["CONTEXT_MENU_TRIGGER"],actionFlyoutEditDrilldown);var dashboardToDashboardDrilldown=new embeddable_to_dashboard_drilldown_EmbeddableToDashboardDrilldown({start:start});uiActions.registerDrilldown(dashboardToDashboardDrilldown)}}]);return DashboardDrilldownsService}();function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_DashboardEnhancedPlugin=function(){function DashboardEnhancedPlugin(context){plugin_classCallCheck(this,DashboardEnhancedPlugin);this.context=context;plugin_defineProperty(this,"drilldowns",new dashboard_drilldowns_services_DashboardDrilldownsService)}plugin_createClass(DashboardEnhancedPlugin,[{key:"setup",value:function setup(core,plugins){this.drilldowns.bootstrap(core,plugins,{enableDrilldowns:true});return{}}},{key:"start",value:function start(core,plugins){return{}}},{key:"stop",value:function stop(){}}]);return DashboardEnhancedPlugin}();function public_plugin(context){return new plugin_DashboardEnhancedPlugin(context)}}]);
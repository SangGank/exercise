/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"remoteClusters.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["remoteClusters_bundle_jsonpfunction"]=window["remoteClusters_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=11)})([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return PLUGIN}));__webpack_require__.d(__webpack_exports__,"a",(function(){return API_BASE_PATH}));__webpack_require__.d(__webpack_exports__,"d",(function(){return SNIFF_MODE}));__webpack_require__.d(__webpack_exports__,"c",(function(){return PROXY_MODE}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var basicLicense="basic";var PLUGIN={minimumLicenseType:basicLicense,getI18nName:function getI18nName(){return _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.remoteClusters.appName",{defaultMessage:"Remote Clusters"})}};var API_BASE_PATH="/api/remote_clusters";var SNIFF_MODE="sniff";var PROXY_MODE="proxy"},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return toasts}));__webpack_require__.d(__webpack_exports__,"a",(function(){return fatalError}));__webpack_require__.d(__webpack_exports__,"b",(function(){return init}));var toasts;var fatalError;function init(_toasts,_fatalError){toasts=_toasts;fatalError=_fatalError}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return METRIC_TYPE}));__webpack_require__.d(__webpack_exports__,"b",(function(){return init}));__webpack_require__.d(__webpack_exports__,"c",(function(){return trackUiMetric}));__webpack_require__.d(__webpack_exports__,"d",(function(){return trackUserRequest}));function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}var UnreachableCaseError=function(_Error){_inherits(UnreachableCaseError,_Error);var _super=_createSuper(UnreachableCaseError);function UnreachableCaseError(val){_classCallCheck(this,UnreachableCaseError);return _super.call(this,"Unreachable case: ".concat(val))}return UnreachableCaseError}(_wrapNativeSuper(Error));function createUiStatsMetric(_ref){var type=_ref.type,appName=_ref.appName,eventName=_ref.eventName,_ref$count=_ref.count,count=_ref$count===void 0?1:_ref$count;return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(2);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function application_usage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var application_usage_ApplicationUsage=function(){function ApplicationUsage(){application_usage_classCallCheck(this,ApplicationUsage);_defineProperty(this,"currentUsage",void 0)}_createClass(ApplicationUsage,[{key:"start",value:function start(){var _this=this;if(window)window.addEventListener("click",(function(){return _this.currentUsage&&_this.currentUsage.numberOfClicks++}))}},{key:"appChanged",value:function appChanged(appId){var currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}]);return ApplicationUsage}();var stats=__webpack_require__(10);function trackUsageAgent(appName){var userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function storage_createClass(Constructor,protoProps,staticProps){if(protoProps)storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)storage_defineProperties(Constructor,staticProps);return Constructor}function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReportStorageManager=function(){function ReportStorageManager(storageKey,storage){storage_classCallCheck(this,ReportStorageManager);storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}storage_createClass(ReportStorageManager,[{key:"get",value:function get(){if(!this.storage)return;return this.storage.get(this.storageKey)}},{key:"store",value:function store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}]);return ReportStorageManager}();function report_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_createClass(Constructor,protoProps,staticProps){if(protoProps)report_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_defineProperties(Constructor,staticProps);return Constructor}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPORT_VERSION=1;var report_ReportManager=function(){function ReportManager(report){report_classCallCheck(this,ReportManager);report_defineProperty(this,"report",void 0);this.report=report||ReportManager.createReport()}report_createClass(ReportManager,[{key:"clearReport",value:function clearReport(){this.report=ReportManager.createReport()}},{key:"isReportEmpty",value:function isReportEmpty(){var _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;var noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;var noUserAgent=!userAgent||Object.keys(userAgent).length===0;var noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}},{key:"incrementStats",value:function incrementStats(count,stats){var _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;var newMin=Math.min(min,count);var newMax=Math.max(max,count);var newAvg=newMin+newMax/2;var newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}},{key:"assignReports",value:function assignReports(newMetrics){var _this=this;wrapArray(newMetrics).forEach((function(newMetric){return _this.assignReport(_this.report,newMetric)}));return{report:this.report}}},{key:"assignReport",value:function assignReport(report,metric){var key=ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName=metric.appName,_type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};var existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:_appName,eventName:eventName,type:_type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:var numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;var minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};var appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}],[{key:"createReport",value:function createReport(){return{reportVersion:REPORT_VERSION}}},{key:"createMetricKey",value:function createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName2=metric.appName,eventName=metric.eventName,_type2=metric.type;return"".concat(_appName2,"-").concat(_type2,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}}]);return ReportManager}();report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporter_createClass(Constructor,protoProps,staticProps){if(protoProps)reporter_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporter_defineProperties(Constructor,staticProps);return Constructor}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporter_Reporter=function(){function Reporter(config){var _this=this;reporter_classCallCheck(this,Reporter);reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",(function(){if(!_this.interval){_this.interval=setTimeout((function(){_this.interval=undefined;_this.sendReports()}),_this.checkInterval)}if(_this.started){return}if(window&&document){window.addEventListener("beforeunload",(function(){return _this.reportApplicationUsage()}));document.addEventListener("visibilitychange",(function(){if(document.visibilityState==="visible"&&_this.lastAppId){_this.reportApplicationUsage(_this.lastAppId)}else if(document.visibilityState==="hidden"){_this.reportApplicationUsage();_this.sendReports()}}))}_this.started=true;_this.applicationUsage.start()}));reporter_defineProperty(this,"reportUiStats",(function(appName,type,eventNames,count){var metrics=wrapArray(eventNames).map((function(eventName){_this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));var report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});_this.log(report);return report}));_this.saveToReport(metrics)}));reporter_defineProperty(this,"reportUserAgent",(function(appName){_this.log("Reporting user-agent.");var report=trackUsageAgent(appName);_this.saveToReport([report])}));reporter_defineProperty(this,"sendReports",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}}),_callee,null,[[1,7]])}))));var http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);var storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}reporter_createClass(Reporter,[{key:"saveToReport",value:function saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}},{key:"flushReport",value:function flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}},{key:"log",value:function log(message){if(this.debug){console.debug(message)}}},{key:"reportApplicationUsage",value:function reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;var appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}]);return Reporter}();var constants=__webpack_require__(5);var usageCollection;function init(_usageCollection){usageCollection=_usageCollection}function trackUiMetric(metricType,name){if(!usageCollection){return}var _usageCollection2=usageCollection,reportUiStats=_usageCollection2.reportUiStats;reportUiStats(constants["b"],metricType,name)}function trackUserRequest(request,eventName){return request.then((function(response){trackUiMetric(METRIC_TYPE.COUNT,eventName);return response}))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return UIM_APP_NAME}));__webpack_require__.d(__webpack_exports__,"a",(function(){return UIM_APP_LOAD}));__webpack_require__.d(__webpack_exports__,"c",(function(){return UIM_CLUSTER_ADD}));__webpack_require__.d(__webpack_exports__,"f",(function(){return UIM_CLUSTER_UPDATE}));__webpack_require__.d(__webpack_exports__,"d",(function(){return UIM_CLUSTER_REMOVE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return UIM_CLUSTER_REMOVE_MANY}));__webpack_require__.d(__webpack_exports__,"g",(function(){return UIM_SHOW_DETAILS_CLICK}));var CRUD_APP_BASE_PATH="/management/data/remote_clusters";var UIM_APP_NAME="remote_clusters";var UIM_APP_LOAD="app_load";var UIM_CLUSTER_ADD="cluster_add";var UIM_CLUSTER_UPDATE="cluster_update";var UIM_CLUSTER_REMOVE="cluster_remove";var UIM_CLUSTER_REMOVE_MANY="cluster_remove_many";var UIM_SHOW_DETAILS_CLICK="show_details_click"},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));__webpack_require__.d(__webpack_exports__,"b",(function(){return setBreadcrumbs}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var _setBreadcrumbs;var _breadcrumbs;function init(setGlobalBreadcrumbs){_setBreadcrumbs=setGlobalBreadcrumbs;_breadcrumbs={home:{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.remoteClusters.listBreadcrumbTitle",{defaultMessage:"Remote Clusters"}),href:"/list"},add:{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.remoteClusters.addBreadcrumbTitle",{defaultMessage:"Add"})},edit:{text:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.remoteClusters.editBreadcrumbTitle",{defaultMessage:"Edit"})}}}function setBreadcrumbs(type,queryParams){if(!_breadcrumbs[type]){return}if(type==="home"){_setBreadcrumbs([_breadcrumbs.home])}else{var homeBreadcrumb={text:_breadcrumbs.home.text,href:"".concat(_breadcrumbs.home.href).concat(queryParams)};_setBreadcrumbs([homeBreadcrumb,_breadcrumbs[type]])}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return skippingDisconnectedClustersUrl}));__webpack_require__.d(__webpack_exports__,"d",(function(){return remoteClustersUrl}));__webpack_require__.d(__webpack_exports__,"f",(function(){return transportPortUrl}));__webpack_require__.d(__webpack_exports__,"b",(function(){return proxyModeUrl}));__webpack_require__.d(__webpack_exports__,"c",(function(){return proxySettingsUrl}));__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));var skippingDisconnectedClustersUrl;var remoteClustersUrl;var transportPortUrl;var proxyModeUrl;var proxySettingsUrl;function init(docLinks){var DOC_LINK_VERSION=docLinks.DOC_LINK_VERSION,ELASTIC_WEBSITE_URL=docLinks.ELASTIC_WEBSITE_URL;var esDocBasePath="".concat(ELASTIC_WEBSITE_URL,"guide/en/elasticsearch/reference/").concat(DOC_LINK_VERSION);skippingDisconnectedClustersUrl="".concat(esDocBasePath,"/modules-cross-cluster-search.html#_skipping_disconnected_clusters");remoteClustersUrl="".concat(esDocBasePath,"/modules-remote-clusters.html");transportPortUrl="".concat(esDocBasePath,"/modules-transport.html");proxyModeUrl="".concat(esDocBasePath,"/modules-remote-clusters.html#proxy-mode");proxySettingsUrl="".concat(esDocBasePath,"/modules-remote-clusters.html#remote-cluster-proxy-settings")}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));__webpack_require__.d(__webpack_exports__,"b",(function(){return redirect}));var navigateToApp;function init(_navigateToApp){navigateToApp=_navigateToApp}function redirect(path){navigateToApp("management",{path:path})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return init}));__webpack_require__.d(__webpack_exports__,"d",(function(){return sendPost}));__webpack_require__.d(__webpack_exports__,"c",(function(){return sendGet}));__webpack_require__.d(__webpack_exports__,"e",(function(){return sendPut}));__webpack_require__.d(__webpack_exports__,"b",(function(){return sendDelete}));var _common_constants__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1);var _httpClient;function init(httpClient){_httpClient=httpClient}function getFullPath(path){if(path){return"".concat(_common_constants__WEBPACK_IMPORTED_MODULE_0__["a"],"/").concat(path)}return _common_constants__WEBPACK_IMPORTED_MODULE_0__["a"]}function sendPost(path,payload){return _httpClient.post(getFullPath(path),{body:JSON.stringify(payload)})}function sendGet(path){return _httpClient.get(getFullPath(path))}function sendPut(path,payload){return _httpClient.put(getFullPath(path),{body:JSON.stringify(payload)})}function sendDelete(path){return _httpClient.delete(getFullPath(path))}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_remoteClusters_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);var _node_modules_val_loader_dist_cjs_js_key_remoteClusters_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_remoteClusters_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/remoteClusters/public",__webpack_require__,13)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["remoteClusters"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"RemoteClustersPluginSetup",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var constants=__webpack_require__(1);var breadcrumb=__webpack_require__(6);var documentation=__webpack_require__(7);var services_http=__webpack_require__(9);var ui_metric=__webpack_require__(4);var notification=__webpack_require__(3);var redirect=__webpack_require__(8);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var plugin_RemoteClustersUIPlugin=function(){function RemoteClustersUIPlugin(initializerContext){_classCallCheck(this,RemoteClustersUIPlugin);this.initializerContext=initializerContext}_createClass(RemoteClustersUIPlugin,[{key:"setup",value:function setup(_ref,_ref2){var toasts=_ref.notifications.toasts,http=_ref.http,getStartServices=_ref.getStartServices;var management=_ref2.management,usageCollection=_ref2.usageCollection,cloud=_ref2.cloud;var _this$initializerCont=this.initializerContext.config.get(),isRemoteClustersUiEnabled=_this$initializerCont.ui.enabled;if(isRemoteClustersUiEnabled){var esSection=management.sections.section.data;esSection.registerApp({id:"remote_clusters",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.remoteClusters.appTitle",{defaultMessage:"Remote Clusters"}),order:7,mount:function(){var _mount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref3){var element,setBreadcrumbs,history,_yield$getStartServic,_yield$getStartServic2,core,docTitle,i18nContext,docLinks,fatalErrors,isCloudEnabled,_yield$import,renderApp,unmountAppCallback;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:element=_ref3.element,setBreadcrumbs=_ref3.setBreadcrumbs,history=_ref3.history;_context.next=3;return getStartServices();case 3:_yield$getStartServic=_context.sent;_yield$getStartServic2=_slicedToArray(_yield$getStartServic,1);core=_yield$getStartServic2[0];docTitle=core.chrome.docTitle,i18nContext=core.i18n.Context,docLinks=core.docLinks,fatalErrors=core.fatalErrors;docTitle.change(constants["b"].getI18nName());Object(breadcrumb["a"])(setBreadcrumbs);Object(documentation["a"])(docLinks);Object(ui_metric["b"])(usageCollection);Object(notification["b"])(toasts,fatalErrors);Object(services_http["a"])(http);isCloudEnabled=Boolean(cloud===null||cloud===void 0?void 0:cloud.isCloudEnabled);_context.next=16;return Promise.all([__webpack_require__.e(1),__webpack_require__.e(2)]).then(__webpack_require__.bind(null,73));case 16:_yield$import=_context.sent;renderApp=_yield$import.renderApp;_context.next=20;return renderApp(element,i18nContext,{isCloudEnabled:isCloudEnabled},history);case 20:unmountAppCallback=_context.sent;return _context.abrupt("return",(function(){docTitle.reset();unmountAppCallback()}));case 22:case"end":return _context.stop()}}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()})}return{isUiEnabled:isRemoteClustersUiEnabled}}},{key:"start",value:function start(_ref4){var application=_ref4.application;var _this$initializerCont2=this.initializerContext.config.get(),isRemoteClustersUiEnabled=_this$initializerCont2.ui.enabled;if(isRemoteClustersUiEnabled){Object(redirect["a"])(application.navigateToApp)}}},{key:"stop",value:function stop(){}}]);return RemoteClustersUIPlugin}();var public_plugin=function plugin(initializerContext){return new plugin_RemoteClustersUIPlugin(initializerContext)}},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom},function(module,exports){module.exports=__kbnSharedDeps__.Lodash}]);
/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=6)})([function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/share/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_discoverEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_val_loader_dist_cjs_js_key_discoverEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_discoverEnhanced_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/discoverEnhanced/public",__webpack_require__,8)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["discoverEnhanced"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"DiscoverEnhancedPlugin",(function(){return plugin_DiscoverEnhancedPlugin}));__webpack_require__.d(__webpack_exports__,"DiscoverEnhancedSetupDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"DiscoverEnhancedStartDependencies",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_=__webpack_require__(2);var kibanaUtils_public_=__webpack_require__(3);var embeddable_public_=__webpack_require__(0);var share_public_=__webpack_require__(1);var isOutputWithIndexPatterns=function isOutputWithIndexPatterns(output){if(!output||typeof output!=="object")return false;return Array.isArray(output.indexPatterns)};var getIndexPatterns=function getIndexPatterns(embeddable){if(!embeddable)return[];var output=embeddable.getOutput();return isOutputWithIndexPatterns(output)?output.indexPatterns.map((function(_ref){var id=_ref.id;return id})):[]};var hasExactlyOneIndexPattern=function hasExactlyOneIndexPattern(embeddable){return getIndexPatterns(embeddable).length===1};var external_kbnSharedDeps_KbnI18n_=__webpack_require__(4);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_EXPLORE_DATA="ACTION_EXPLORE_DATA";var abstract_explore_data_action_AbstractExploreDataAction=function(){function AbstractExploreDataAction(params){_classCallCheck(this,AbstractExploreDataAction);this.params=params;_defineProperty(this,"getIconType",(function(context){return"discoverApp"}));_defineProperty(this,"getDisplayName",(function(context){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.discover.FlyoutCreateDrilldownAction.displayName",{defaultMessage:"Explore underlying data"})}))}_createClass(AbstractExploreDataAction,[{key:"isCompatible",value:function(){var _isCompatible=_asyncToGenerator(regeneratorRuntime.mark((function _callee(_ref){var _this$params$start$pl;var embeddable,_this$params$start,core,plugins,capabilities,isDashboardOnlyMode;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;if(embeddable){_context.next=3;break}return _context.abrupt("return",false);case 3:_this$params$start=this.params.start(),core=_this$params$start.core,plugins=_this$params$start.plugins;capabilities=core.application.capabilities;if(!(capabilities.discover&&!capabilities.discover.show)){_context.next=7;break}return _context.abrupt("return",false);case 7:if(plugins.discover.urlGenerator){_context.next=9;break}return _context.abrupt("return",false);case 9:isDashboardOnlyMode=!!((_this$params$start$pl=this.params.start().plugins.kibanaLegacy)===null||_this$params$start$pl===void 0?void 0:_this$params$start$pl.dashboardConfig.getHideWriteControls());if(!isDashboardOnlyMode){_context.next=12;break}return _context.abrupt("return",false);case 12:if(hasExactlyOneIndexPattern(embeddable)){_context.next=14;break}return _context.abrupt("return",false);case 14:if(!(embeddable.getInput().viewMode!==embeddable_public_["ViewMode"].VIEW)){_context.next=16;break}return _context.abrupt("return",false);case 16:return _context.abrupt("return",true);case 17:case"end":return _context.stop()}}}),_callee,this)})));function isCompatible(_x){return _isCompatible.apply(this,arguments)}return isCompatible}()},{key:"execute",value:function(){var _execute=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var _this$params$start2,core,_yield$this$getUrl,appName,appPath;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(hasExactlyOneIndexPattern(context.embeddable)){_context2.next=2;break}return _context2.abrupt("return");case 2:_this$params$start2=this.params.start(),core=_this$params$start2.core;_context2.next=5;return this.getUrl(context);case 5:_yield$this$getUrl=_context2.sent;appName=_yield$this$getUrl.appName;appPath=_yield$this$getUrl.appPath;_context2.next=10;return core.application.navigateToApp(appName,{path:appPath});case 10:case"end":return _context2.stop()}}}),_callee2,this)})));function execute(_x2){return _execute.apply(this,arguments)}return execute}()},{key:"getHref",value:function(){var _getHref=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(context){var embeddable,_yield$this$getUrl2,path;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:embeddable=context.embeddable;if(hasExactlyOneIndexPattern(embeddable)){_context3.next=3;break}throw new Error('Embeddable not supported for "'.concat(this.getDisplayName(context),'" action.'));case 3:_context3.next=5;return this.getUrl(context);case 5:_yield$this$getUrl2=_context3.sent;path=_yield$this$getUrl2.path;return _context3.abrupt("return",path);case 8:case"end":return _context3.stop()}}}),_callee3,this)})));function getHref(_x3){return _getHref.apply(this,arguments)}return getHref}()}]);return AbstractExploreDataAction}();function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function explore_data_context_menu_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function explore_data_context_menu_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){explore_data_context_menu_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){explore_data_context_menu_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function explore_data_context_menu_action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function explore_data_context_menu_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var explore_data_context_menu_action_ACTION_EXPLORE_DATA="ACTION_EXPLORE_DATA";var explore_data_context_menu_action_ExploreDataContextMenuAction=function(_AbstractExploreDataA){_inherits(ExploreDataContextMenuAction,_AbstractExploreDataA);var _super=_createSuper(ExploreDataContextMenuAction);function ExploreDataContextMenuAction(){var _this;explore_data_context_menu_action_classCallCheck(this,ExploreDataContextMenuAction);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));explore_data_context_menu_action_defineProperty(_assertThisInitialized(_this),"id",explore_data_context_menu_action_ACTION_EXPLORE_DATA);explore_data_context_menu_action_defineProperty(_assertThisInitialized(_this),"type",explore_data_context_menu_action_ACTION_EXPLORE_DATA);explore_data_context_menu_action_defineProperty(_assertThisInitialized(_this),"order",200);explore_data_context_menu_action_defineProperty(_assertThisInitialized(_this),"getUrl",function(){var _ref=explore_data_context_menu_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var _this$params$start,plugins,urlGenerator,embeddable,state,input,path;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$params$start=_this.params.start(),plugins=_this$params$start.plugins;urlGenerator=plugins.discover.urlGenerator;if(urlGenerator){_context.next=4;break}throw new Error("Discover URL generator not available.");case 4:embeddable=context.embeddable;state={};if(embeddable){state.indexPatternId=getIndexPatterns(embeddable)[0]||undefined;input=embeddable.getInput();if(input.timeRange&&!state.timeRange)state.timeRange=input.timeRange;if(input.query)state.query=input.query;if(input.filters)state.filters=[].concat(_toConsumableArray(input.filters),_toConsumableArray(state.filters||[]))}_context.next=9;return urlGenerator.createUrl(state);case 9:path=_context.sent;return _context.abrupt("return",new share_public_["KibanaURL"](path));case 11:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());return _this}return ExploreDataContextMenuAction}(abstract_explore_data_action_AbstractExploreDataAction);var data_public_=__webpack_require__(5);function explore_data_chart_action_toConsumableArray(arr){return explore_data_chart_action_arrayWithoutHoles(arr)||explore_data_chart_action_iterableToArray(arr)||explore_data_chart_action_unsupportedIterableToArray(arr)||explore_data_chart_action_nonIterableSpread()}function explore_data_chart_action_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function explore_data_chart_action_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return explore_data_chart_action_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return explore_data_chart_action_arrayLikeToArray(o,minLen)}function explore_data_chart_action_iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function explore_data_chart_action_arrayWithoutHoles(arr){if(Array.isArray(arr))return explore_data_chart_action_arrayLikeToArray(arr)}function explore_data_chart_action_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function explore_data_chart_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function explore_data_chart_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){explore_data_chart_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){explore_data_chart_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function explore_data_chart_action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function explore_data_chart_action_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function explore_data_chart_action_createClass(Constructor,protoProps,staticProps){if(protoProps)explore_data_chart_action_defineProperties(Constructor.prototype,protoProps);if(staticProps)explore_data_chart_action_defineProperties(Constructor,staticProps);return Constructor}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver)}return desc.value}}return _get(target,property,receiver||target)}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=explore_data_chart_action_getPrototypeOf(object);if(object===null)break}return object}function explore_data_chart_action_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)explore_data_chart_action_setPrototypeOf(subClass,superClass)}function explore_data_chart_action_setPrototypeOf(o,p){explore_data_chart_action_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return explore_data_chart_action_setPrototypeOf(o,p)}function explore_data_chart_action_createSuper(Derived){var hasNativeReflectConstruct=explore_data_chart_action_isNativeReflectConstruct();return function _createSuperInternal(){var Super=explore_data_chart_action_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=explore_data_chart_action_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return explore_data_chart_action_possibleConstructorReturn(this,result)}}function explore_data_chart_action_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return explore_data_chart_action_assertThisInitialized(self)}function explore_data_chart_action_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function explore_data_chart_action_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function explore_data_chart_action_getPrototypeOf(o){explore_data_chart_action_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return explore_data_chart_action_getPrototypeOf(o)}function explore_data_chart_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ACTION_EXPLORE_DATA_CHART="ACTION_EXPLORE_DATA_CHART";var explore_data_chart_action_ExploreDataChartAction=function(_AbstractExploreDataA){explore_data_chart_action_inherits(ExploreDataChartAction,_AbstractExploreDataA);var _super=explore_data_chart_action_createSuper(ExploreDataChartAction);function ExploreDataChartAction(){var _this;explore_data_chart_action_classCallCheck(this,ExploreDataChartAction);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));explore_data_chart_action_defineProperty(explore_data_chart_action_assertThisInitialized(_this),"id",ACTION_EXPLORE_DATA_CHART);explore_data_chart_action_defineProperty(explore_data_chart_action_assertThisInitialized(_this),"type",ACTION_EXPLORE_DATA_CHART);explore_data_chart_action_defineProperty(explore_data_chart_action_assertThisInitialized(_this),"order",200);explore_data_chart_action_defineProperty(explore_data_chart_action_assertThisInitialized(_this),"getUrl",function(){var _ref=explore_data_chart_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var _this$params$start,plugins,urlGenerator,embeddable,_esFilters$extractTim,filters,timeRange,state,input,path;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$params$start=_this.params.start(),plugins=_this$params$start.plugins;urlGenerator=plugins.discover.urlGenerator;if(urlGenerator){_context.next=4;break}throw new Error("Discover URL generator not available.");case 4:embeddable=context.embeddable;_esFilters$extractTim=data_public_["esFilters"].extractTimeRange(context.filters,context.timeFieldName),filters=_esFilters$extractTim.restOfFilters,timeRange=_esFilters$extractTim.timeRange;state={filters:filters,timeRange:timeRange};if(embeddable){state.indexPatternId=getIndexPatterns(embeddable)[0]||undefined;input=embeddable.getInput();if(input.timeRange&&!state.timeRange)state.timeRange=input.timeRange;if(input.query)state.query=input.query;if(input.filters)state.filters=[].concat(explore_data_chart_action_toConsumableArray(input.filters),explore_data_chart_action_toConsumableArray(state.filters||[]))}_context.next=10;return urlGenerator.createUrl(state);case 10:path=_context.sent;return _context.abrupt("return",new share_public_["KibanaURL"](path));case 12:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());return _this}explore_data_chart_action_createClass(ExploreDataChartAction,[{key:"isCompatible",value:function(){var _isCompatible=explore_data_chart_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var _context$embeddable;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(((_context$embeddable=context.embeddable)===null||_context$embeddable===void 0?void 0:_context$embeddable.type)==="map")){_context2.next=2;break}return _context2.abrupt("return",false);case 2:return _context2.abrupt("return",_get(explore_data_chart_action_getPrototypeOf(ExploreDataChartAction.prototype),"isCompatible",this).call(this,context));case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function isCompatible(_x2){return _isCompatible.apply(this,arguments)}return isCompatible}()}]);return ExploreDataChartAction}(abstract_explore_data_action_AbstractExploreDataAction);function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var plugin_DiscoverEnhancedPlugin=function(){function DiscoverEnhancedPlugin(context){plugin_classCallCheck(this,DiscoverEnhancedPlugin);this.context=context;plugin_defineProperty(this,"config",void 0);this.config=context.config.get()}plugin_createClass(DiscoverEnhancedPlugin,[{key:"setup",value:function setup(core,_ref){var uiActions=_ref.uiActions,share=_ref.share;var start=Object(kibanaUtils_public_["createStartServicesGetter"])(core.getStartServices);var isSharePluginInstalled=!!share;if(isSharePluginInstalled){var params={start:start};var exploreDataAction=new explore_data_context_menu_action_ExploreDataContextMenuAction(params);uiActions.addTriggerAction(embeddable_public_["CONTEXT_MENU_TRIGGER"],exploreDataAction);if(this.config.actions.exploreDataInChart.enabled){var exploreDataChartAction=new explore_data_chart_action_ExploreDataChartAction(params);uiActions.addTriggerAction(public_["APPLY_FILTER_TRIGGER"],exploreDataChartAction)}}}},{key:"start",value:function start(core,plugins){}},{key:"stop",value:function stop(){}}]);return DiscoverEnhancedPlugin}();var public_plugin=function plugin(initializerContext){return new plugin_DiscoverEnhancedPlugin(initializerContext)}}]);
/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)})([function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports,__webpack_require__){"use strict";module.exports=function(){function _min(d0,d1,d2,bx,ay){return d0<d1||d2<d1?d0>d2?d2+1:d0+1:bx===ay?d1:d1+1}return function(a,b){if(a===b){return 0}if(a.length>b.length){var tmp=a;a=b;b=tmp}var la=a.length;var lb=b.length;while(la>0&&a.charCodeAt(la-1)===b.charCodeAt(lb-1)){la--;lb--}var offset=0;while(offset<la&&a.charCodeAt(offset)===b.charCodeAt(offset)){offset++}la-=offset;lb-=offset;if(la===0||lb<3){return lb}var x=0;var y;var d0;var d1;var d2;var d3;var dd;var dy;var ay;var bx0;var bx1;var bx2;var bx3;var vector=[];for(y=0;y<la;y++){vector.push(y+1);vector.push(a.charCodeAt(offset+y))}var len=vector.length-1;for(;x<lb-3;){bx0=b.charCodeAt(offset+(d0=x));bx1=b.charCodeAt(offset+(d1=x+1));bx2=b.charCodeAt(offset+(d2=x+2));bx3=b.charCodeAt(offset+(d3=x+3));dd=x+=4;for(y=0;y<len;y+=2){dy=vector[y];ay=vector[y+1];d0=_min(dy,d0,d1,bx0,ay);d1=_min(d0,d1,d2,bx1,ay);d2=_min(d1,d2,d3,bx2,ay);dd=_min(d2,d3,dd,bx3,ay);vector[y]=dd;d3=d2;d2=d1;d1=d0;d0=dy}}for(;x<lb;){bx0=b.charCodeAt(offset+(d0=x));dd=++x;for(y=0;y<len;y+=2){dy=vector[y];vector[y]=dd=_min(dy,d0,dd,bx0,vector[y+1]);d0=dy}}return dd}}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4);var _node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_globalSearchProviders_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/globalSearchProviders/public",__webpack_require__,5)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["globalSearchProviders"]},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_Rxjs_=__webpack_require__(1);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(0);var js_levenshtein=__webpack_require__(2);var js_levenshtein_default=__webpack_require__.n(js_levenshtein);var getAppResults=function getAppResults(term,apps){return apps.map((function(app){return{app:app,score:get_app_results_scoreApp(term,app)}})).filter((function(_ref){var score=_ref.score;return score>0})).map((function(_ref2){var app=_ref2.app,score=_ref2.score;return appToResult(app,score)}))};var get_app_results_scoreApp=function scoreApp(term,_ref3){var title=_ref3.title;term=term.toLowerCase();title=title.toLowerCase();if(title===term){return 100}if(title.startsWith(term)){return 90}if(title.includes(term)){return 75}var length=Math.max(term.length,title.length);var distance=js_levenshtein_default()(term,title);var ratio=Math.floor((1-distance/length)*100);if(ratio>=60){return ratio}return 0};var appToResult=function appToResult(app,score){var _app$category$id,_app$category,_app$category$label,_app$category2;return{id:app.id,title:app.title,type:"application",icon:app.euiIconType,url:app.appRoute,meta:{categoryId:(_app$category$id=(_app$category=app.category)===null||_app$category===void 0?void 0:_app$category.id)!==null&&_app$category$id!==void 0?_app$category$id:null,categoryLabel:(_app$category$label=(_app$category2=app.category)===null||_app$category2===void 0?void 0:_app$category2.label)!==null&&_app$category$label!==void 0?_app$category$label:null},score:score}};function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var application_createApplicationResultProvider=function createApplicationResultProvider(applicationPromise){var searchableApps$=Object(external_kbnSharedDeps_Rxjs_["from"])(applicationPromise).pipe(Object(external_kbnSharedDeps_RxjsOperators_["mergeMap"])((function(application){return application.applications$})),Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(apps){return _toConsumableArray(apps.values()).filter((function(app){return app.status===0&&app.navLinkStatus===1&&app.chromeless!==true}))})),Object(external_kbnSharedDeps_RxjsOperators_["shareReplay"])(1));return{id:"application",find:function find(term,_ref){var aborted$=_ref.aborted$,maxResults=_ref.maxResults;return searchableApps$.pipe(Object(external_kbnSharedDeps_RxjsOperators_["takeUntil"])(aborted$),Object(external_kbnSharedDeps_RxjsOperators_["take"])(1),Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(apps){var results=getAppResults(term,_toConsumableArray(apps.values()));return results.sort((function(a,b){return b.score-a.score})).slice(0,maxResults)})))}}};function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||plugin_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function plugin_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return plugin_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return plugin_arrayLikeToArray(o,minLen)}function plugin_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var plugin_GlobalSearchProvidersPlugin=function(){function GlobalSearchProvidersPlugin(){_classCallCheck(this,GlobalSearchProvidersPlugin)}_createClass(GlobalSearchProvidersPlugin,[{key:"setup",value:function setup(_ref,_ref2){var getStartServices=_ref.getStartServices;var globalSearch=_ref2.globalSearch;var applicationPromise=getStartServices().then((function(_ref3){var _ref4=_slicedToArray(_ref3,1),core=_ref4[0];return core.application}));globalSearch.registerResultProvider(application_createApplicationResultProvider(applicationPromise));return{}}},{key:"start",value:function start(){return{}}}]);return GlobalSearchProvidersPlugin}();var public_plugin=function plugin(){return new plugin_GlobalSearchProvidersPlugin}}]);
/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */
(window["ml_bundle_jsonpfunction"]=window["ml_bundle_jsonpfunction"]||[]).push([[13],{110:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"registerEmbeddables",(function(){return registerEmbeddables}));var _anomaly_swimlane__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(392);var _constants__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(325);__webpack_require__.d(__webpack_exports__,"ANOMALY_SWIMLANE_EMBEDDABLE_TYPE",(function(){return _constants__WEBPACK_IMPORTED_MODULE_1__["a"]}));var _types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(326);var _types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_2__);function registerEmbeddables(embeddable,core){var anomalySwimlaneEmbeddableFactory=new _anomaly_swimlane__WEBPACK_IMPORTED_MODULE_0__["a"](core.getStartServices);embeddable.registerEmbeddableFactory(anomalySwimlaneEmbeddableFactory.type,anomalySwimlaneEmbeddableFactory)}},191:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CONTROLLED_BY_SWIM_LANE_FILTER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return createApplyInfluencerFiltersAction}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var _src_plugins_ui_actions_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(38);var _src_plugins_ui_actions_public__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_src_plugins_ui_actions_public__WEBPACK_IMPORTED_MODULE_1__);var _application_explorer_explorer_constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(64);var _src_plugins_data_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(41);var _src_plugins_data_common__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_src_plugins_data_common__WEBPACK_IMPORTED_MODULE_3__);var _embeddables__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(110);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var APPLY_INFLUENCER_FILTERS_ACTION="applyInfluencerFiltersAction";var CONTROLLED_BY_SWIM_LANE_FILTER="anomaly-swim-lane";function createApplyInfluencerFiltersAction(getStartServices){return Object(_src_plugins_ui_actions_public__WEBPACK_IMPORTED_MODULE_1__["createAction"])({id:"apply-to-current-view",type:APPLY_INFLUENCER_FILTERS_ACTION,getIconType(context){return"filter"},getDisplayName(){return _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.ml.actions.applyInfluencersFiltersTitle",{defaultMessage:"Filter for value"})},execute(_ref){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var data,_yield$getStartServic,_yield$getStartServic2,pluginStart,filterManager;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data;if(data){_context.next=3;break}throw new Error("No swim lane selection data provided");case 3:_context.next=5;return getStartServices();case 5:_yield$getStartServic=_context.sent;_yield$getStartServic2=_slicedToArray(_yield$getStartServic,2);pluginStart=_yield$getStartServic2[1];filterManager=pluginStart.data.query.filterManager;filterManager.addFilters(data.lanes.map((function(influencerValue){return{$state:{store:_src_plugins_data_common__WEBPACK_IMPORTED_MODULE_3__["FilterStateStore"].APP_STATE},meta:{alias:_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.ml.actions.influencerFilterAliasLabel",{defaultMessage:"Influencer {labelValue}",values:{labelValue:"".concat(data.viewByFieldName,":").concat(influencerValue)}}),controlledBy:CONTROLLED_BY_SWIM_LANE_FILTER,disabled:false,key:data.viewByFieldName,negate:false,params:{query:influencerValue},type:"phrase"},query:{match_phrase:{[data.viewByFieldName]:influencerValue}}}})));case 10:case"end":return _context.stop()}}}),_callee)})))()},isCompatible(_ref2){return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var embeddable,data;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable,data=_ref2.data;return _context2.abrupt("return",embeddable.type===_embeddables__WEBPACK_IMPORTED_MODULE_4__["ANOMALY_SWIMLANE_EMBEDDABLE_TYPE"]&&data!==undefined&&data.type===_application_explorer_explorer_constants__WEBPACK_IMPORTED_MODULE_2__["h"].VIEW_BY&&data.viewByFieldName!==_application_explorer_explorer_constants__WEBPACK_IMPORTED_MODULE_2__["j"]&&data.lanes.length===1);case 2:case"end":return _context2.stop()}}}),_callee2)})))()}})}},226:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return SWIM_LANE_SELECTION_TRIGGER}));__webpack_require__.d(__webpack_exports__,"b",(function(){return registerMlUiActions}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var public_=__webpack_require__(38);var embeddable_public_=__webpack_require__(37);var embeddables=__webpack_require__(110);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var EDIT_SWIMLANE_PANEL_ACTION="editSwimlanePanelAction";function createEditSwimlanePanelAction(getStartServices){return Object(public_["createAction"])({id:"edit-anomaly-swimlane",type:EDIT_SWIMLANE_PANEL_ACTION,getIconType(context){return"pencil"},getDisplayName:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.actions.editSwimlaneTitle",{defaultMessage:"Edit swim lane"})},execute(_ref){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var embeddable,_yield$getStartServic,_yield$getStartServic2,coreStart,_yield$import,resolveAnomalySwimlaneUserInput,result;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable;if(embeddable){_context.next=3;break}throw new Error("Not possible to execute an action without the embeddable context");case 3:_context.next=5;return getStartServices();case 5:_yield$getStartServic=_context.sent;_yield$getStartServic2=_slicedToArray(_yield$getStartServic,1);coreStart=_yield$getStartServic2[0];_context.prev=8;_context.next=11;return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(3),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,416));case 11:_yield$import=_context.sent;resolveAnomalySwimlaneUserInput=_yield$import.resolveAnomalySwimlaneUserInput;_context.next=15;return resolveAnomalySwimlaneUserInput(coreStart,embeddable.getInput());case 15:result=_context.sent;embeddable.updateInput(result);_context.next=22;break;case 19:_context.prev=19;_context.t0=_context["catch"](8);return _context.abrupt("return",Promise.reject());case 22:case"end":return _context.stop()}}}),_callee,null,[[8,19]])})))()},isCompatible(_ref2){return _asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var embeddable;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable;return _context2.abrupt("return",embeddable.type===embeddables["ANOMALY_SWIMLANE_EMBEDDABLE_TYPE"]&&embeddable.getInput().viewMode===embeddable_public_["ViewMode"].EDIT);case 2:case"end":return _context2.stop()}}}),_callee2)})))()}})}var ml_url_generator=__webpack_require__(0);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function open_in_anomaly_explorer_action_slicedToArray(arr,i){return open_in_anomaly_explorer_action_arrayWithHoles(arr)||open_in_anomaly_explorer_action_iterableToArrayLimit(arr,i)||open_in_anomaly_explorer_action_unsupportedIterableToArray(arr,i)||open_in_anomaly_explorer_action_nonIterableRest()}function open_in_anomaly_explorer_action_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function open_in_anomaly_explorer_action_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return open_in_anomaly_explorer_action_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return open_in_anomaly_explorer_action_arrayLikeToArray(o,minLen)}function open_in_anomaly_explorer_action_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function open_in_anomaly_explorer_action_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function open_in_anomaly_explorer_action_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function open_in_anomaly_explorer_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function open_in_anomaly_explorer_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){open_in_anomaly_explorer_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){open_in_anomaly_explorer_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var OPEN_IN_ANOMALY_EXPLORER_ACTION="openInAnomalyExplorerAction";function createOpenInExplorerAction(getStartServices){return Object(public_["createAction"])({id:"open-in-anomaly-explorer",type:OPEN_IN_ANOMALY_EXPLORER_ACTION,getIconType(context){return"visTable"},getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.actions.openInAnomalyExplorerTitle",{defaultMessage:"Open in Anomaly Explorer"})},getHref(_ref){return open_in_anomaly_explorer_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var embeddable,data,_yield$getStartServic,_yield$getStartServic2,pluginsStart,urlGenerator,_embeddable$getInput,jobIds,timeRange,viewBy,_embeddable$getOutput,perPage,fromPage;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable,data=_ref.data;_context.next=3;return getStartServices();case 3:_yield$getStartServic=_context.sent;_yield$getStartServic2=open_in_anomaly_explorer_action_slicedToArray(_yield$getStartServic,2);pluginsStart=_yield$getStartServic2[1];urlGenerator=pluginsStart.share.urlGenerators.getUrlGenerator(ml_url_generator["a"]);_embeddable$getInput=embeddable.getInput(),jobIds=_embeddable$getInput.jobIds,timeRange=_embeddable$getInput.timeRange,viewBy=_embeddable$getInput.viewBy;_embeddable$getOutput=embeddable.getOutput(),perPage=_embeddable$getOutput.perPage,fromPage=_embeddable$getOutput.fromPage;return _context.abrupt("return",urlGenerator.createUrl({page:"explorer",pageState:{jobIds:jobIds,timeRange:timeRange,mlExplorerSwimlane:_objectSpread({viewByFromPage:fromPage,viewByPerPage:perPage,viewByFieldName:viewBy},data?{selectedType:data.type,selectedTimes:data.times,selectedLanes:data.lanes}:{})}}));case 10:case"end":return _context.stop()}}}),_callee)})))()},execute(_ref2){var _this=this;return open_in_anomaly_explorer_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var embeddable,data,_yield$getStartServic3,_yield$getStartServic4,application,anomalyExplorerUrl;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable,data=_ref2.data;if(embeddable){_context2.next=3;break}throw new Error("Not possible to execute an action without the embeddable context");case 3:_context2.next=5;return getStartServices();case 5:_yield$getStartServic3=_context2.sent;_yield$getStartServic4=open_in_anomaly_explorer_action_slicedToArray(_yield$getStartServic3,1);application=_yield$getStartServic4[0].application;_context2.next=10;return _this.getHref({embeddable:embeddable,data:data});case 10:anomalyExplorerUrl=_context2.sent;_context2.next=13;return application.navigateToUrl(anomalyExplorerUrl);case 13:case"end":return _context2.stop()}}}),_callee2)})))()},isCompatible(_ref3){return open_in_anomaly_explorer_action_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var embeddable;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:embeddable=_ref3.embeddable;return _context3.abrupt("return",embeddable.type===embeddables["ANOMALY_SWIMLANE_EMBEDDABLE_TYPE"]);case 2:case"end":return _context3.stop()}}}),_callee3)})))()}})}var apply_influencer_filters_action=__webpack_require__(191);var SWIM_LANE_SELECTION_TRIGGER="SWIM_LANE_SELECTION_TRIGGER";var swimLaneSelectionTrigger={id:SWIM_LANE_SELECTION_TRIGGER,title:"",description:"Swim lane selection triggered"};var external_kbnSharedDeps_Moment_=__webpack_require__(27);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function apply_time_range_action_slicedToArray(arr,i){return apply_time_range_action_arrayWithHoles(arr)||apply_time_range_action_iterableToArrayLimit(arr,i)||apply_time_range_action_unsupportedIterableToArray(arr,i)||apply_time_range_action_nonIterableRest()}function apply_time_range_action_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function apply_time_range_action_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return apply_time_range_action_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return apply_time_range_action_arrayLikeToArray(o,minLen)}function apply_time_range_action_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function apply_time_range_action_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function apply_time_range_action_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function apply_time_range_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function apply_time_range_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){apply_time_range_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){apply_time_range_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var APPLY_TIME_RANGE_SELECTION_ACTION="applyTimeRangeSelectionAction";function createApplyTimeRangeSelectionAction(getStartServices){return Object(public_["createAction"])({id:"apply-time-range-selection",type:APPLY_TIME_RANGE_SELECTION_ACTION,getIconType(context){return"timeline"},getDisplayName:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.actions.applyTimeRangeSelectionTitle",{defaultMessage:"Apply time range selection"})},execute(_ref){return apply_time_range_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var embeddable,data,_yield$getStartServic,_yield$getStartServic2,pluginStart,timefilter,_embeddable$getOutput,interval,_data$times,from,to;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:embeddable=_ref.embeddable,data=_ref.data;if(data){_context.next=3;break}throw new Error("No swim lane selection data provided");case 3:_context.next=5;return getStartServices();case 5:_yield$getStartServic=_context.sent;_yield$getStartServic2=apply_time_range_action_slicedToArray(_yield$getStartServic,2);pluginStart=_yield$getStartServic2[1];timefilter=pluginStart.data.query.timefilter.timefilter;_embeddable$getOutput=embeddable.getOutput(),interval=_embeddable$getOutput.interval;if(interval){_context.next=12;break}throw new Error("Interval is required to set a time range");case 12:_data$times=apply_time_range_action_slicedToArray(data.times,2),from=_data$times[0],to=_data$times[1];from=from*1e3;to=to*1e3;timefilter.setTime({from:external_kbnSharedDeps_Moment_default()(from),to:external_kbnSharedDeps_Moment_default()(to),mode:"absolute"});case 16:case"end":return _context.stop()}}}),_callee)})))()},isCompatible(_ref2){return apply_time_range_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var embeddable,data;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=_ref2.embeddable,data=_ref2.data;return _context2.abrupt("return",embeddable.type===embeddables["ANOMALY_SWIMLANE_EMBEDDABLE_TYPE"]&&data!==undefined);case 2:case"end":return _context2.stop()}}}),_callee2)})))()}})}function clear_selection_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function clear_selection_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){clear_selection_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){clear_selection_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var CLEAR_SELECTION_ACTION="clearSelectionAction";function createClearSelectionAction(getStartServices){return Object(public_["createAction"])({id:"clear-selection-action",type:CLEAR_SELECTION_ACTION,getIconType(context){return"cross"},getDisplayName:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.actions.clearSelectionTitle",{defaultMessage:"Clear selection"})},shouldAutoExecute:function shouldAutoExecute(){return Promise.resolve(false)},execute(_ref){return clear_selection_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var updateCallback;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:updateCallback=_ref.updateCallback;updateCallback();case 2:case"end":return _context.stop()}}}),_callee)})))()},isCompatible(_ref2){return clear_selection_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var updateCallback;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:updateCallback=_ref2.updateCallback;return _context2.abrupt("return",typeof updateCallback==="function");case 2:case"end":return _context2.stop()}}}),_callee2)})))()}})}function registerMlUiActions(uiActions,core){var editSwimlanePanelAction=createEditSwimlanePanelAction(core.getStartServices);var openInExplorerAction=createOpenInExplorerAction(core.getStartServices);var applyInfluencerFiltersAction=Object(apply_influencer_filters_action["b"])(core.getStartServices);var applyTimeRangeSelectionAction=createApplyTimeRangeSelectionAction(core.getStartServices);var clearSelectionAction=createClearSelectionAction(core.getStartServices);uiActions.registerAction(editSwimlanePanelAction);uiActions.registerAction(openInExplorerAction);uiActions.registerAction(applyInfluencerFiltersAction);uiActions.registerAction(applyTimeRangeSelectionAction);uiActions.registerAction(clearSelectionAction);uiActions.attachAction(embeddable_public_["CONTEXT_MENU_TRIGGER"],editSwimlanePanelAction.id);uiActions.attachAction(embeddable_public_["CONTEXT_MENU_TRIGGER"],openInExplorerAction.id);uiActions.registerTrigger(swimLaneSelectionTrigger);uiActions.addTriggerAction(SWIM_LANE_SELECTION_TRIGGER,applyInfluencerFiltersAction);uiActions.addTriggerAction(SWIM_LANE_SELECTION_TRIGGER,applyTimeRangeSelectionAction);uiActions.addTriggerAction(SWIM_LANE_SELECTION_TRIGGER,openInExplorerAction);uiActions.addTriggerAction(SWIM_LANE_SELECTION_TRIGGER,clearSelectionAction)}},325:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ANOMALY_SWIMLANE_EMBEDDABLE_TYPE}));var ANOMALY_SWIMLANE_EMBEDDABLE_TYPE="ml_anomaly_swimlane"},326:function(module,exports){},392:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return anomaly_swimlane_embeddable_factory_AnomalySwimlaneEmbeddableFactory}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);var http_service=__webpack_require__(78);var embeddables=__webpack_require__(110);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var anomaly_swimlane_embeddable_factory_AnomalySwimlaneEmbeddableFactory=function(){function AnomalySwimlaneEmbeddableFactory(getStartServices){_classCallCheck(this,AnomalySwimlaneEmbeddableFactory);this.getStartServices=getStartServices;_defineProperty(this,"type",embeddables["ANOMALY_SWIMLANE_EMBEDDABLE_TYPE"])}_createClass(AnomalySwimlaneEmbeddableFactory,[{key:"isEditable",value:function(){var _isEditable=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",true);case 1:case"end":return _context.stop()}}}),_callee)})));function isEditable(){return _isEditable.apply(this,arguments)}return isEditable}()},{key:"getDisplayName",value:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.components.jobAnomalyScoreEmbeddable.displayName",{defaultMessage:"ML Anomaly Swim Lane"})}},{key:"getExplicitInput",value:function(){var _getExplicitInput=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var _yield$this$getServic,_yield$this$getServic2,coreStart,_yield$import,resolveAnomalySwimlaneUserInput;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.getServices();case 2:_yield$this$getServic=_context2.sent;_yield$this$getServic2=_slicedToArray(_yield$this$getServic,1);coreStart=_yield$this$getServic2[0];_context2.prev=5;_context2.next=8;return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(3),__webpack_require__.e(1),__webpack_require__.e(5)]).then(__webpack_require__.bind(null,416));case 8:_yield$import=_context2.sent;resolveAnomalySwimlaneUserInput=_yield$import.resolveAnomalySwimlaneUserInput;_context2.next=12;return resolveAnomalySwimlaneUserInput(coreStart);case 12:return _context2.abrupt("return",_context2.sent);case 15:_context2.prev=15;_context2.t0=_context2["catch"](5);return _context2.abrupt("return",Promise.reject());case 18:case"end":return _context2.stop()}}}),_callee2,this,[[5,15]])})));function getExplicitInput(){return _getExplicitInput.apply(this,arguments)}return getExplicitInput}()},{key:"getServices",value:function(){var _getServices=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var _yield$this$getStartS,_yield$this$getStartS2,coreStart,pluginsStart,_yield$import2,AnomalyDetectorService,_yield$import3,AnomalyTimelineService,_yield$import4,mlApiServicesProvider,_yield$import5,mlResultsServiceProvider,httpService,anomalyDetectorService,anomalyTimelineService;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return this.getStartServices();case 2:_yield$this$getStartS=_context3.sent;_yield$this$getStartS2=_slicedToArray(_yield$this$getStartS,2);coreStart=_yield$this$getStartS2[0];pluginsStart=_yield$this$getStartS2[1];_context3.next=8;return Promise.all([__webpack_require__.e(4),__webpack_require__.e(16)]).then(__webpack_require__.bind(null,397));case 8:_yield$import2=_context3.sent;AnomalyDetectorService=_yield$import2.AnomalyDetectorService;_context3.next=12;return __webpack_require__.e(14).then(__webpack_require__.bind(null,332));case 12:_yield$import3=_context3.sent;AnomalyTimelineService=_yield$import3.AnomalyTimelineService;_context3.next=16;return __webpack_require__.e(17).then(__webpack_require__.bind(null,48));case 16:_yield$import4=_context3.sent;mlApiServicesProvider=_yield$import4.mlApiServicesProvider;_context3.next=20;return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(3),__webpack_require__.e(4),__webpack_require__.e(12)]).then(__webpack_require__.bind(null,99));case 20:_yield$import5=_context3.sent;mlResultsServiceProvider=_yield$import5.mlResultsServiceProvider;httpService=new http_service["a"](coreStart.http);anomalyDetectorService=new AnomalyDetectorService(httpService);anomalyTimelineService=new AnomalyTimelineService(pluginsStart.data.query.timefilter.timefilter,coreStart.uiSettings,mlResultsServiceProvider(mlApiServicesProvider(httpService)));return _context3.abrupt("return",[coreStart,pluginsStart,{anomalyDetectorService:anomalyDetectorService,anomalyTimelineService:anomalyTimelineService}]);case 26:case"end":return _context3.stop()}}}),_callee3,this)})));function getServices(){return _getServices.apply(this,arguments)}return getServices}()},{key:"create",value:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(initialInput,parent){var services,_yield$import6,AnomalySwimlaneEmbeddable;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return this.getServices();case 2:services=_context4.sent;_context4.next=5;return __webpack_require__.e(18).then(__webpack_require__.bind(null,329));case 5:_yield$import6=_context4.sent;AnomalySwimlaneEmbeddable=_yield$import6.AnomalySwimlaneEmbeddable;return _context4.abrupt("return",new AnomalySwimlaneEmbeddable(initialInput,services,parent));case 8:case"end":return _context4.stop()}}}),_callee4,this)})));function create(_x,_x2){return _create.apply(this,arguments)}return create}()}]);return AnomalySwimlaneEmbeddableFactory}()},415:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"registerEmbeddables",(function(){return embeddables["registerEmbeddables"]}));__webpack_require__.d(__webpack_exports__,"registerFeature",(function(){return register_feature["a"]}));__webpack_require__.d(__webpack_exports__,"registerManagementSection",(function(){return registerManagementSection}));__webpack_require__.d(__webpack_exports__,"registerMlUiActions",(function(){return ui_actions["b"]}));var embeddables=__webpack_require__(110);var register_feature=__webpack_require__(20);var external_kbnSharedDeps_KbnI18n_=__webpack_require__(2);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function registerManagementSection(management,core){return management.sections.section.insightsAndAlerting.registerApp({id:"jobsListLink",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.ml.management.jobsListTitle",{defaultMessage:"Machine Learning Jobs"}),order:2,mount(params){return _asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$import,mountApp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([__webpack_require__.e(0),__webpack_require__.e(2),__webpack_require__.e(3),__webpack_require__.e(1),__webpack_require__.e(8)]).then(__webpack_require__.bind(null,413));case 2:_yield$import=_context.sent;mountApp=_yield$import.mountApp;return _context.abrupt("return",mountApp(core,params));case 5:case"end":return _context.stop()}}}),_callee)})))()}})}var ui_actions=__webpack_require__(226)},64:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return EXPLORER_ACTION}));__webpack_require__.d(__webpack_exports__,"d",(function(){return FILTER_ACTION}));__webpack_require__.d(__webpack_exports__,"h",(function(){return SWIMLANE_TYPE}));__webpack_require__.d(__webpack_exports__,"b",(function(){return CHART_TYPE}));__webpack_require__.d(__webpack_exports__,"e",(function(){return MAX_CATEGORY_EXAMPLES}));__webpack_require__.d(__webpack_exports__,"f",(function(){return MAX_INFLUENCER_FIELD_VALUES}));__webpack_require__.d(__webpack_exports__,"j",(function(){return VIEW_BY_JOB_LABEL}));__webpack_require__.d(__webpack_exports__,"g",(function(){return OVERALL_LABEL}));__webpack_require__.d(__webpack_exports__,"a",(function(){return ANOMALY_SWIM_LANE_HARD_LIMIT}));__webpack_require__.d(__webpack_exports__,"i",(function(){return SWIM_LANE_DEFAULT_PAGE_SIZE}));var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);var _kbn_i18n__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__);var DRAG_SELECT_ACTION={NEW_SELECTION:"newSelection",ELEMENT_SELECT:"elementSelect",DRAG_START:"dragStart"};var EXPLORER_ACTION={CLEAR_INFLUENCER_FILTER_SETTINGS:"clearInfluencerFilterSettings",CLEAR_JOBS:"clearJobs",JOB_SELECTION_CHANGE:"jobSelectionChange",SET_BOUNDS:"setBounds",SET_CHARTS:"setCharts",SET_EXPLORER_DATA:"setExplorerData",SET_FILTER_DATA:"setFilterData",SET_INFLUENCER_FILTER_SETTINGS:"setInfluencerFilterSettings",SET_SELECTED_CELLS:"setSelectedCells",SET_SWIMLANE_CONTAINER_WIDTH:"setSwimlaneContainerWidth",SET_VIEW_BY_SWIMLANE_FIELD_NAME:"setViewBySwimlaneFieldName",SET_VIEW_BY_SWIMLANE_LOADING:"setViewBySwimlaneLoading",SET_VIEW_BY_PER_PAGE:"setViewByPerPage",SET_VIEW_BY_FROM_PAGE:"setViewByFromPage"};var FILTER_ACTION={ADD:"+",REMOVE:"-"};var SWIMLANE_TYPE={OVERALL:"overall",VIEW_BY:"viewBy"};var CHART_TYPE={EVENT_DISTRIBUTION:"event_distribution",POPULATION_DISTRIBUTION:"population_distribution",SINGLE_METRIC:"single_metric"};var MAX_CATEGORY_EXAMPLES=10;var MAX_INFLUENCER_FIELD_VALUES=10;var MAX_INFLUENCER_FIELD_NAMES=50;var VIEW_BY_JOB_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.ml.explorer.jobIdLabel",{defaultMessage:"job ID"});var OVERALL_LABEL=_kbn_i18n__WEBPACK_IMPORTED_MODULE_0__["i18n"].translate("xpack.ml.explorer.overallLabel",{defaultMessage:"Overall"});var ANOMALY_SWIM_LANE_HARD_LIMIT=1e3;var SWIM_LANE_DEFAULT_PAGE_SIZE=10},78:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return http}));__webpack_require__.d(__webpack_exports__,"c",(function(){return http$}));__webpack_require__.d(__webpack_exports__,"a",(function(){return HttpService}));var rxjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(16);var rxjs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(rxjs__WEBPACK_IMPORTED_MODULE_0__);var _util_dependency_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(15);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getResultHeaders(headers){return _objectSpread({"Content-Type":"application/json"},headers)}function getFetchOptions(options){var _options$headers;if(!options.path){throw new Error("URL path is missing")}return{path:options.path,fetchOptions:_objectSpread(_objectSpread(_objectSpread({asSystemRequest:true,credentials:"same-origin",method:options.method||"GET"},options.body?{body:options.body}:{}),options.query?{query:options.query}:{}),{},{headers:getResultHeaders((_options$headers=options.headers)!==null&&_options$headers!==void 0?_options$headers:{})})}}function http(_x){return _http.apply(this,arguments)}function _http(){_http=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(options){var _getFetchOptions2,path,fetchOptions;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getFetchOptions2=getFetchOptions(options),path=_getFetchOptions2.path,fetchOptions=_getFetchOptions2.fetchOptions;return _context2.abrupt("return",Object(_util_dependency_cache__WEBPACK_IMPORTED_MODULE_1__["g"])().fetch(path,fetchOptions));case 2:case"end":return _context2.stop()}}}),_callee2)})));return _http.apply(this,arguments)}function http$(options){var _getFetchOptions=getFetchOptions(options),path=_getFetchOptions.path,fetchOptions=_getFetchOptions.fetchOptions;return fromHttpHandler(path,fetchOptions)}function fromHttpHandler(input,init){return new rxjs__WEBPACK_IMPORTED_MODULE_0__["Observable"]((function(subscriber){var controller=new AbortController;var signal=controller.signal;var abortable=true;var unsubscribed=false;if(init===null||init===void 0?void 0:init.signal){if(init.signal.aborted){controller.abort()}else{init.signal.addEventListener("abort",(function(){if(!signal.aborted){controller.abort()}}))}}var perSubscriberInit=_objectSpread(_objectSpread({},init?init:{}),{},{signal:signal});Object(_util_dependency_cache__WEBPACK_IMPORTED_MODULE_1__["g"])().fetch(input,perSubscriberInit).then((function(response){abortable=false;subscriber.next(response);subscriber.complete()})).catch((function(err){abortable=false;if(!unsubscribed){subscriber.error(err)}}));return function(){unsubscribed=true;if(abortable){controller.abort()}}}))}var HttpService=function(){function HttpService(httpStart){_classCallCheck(this,HttpService);this.httpStart=httpStart}_createClass(HttpService,[{key:"getResultHeaders",value:function getResultHeaders(headers){return _objectSpread({"Content-Type":"application/json"},headers)}},{key:"getFetchOptions",value:function getFetchOptions(options){var _options$headers2;if(!options.path){throw new Error("URL path is missing")}return{path:options.path,fetchOptions:_objectSpread(_objectSpread(_objectSpread({asSystemRequest:true,credentials:"same-origin",method:options.method||"GET"},options.body?{body:options.body}:{}),options.query?{query:options.query}:{}),{},{headers:this.getResultHeaders((_options$headers2=options.headers)!==null&&_options$headers2!==void 0?_options$headers2:{})})}}},{key:"fromHttpHandler",value:function fromHttpHandler(input,init){var _this=this;return new rxjs__WEBPACK_IMPORTED_MODULE_0__["Observable"]((function(subscriber){var controller=new AbortController;var signal=controller.signal;var abortable=true;var unsubscribed=false;if(init===null||init===void 0?void 0:init.signal){if(init.signal.aborted){controller.abort()}else{init.signal.addEventListener("abort",(function(){if(!signal.aborted){controller.abort()}}))}}var perSubscriberInit=_objectSpread(_objectSpread({},init?init:{}),{},{signal:signal});_this.httpStart.fetch(input,perSubscriberInit).then((function(response){abortable=false;subscriber.next(response);subscriber.complete()})).catch((function(err){abortable=false;if(!unsubscribed){subscriber.error(err)}}));return function(){unsubscribed=true;if(abortable){controller.abort()}}}))}},{key:"http",value:function(){var _http2=_asyncToGenerator(regeneratorRuntime.mark((function _callee(options){var _this$getFetchOptions,path,fetchOptions;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$getFetchOptions=this.getFetchOptions(options),path=_this$getFetchOptions.path,fetchOptions=_this$getFetchOptions.fetchOptions;return _context.abrupt("return",this.httpStart.fetch(path,fetchOptions));case 2:case"end":return _context.stop()}}}),_callee,this)})));function http(_x2){return _http2.apply(this,arguments)}return http}()},{key:"http$",value:function http$(options){var _this$getFetchOptions2=this.getFetchOptions(options),path=_this$getFetchOptions2.path,fetchOptions=_this$getFetchOptions2.fetchOptions;return this.fromHttpHandler(path,fetchOptions)}}]);return HttpService}()}}]);
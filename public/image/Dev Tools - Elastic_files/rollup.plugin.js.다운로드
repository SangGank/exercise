/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}}var installedModules={};var installedChunks={0:0};function jsonpScriptSrc(chunkId){return __webpack_require__.p+"rollup.chunk."+chunkId+".js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["rollup_bundle_jsonpfunction"]=window["rollup_bundle_jsonpfunction"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;return __webpack_require__(__webpack_require__.s=13)})([function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return getNotifications}));__webpack_require__.d(__webpack_exports__,"d",(function(){return setNotifications}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getFatalErrors}));__webpack_require__.d(__webpack_exports__,"c",(function(){return setFatalErrors}));__webpack_require__.d(__webpack_exports__,"e",(function(){return setUiStatsReporter}));__webpack_require__.d(__webpack_exports__,"f",(function(){return trackUiMetric}));var _src_plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);var _src_plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_src_plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var notifications=null;var fatalErrors=null;function getNotifications(){if(!notifications){throw new Error("Rollup notifications is not defined")}return notifications}function setNotifications(newNotifications){notifications=newNotifications}function getFatalErrors(){if(!fatalErrors){throw new Error("Rollup fatalErrors is not defined")}return fatalErrors}function setFatalErrors(newFatalErrors){fatalErrors=newFatalErrors}var _createGetterSetter=Object(_src_plugins_kibana_utils_common__WEBPACK_IMPORTED_MODULE_0__["createGetterSetter"])("uiMetric"),_createGetterSetter2=_slicedToArray(_createGetterSetter,2),getUiStatsReporter=_createGetterSetter2[0],setUiStatsReporter=_createGetterSetter2[1];setUiStatsReporter((function(){}));function trackUiMetric(type,eventNames,count){getUiStatsReporter()(type,eventNames,count)}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CONFIG_ROLLUPS}));__webpack_require__.d(__webpack_exports__,"c",(function(){return UIM_APP_NAME}));__webpack_require__.d(__webpack_exports__,"b",(function(){return UIM_APP_LOAD}));__webpack_require__.d(__webpack_exports__,"i",(function(){return UIM_JOB_CREATE}));__webpack_require__.d(__webpack_exports__,"j",(function(){return UIM_JOB_DELETE}));__webpack_require__.d(__webpack_exports__,"k",(function(){return UIM_JOB_DELETE_MANY}));__webpack_require__.d(__webpack_exports__,"l",(function(){return UIM_JOB_START}));__webpack_require__.d(__webpack_exports__,"m",(function(){return UIM_JOB_START_MANY}));__webpack_require__.d(__webpack_exports__,"n",(function(){return UIM_JOB_STOP}));__webpack_require__.d(__webpack_exports__,"o",(function(){return UIM_JOB_STOP_MANY}));__webpack_require__.d(__webpack_exports__,"p",(function(){return UIM_SHOW_DETAILS_CLICK}));__webpack_require__.d(__webpack_exports__,"g",(function(){return UIM_DETAIL_PANEL_SUMMARY_TAB_CLICK}));__webpack_require__.d(__webpack_exports__,"h",(function(){return UIM_DETAIL_PANEL_TERMS_TAB_CLICK}));__webpack_require__.d(__webpack_exports__,"d",(function(){return UIM_DETAIL_PANEL_HISTOGRAM_TAB_CLICK}));__webpack_require__.d(__webpack_exports__,"f",(function(){return UIM_DETAIL_PANEL_METRICS_TAB_CLICK}));__webpack_require__.d(__webpack_exports__,"e",(function(){return UIM_DETAIL_PANEL_JSON_TAB_CLICK}));var UIM_APP_NAME="rollup_jobs";var UIM_APP_LOAD="app_load";var UIM_JOB_CREATE="job_create";var UIM_JOB_DELETE="job_delete";var UIM_JOB_DELETE_MANY="job_delete_many";var UIM_JOB_START="job_start";var UIM_JOB_START_MANY="job_start_many";var UIM_JOB_STOP="job_stop";var UIM_JOB_STOP_MANY="job_stop_many";var UIM_SHOW_DETAILS_CLICK="show_details_click";var UIM_DETAIL_PANEL_SUMMARY_TAB_CLICK="detail_panel_summary_tab_click";var UIM_DETAIL_PANEL_TERMS_TAB_CLICK="detail_panel_terms_tab_click";var UIM_DETAIL_PANEL_HISTOGRAM_TAB_CLICK="detail_panel_histogram_tab_click";var UIM_DETAIL_PANEL_METRICS_TAB_CLICK="detail_panel_metrics_tab_click";var UIM_DETAIL_PANEL_JSON_TAB_CLICK="detail_panel_json_tab_click";var basicLicense="basic";var PLUGIN={ID:"rollup",minimumLicenseType:basicLicense};var CONFIG_ROLLUPS="rollups:enableIndexPatterns";var API_BASE_PATH="/api/rollup"},function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/indexPatternManagement/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"c",(function(){return createJob}));__webpack_require__.d(__webpack_exports__,"e",(function(){return deleteJobs}));__webpack_require__.d(__webpack_exports__,"v",(function(){return loadJobs}));__webpack_require__.d(__webpack_exports__,"F",(function(){return startJobs}));__webpack_require__.d(__webpack_exports__,"G",(function(){return stopJobs}));__webpack_require__.d(__webpack_exports__,"H",(function(){return validateIndexPattern}));__webpack_require__.d(__webpack_exports__,"C",(function(){return showApiError}));__webpack_require__.d(__webpack_exports__,"D",(function(){return showApiWarning}));__webpack_require__.d(__webpack_exports__,"u",(function(){return listBreadcrumb}));__webpack_require__.d(__webpack_exports__,"b",(function(){return createBreadcrumb}));__webpack_require__.d(__webpack_exports__,"z",(function(){return setEsBaseAndXPackBase}));__webpack_require__.d(__webpack_exports__,"o",(function(){return getLogisticalDetailsUrl}));__webpack_require__.d(__webpack_exports__,"m",(function(){return getDateHistogramDetailsUrl}));__webpack_require__.d(__webpack_exports__,"l",(function(){return getDateHistogramAggregationUrl}));__webpack_require__.d(__webpack_exports__,"s",(function(){return getTermsDetailsUrl}));__webpack_require__.d(__webpack_exports__,"n",(function(){return getHistogramDetailsUrl}));__webpack_require__.d(__webpack_exports__,"p",(function(){return getMetricsDetailsUrl}));__webpack_require__.d(__webpack_exports__,"k",(function(){return getCronUrl}));__webpack_require__.d(__webpack_exports__,"h",(function(){return filterItems}));__webpack_require__.d(__webpack_exports__,"i",(function(){return flattenPanelTree}));__webpack_require__.d(__webpack_exports__,"j",(function(){return formatFields}));__webpack_require__.d(__webpack_exports__,"A",(function(){return setHttp}));__webpack_require__.d(__webpack_exports__,"y",(function(){return serializeJob}));__webpack_require__.d(__webpack_exports__,"f",(function(){return deserializeJob}));__webpack_require__.d(__webpack_exports__,"g",(function(){return deserializeJobs}));__webpack_require__.d(__webpack_exports__,"d",(function(){return createNoticeableDelay}));__webpack_require__.d(__webpack_exports__,"B",(function(){return setUserHasLeftApp}));__webpack_require__.d(__webpack_exports__,"t",(function(){return getUserHasLeftApp}));__webpack_require__.d(__webpack_exports__,"w",(function(){return registerRouter}));__webpack_require__.d(__webpack_exports__,"q",(function(){return getRouter}));__webpack_require__.d(__webpack_exports__,"r",(function(){return getRouterLinkProps}));__webpack_require__.d(__webpack_exports__,"E",(function(){return sort_table_sortTable}));__webpack_require__.d(__webpack_exports__,"x",(function(){return retypeMetrics}));__webpack_require__.d(__webpack_exports__,"a",(function(){return METRIC_TYPE}));var common=__webpack_require__(2);var _http=null;function setHttp(http){_http=http}function getHttp(){if(!_http){throw new Error("Rollup http is not defined")}return _http}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map:undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function")}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class)};return _wrapNativeSuper(Class)}function _construct(Parent,args,Class){if(_isNativeReflectConstruct()){_construct=Reflect.construct}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor;if(Class)_setPrototypeOf(instance,Class.prototype);return instance}}return _construct.apply(null,arguments)}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function wrapArray(subj){return Array.isArray(subj)?subj:[subj]}var UnreachableCaseError=function(_Error){_inherits(UnreachableCaseError,_Error);var _super=_createSuper(UnreachableCaseError);function UnreachableCaseError(val){_classCallCheck(this,UnreachableCaseError);return _super.call(this,"Unreachable case: ".concat(val))}return UnreachableCaseError}(_wrapNativeSuper(Error));function createUiStatsMetric(_ref){var type=_ref.type,appName=_ref.appName,eventName=_ref.eventName,_ref$count=_ref.count,count=_ref$count===void 0?1:_ref$count;return{type:type,appName:appName,eventName:eventName,count:count}}var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(5);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);function application_usage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var application_usage_ApplicationUsage=function(){function ApplicationUsage(){application_usage_classCallCheck(this,ApplicationUsage);_defineProperty(this,"currentUsage",void 0)}_createClass(ApplicationUsage,[{key:"start",value:function start(){var _this=this;if(window)window.addEventListener("click",(function(){return _this.currentUsage&&_this.currentUsage.numberOfClicks++}))}},{key:"appChanged",value:function appChanged(appId){var currentUsage=this.currentUsage;if(appId){this.currentUsage={type:METRIC_TYPE.APPLICATION_USAGE,appId:appId,startTime:external_kbnSharedDeps_MomentTimezone_default()(),numberOfClicks:0}}else{this.currentUsage=void 0}return currentUsage}}]);return ApplicationUsage}();var stats=__webpack_require__(9);function trackUsageAgent(appName){var userAgent=window&&window.navigator&&window.navigator.userAgent||"";return{type:METRIC_TYPE.USER_AGENT,appName:appName,userAgent:userAgent}}var METRIC_TYPE;(function(METRIC_TYPE){METRIC_TYPE["COUNT"]="count";METRIC_TYPE["LOADED"]="loaded";METRIC_TYPE["CLICK"]="click";METRIC_TYPE["USER_AGENT"]="user_agent";METRIC_TYPE["APPLICATION_USAGE"]="application_usage"})(METRIC_TYPE||(METRIC_TYPE={}));function storage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function storage_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function storage_createClass(Constructor,protoProps,staticProps){if(protoProps)storage_defineProperties(Constructor.prototype,protoProps);if(staticProps)storage_defineProperties(Constructor,staticProps);return Constructor}function storage_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ReportStorageManager=function(){function ReportStorageManager(storageKey,storage){storage_classCallCheck(this,ReportStorageManager);storage_defineProperty(this,"storageKey",void 0);storage_defineProperty(this,"storage",void 0);this.storageKey=storageKey;this.storage=storage}storage_createClass(ReportStorageManager,[{key:"get",value:function get(){if(!this.storage)return;return this.storage.get(this.storageKey)}},{key:"store",value:function store(report){if(!this.storage)return;this.storage.set(this.storageKey,report)}}]);return ReportStorageManager}();function report_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_createClass(Constructor,protoProps,staticProps){if(protoProps)report_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_defineProperties(Constructor,staticProps);return Constructor}function report_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REPORT_VERSION=1;var report_ReportManager=function(){function ReportManager(report){report_classCallCheck(this,ReportManager);report_defineProperty(this,"report",void 0);this.report=report||ReportManager.createReport()}report_createClass(ReportManager,[{key:"clearReport",value:function clearReport(){this.report=ReportManager.createReport()}},{key:"isReportEmpty",value:function isReportEmpty(){var _this$report=this.report,uiStatsMetrics=_this$report.uiStatsMetrics,userAgent=_this$report.userAgent,appUsage=_this$report.application_usage;var noUiStats=!uiStatsMetrics||Object.keys(uiStatsMetrics).length===0;var noUserAgent=!userAgent||Object.keys(userAgent).length===0;var noAppUsage=!appUsage||Object.keys(appUsage).length===0;return noUiStats&&noUserAgent&&noAppUsage}},{key:"incrementStats",value:function incrementStats(count,stats){var _ref=stats||{},_ref$min=_ref.min,min=_ref$min===void 0?0:_ref$min,_ref$max=_ref.max,max=_ref$max===void 0?0:_ref$max,_ref$sum=_ref.sum,sum=_ref$sum===void 0?0:_ref$sum;var newMin=Math.min(min,count);var newMax=Math.max(max,count);var newAvg=newMin+newMax/2;var newSum=sum+count;return{min:newMin,max:newMax,avg:newAvg,sum:newSum}}},{key:"assignReports",value:function assignReports(newMetrics){var _this=this;wrapArray(newMetrics).forEach((function(newMetric){return _this.assignReport(_this.report,newMetric)}));return{report:this.report}}},{key:"assignReport",value:function assignReport(report,metric){var key=ReportManager.createMetricKey(metric);switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type,userAgent=metric.userAgent;if(userAgent){report.userAgent={[key]:{key:key,appName:appName,type:type,userAgent:metric.userAgent}}}return}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName=metric.appName,_type=metric.type,eventName=metric.eventName,count=metric.count;report.uiStatsMetrics=report.uiStatsMetrics||{};var existingStats=(report.uiStatsMetrics[key]||{}).stats;report.uiStatsMetrics[key]={key:key,appName:_appName,eventName:eventName,type:_type,stats:this.incrementStats(count,existingStats)};return}case METRIC_TYPE.APPLICATION_USAGE:var numberOfClicks=metric.numberOfClicks,startTime=metric.startTime;var minutesOnScreen=external_kbnSharedDeps_MomentTimezone_default()().diff(startTime,"minutes",true);report.application_usage=report.application_usage||{};var appExistingData=report.application_usage[key]||{minutesOnScreen:0,numberOfClicks:0};report.application_usage[key]={minutesOnScreen:appExistingData.minutesOnScreen+minutesOnScreen,numberOfClicks:appExistingData.numberOfClicks+numberOfClicks};break;default:throw new UnreachableCaseError(metric)}}}],[{key:"createReport",value:function createReport(){return{reportVersion:REPORT_VERSION}}},{key:"createMetricKey",value:function createMetricKey(metric){switch(metric.type){case METRIC_TYPE.USER_AGENT:{var appName=metric.appName,type=metric.type;return"".concat(appName,"-").concat(type)}case METRIC_TYPE.CLICK:case METRIC_TYPE.LOADED:case METRIC_TYPE.COUNT:{var _appName2=metric.appName,eventName=metric.eventName,_type2=metric.type;return"".concat(_appName2,"-").concat(_type2,"-").concat(eventName)}case METRIC_TYPE.APPLICATION_USAGE:return metric.appId;default:throw new UnreachableCaseError(metric)}}}]);return ReportManager}();report_defineProperty(report_ReportManager,"REPORT_VERSION",REPORT_VERSION);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporter_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporter_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporter_createClass(Constructor,protoProps,staticProps){if(protoProps)reporter_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporter_defineProperties(Constructor,staticProps);return Constructor}function reporter_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporter_Reporter=function(){function Reporter(config){var _this=this;reporter_classCallCheck(this,Reporter);reporter_defineProperty(this,"checkInterval",void 0);reporter_defineProperty(this,"interval",void 0);reporter_defineProperty(this,"lastAppId",void 0);reporter_defineProperty(this,"http",void 0);reporter_defineProperty(this,"reportManager",void 0);reporter_defineProperty(this,"storageManager",void 0);reporter_defineProperty(this,"applicationUsage",void 0);reporter_defineProperty(this,"debug",void 0);reporter_defineProperty(this,"retryCount",0);reporter_defineProperty(this,"maxRetries",3);reporter_defineProperty(this,"started",false);reporter_defineProperty(this,"start",(function(){if(!_this.interval){_this.interval=setTimeout((function(){_this.interval=undefined;_this.sendReports()}),_this.checkInterval)}if(_this.started){return}if(window&&document){window.addEventListener("beforeunload",(function(){return _this.reportApplicationUsage()}));document.addEventListener("visibilitychange",(function(){if(document.visibilityState==="visible"&&_this.lastAppId){_this.reportApplicationUsage(_this.lastAppId)}else if(document.visibilityState==="hidden"){_this.reportApplicationUsage();_this.sendReports()}}))}_this.started=true;_this.applicationUsage.start()}));reporter_defineProperty(this,"reportUiStats",(function(appName,type,eventNames,count){var metrics=wrapArray(eventNames).map((function(eventName){_this.log("".concat(type," Metric -> (").concat(appName,":").concat(eventName,"):"));var report=createUiStatsMetric({type:type,appName:appName,eventName:eventName,count:count});_this.log(report);return report}));_this.saveToReport(metrics)}));reporter_defineProperty(this,"reportUserAgent",(function(appName){_this.log("Reporting user-agent.");var report=trackUsageAgent(appName);_this.saveToReport([report])}));reporter_defineProperty(this,"sendReports",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var versionMismatch;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.reportManager.isReportEmpty()){_context.next=13;break}_context.prev=1;_context.next=4;return _this.http(_this.reportManager.report);case 4:_this.flushReport();_context.next=13;break;case 7:_context.prev=7;_context.t0=_context["catch"](1);_this.log("Error Sending Metrics Report ".concat(_context.t0));_this.retryCount=_this.retryCount+1;versionMismatch=_this.reportManager.report.reportVersion!==report_ReportManager.REPORT_VERSION;if(versionMismatch||_this.retryCount>_this.maxRetries){_this.flushReport()}case 13:_this.start();case 14:case"end":return _context.stop()}}}),_callee,null,[[1,7]])}))));var http=config.http,storage=config.storage,debug=config.debug,_config$checkInterval=config.checkInterval,checkInterval=_config$checkInterval===void 0?9e4:_config$checkInterval,_config$storageKey=config.storageKey,storageKey=_config$storageKey===void 0?"analytics":_config$storageKey;this.http=http;this.checkInterval=checkInterval;this.applicationUsage=new application_usage_ApplicationUsage;this.storageManager=new ReportStorageManager(storageKey,storage);var storedReport=this.storageManager.get();this.reportManager=new report_ReportManager(storedReport);this.debug=!!debug}reporter_createClass(Reporter,[{key:"saveToReport",value:function saveToReport(newMetrics){this.reportManager.assignReports(newMetrics);this.storageManager.store(this.reportManager.report)}},{key:"flushReport",value:function flushReport(){this.retryCount=0;this.reportManager.clearReport();this.storageManager.store(this.reportManager.report)}},{key:"log",value:function log(message){if(this.debug){console.debug(message)}}},{key:"reportApplicationUsage",value:function reportApplicationUsage(appId){this.log("Reporting application changed to ".concat(appId));this.lastAppId=appId||this.lastAppId;var appChangedReport=this.applicationUsage.appChanged(appId);if(appChangedReport)this.saveToReport([appChangedReport])}}]);return Reporter}();var kibana_services=__webpack_require__(1);function trackUserRequest(request,actionType){return request.then((function(response){Object(kibana_services["f"])(METRIC_TYPE.LOADED,actionType);return response}))}function api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function api_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){api_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}var apiPrefix="/api/rollup";function loadJobs(){return _loadJobs.apply(this,arguments)}function _loadJobs(){_loadJobs=api_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$getHttp$get,jobs;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getHttp().get("".concat(apiPrefix,"/jobs"));case 2:_yield$getHttp$get=_context.sent;jobs=_yield$getHttp$get.jobs;return _context.abrupt("return",jobs);case 5:case"end":return _context.stop()}}}),_callee)})));return _loadJobs.apply(this,arguments)}function startJobs(_x){return _startJobs.apply(this,arguments)}function _startJobs(){_startJobs=api_asyncToGenerator(regeneratorRuntime.mark((function _callee2(jobIds){var body,request,actionType;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:body={jobIds:jobIds};request=getHttp().post("".concat(apiPrefix,"/start"),{body:JSON.stringify(body)});actionType=jobIds.length>1?common["m"]:common["l"];_context2.next=5;return trackUserRequest(request,actionType);case 5:return _context2.abrupt("return",_context2.sent);case 6:case"end":return _context2.stop()}}}),_callee2)})));return _startJobs.apply(this,arguments)}function stopJobs(_x2){return _stopJobs.apply(this,arguments)}function _stopJobs(){_stopJobs=api_asyncToGenerator(regeneratorRuntime.mark((function _callee3(jobIds){var body,request,actionType;return regeneratorRuntime.wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:body={jobIds:jobIds};request=getHttp().post("".concat(apiPrefix,"/stop"),{body:JSON.stringify(body)});actionType=jobIds.length>1?common["o"]:common["n"];_context3.next=5;return trackUserRequest(request,actionType);case 5:return _context3.abrupt("return",_context3.sent);case 6:case"end":return _context3.stop()}}}),_callee3)})));return _stopJobs.apply(this,arguments)}function deleteJobs(_x3){return _deleteJobs.apply(this,arguments)}function _deleteJobs(){_deleteJobs=api_asyncToGenerator(regeneratorRuntime.mark((function _callee4(jobIds){var body,request,actionType;return regeneratorRuntime.wrap((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:body={jobIds:jobIds};request=getHttp().post("".concat(apiPrefix,"/delete"),{body:JSON.stringify(body)});actionType=jobIds.length>1?common["k"]:common["j"];_context4.next=5;return trackUserRequest(request,actionType);case 5:return _context4.abrupt("return",_context4.sent);case 6:case"end":return _context4.stop()}}}),_callee4)})));return _deleteJobs.apply(this,arguments)}function createJob(_x4){return _createJob.apply(this,arguments)}function _createJob(){_createJob=api_asyncToGenerator(regeneratorRuntime.mark((function _callee5(job){var body,request;return regeneratorRuntime.wrap((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:body={job:job};request=getHttp().put("".concat(apiPrefix,"/create"),{body:JSON.stringify(body)});_context5.next=4;return trackUserRequest(request,common["i"]);case 4:return _context5.abrupt("return",_context5.sent);case 5:case"end":return _context5.stop()}}}),_callee5)})));return _createJob.apply(this,arguments)}function validateIndexPattern(_x5){return _validateIndexPattern.apply(this,arguments)}function _validateIndexPattern(){_validateIndexPattern=api_asyncToGenerator(regeneratorRuntime.mark((function _callee6(indexPattern){return regeneratorRuntime.wrap((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getHttp().get("".concat(apiPrefix,"/index_pattern_validity/").concat(indexPattern));case 2:return _context6.abrupt("return",_context6.sent);case 3:case"end":return _context6.stop()}}}),_callee6)})));return _validateIndexPattern.apply(this,arguments)}function createToastConfig(error,errorTitle){if(error&&error.body){var _error$body=error.body,errorString=_error$body.error,statusCode=_error$body.statusCode,message=_error$body.message;return{title:errorTitle,text:"".concat(statusCode,": ").concat(errorString,". ").concat(message)}}}function showApiWarning(error,errorTitle){var toastConfig=createToastConfig(error,errorTitle);if(toastConfig){return Object(kibana_services["b"])().toasts.addWarning(toastConfig)}return Object(kibana_services["a"])().add(error,errorTitle)}function showApiError(error,errorTitle){var toastConfig=createToastConfig(error,errorTitle);if(toastConfig){return Object(kibana_services["b"])().toasts.addDanger(toastConfig)}Object(kibana_services["a"])().add(error,errorTitle)}var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var listBreadcrumb={text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.listBreadcrumbTitle",{defaultMessage:"Rollups Jobs"}),href:"/"};var createBreadcrumb={text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.createBreadcrumbTitle",{defaultMessage:"Create"})};var esBase="";function setEsBaseAndXPackBase(elasticWebsiteUrl,docLinksVersion){esBase="".concat(elasticWebsiteUrl,"guide/en/elasticsearch/reference/").concat(docLinksVersion)}var getLogisticalDetailsUrl=function getLogisticalDetailsUrl(){return"".concat(esBase,"/rollup-job-config.html#_logistical_details")};var getDateHistogramDetailsUrl=function getDateHistogramDetailsUrl(){return"".concat(esBase,"/rollup-job-config.html#_date_histogram_2")};var getTermsDetailsUrl=function getTermsDetailsUrl(){return"".concat(esBase,"/rollup-job-config.html#_terms_2")};var getHistogramDetailsUrl=function getHistogramDetailsUrl(){return"".concat(esBase,"/rollup-job-config.html#_histogram_2")};var getMetricsDetailsUrl=function getMetricsDetailsUrl(){return"".concat(esBase,"/rollup-job-config.html#rollup-metrics-config")};var getDateHistogramAggregationUrl=function getDateHistogramAggregationUrl(){return"".concat(esBase,"/search-aggregations-bucket-datehistogram-aggregation.html")};var getCronUrl=function getCronUrl(){return"".concat(esBase,"/trigger-schedule.html#_cron_expressions")};var filterItems=function filterItems(fields){var filter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var items=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];var normalizedFilter=filter.toLowerCase();return items.filter((function(item){var actualFields=fields||Object.keys(item);var indexOfMatch=actualFields.findIndex((function(field){var normalizedField=String(item[field]).toLowerCase();return normalizedField.includes(normalizedFilter)}));return indexOfMatch!==-1}))};var flattenPanelTree=function flattenPanelTree(tree){var array=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];array.push(tree);if(tree.items){tree.items.forEach((function(item){if(item.panel){flattenPanelTree(item.panel,array);item.panel=item.panel.id}}))}return array};function formatFields(fieldNames,type){return fieldNames.map((function(fieldName){return{name:fieldName,type:type}}))}function removeEmptyValues(object){Object.keys(object).forEach((function(key){if(object[key]==null||object[key].trim()===""){delete object[key]}}));return object}function serializeJob(jobConfig){var id=jobConfig.id,indexPattern=jobConfig.indexPattern,rollupIndex=jobConfig.rollupIndex,rollupCron=jobConfig.rollupCron,dateHistogramInterval=jobConfig.dateHistogramInterval,rollupDelay=jobConfig.rollupDelay,rollupPageSize=jobConfig.rollupPageSize,dateHistogramTimeZone=jobConfig.dateHistogramTimeZone,dateHistogramField=jobConfig.dateHistogramField,metrics=jobConfig.metrics,terms=jobConfig.terms,histogram=jobConfig.histogram,histogramInterval=jobConfig.histogramInterval;var serializedJob={id:id,index_pattern:indexPattern,rollup_index:rollupIndex,cron:rollupCron,page_size:rollupPageSize,groups:{date_histogram:removeEmptyValues({interval:dateHistogramInterval,delay:rollupDelay,time_zone:dateHistogramTimeZone,field:dateHistogramField})}};if(terms.length){serializedJob.groups.terms={fields:terms.map((function(_ref){var name=_ref.name;return name}))}}if(histogram.length){serializedJob.groups.histogram={interval:histogramInterval,fields:histogram.map((function(_ref2){var name=_ref2.name;return name}))}}if(metrics.length){serializedJob.metrics=[];metrics.forEach((function(_ref3){var name=_ref3.name,types=_ref3.types;if(types.length){serializedJob.metrics.push({field:name,metrics:types})}}))}return serializedJob}function deserializeJob(job){var _job$config=job.config,id=_job$config.id,indexPattern=_job$config.index_pattern,rollupIndex=_job$config.rollup_index,rollupCron=_job$config.cron,metrics=_job$config.metrics,_job$config$groups=_job$config.groups,_job$config$groups$da=_job$config$groups.date_histogram,interval=_job$config$groups$da.interval,fixedInterval=_job$config$groups$da.fixed_interval,calendarInterval=_job$config$groups$da.calendar_interval,rollupDelay=_job$config$groups$da.delay,dateHistogramTimeZone=_job$config$groups$da.time_zone,dateHistogramField=_job$config$groups$da.field,terms=_job$config$groups.terms,histogram=_job$config$groups.histogram,status=job.status.job_state,_job$stats=job.stats,documentsProcessed=_job$stats.documents_processed,pagesProcessed=_job$stats.pages_processed,rollupsIndexed=_job$stats.rollups_indexed,triggerCount=_job$stats.trigger_count;var json=job;var dateHistogramInterval=interval||fixedInterval||calendarInterval;var deserializedJob={id:id,indexPattern:indexPattern,rollupIndex:rollupIndex,rollupCron:rollupCron,dateHistogramInterval:dateHistogramInterval,rollupDelay:rollupDelay,dateHistogramTimeZone:dateHistogramTimeZone,dateHistogramField:dateHistogramField,status:status,metrics:[],terms:[],histogram:[],documentsProcessed:documentsProcessed,pagesProcessed:pagesProcessed,rollupsIndexed:rollupsIndexed,triggerCount:triggerCount,json:json};if(metrics){metrics.forEach((function(_ref4){var field=_ref4.field,metrics=_ref4.metrics;deserializedJob.metrics.push({name:field,types:metrics})}))}if(terms){deserializedJob.terms=terms.fields.map((function(name){return{name:name}}))}if(histogram){deserializedJob.histogram=histogram.fields.map((function(name){return{name:name}}));deserializedJob.histogramInterval=histogram.interval}return deserializedJob}function deserializeJobs(){var jobs=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return jobs.map(deserializeJob)}function createNoticeableDelay(promise){var noticeableDelay=new Promise((function(resolve){return setTimeout((function(){resolve()}),300)}));return Promise.all([promise,noticeableDelay])}var node_modules_history=__webpack_require__(12);var _userHasLeftApp=false;function setUserHasLeftApp(userHasLeftApp){_userHasLeftApp=userHasLeftApp}function getUserHasLeftApp(){return _userHasLeftApp}var isModifiedEvent=function isModifiedEvent(event){return!!(event.metaKey||event.altKey||event.ctrlKey||event.shiftKey)};var isLeftClickEvent=function isLeftClickEvent(event){return event.button===0};var router;function registerRouter(reactRouter){router=reactRouter}function getRouter(){return router}function getRouterLinkProps(to){var location=typeof to==="string"?Object(node_modules_history["createLocation"])(to,null,null,router.history.location):to;var href=router.history.createHref(location);var onClick=function onClick(event){if(event.defaultPrevented){return}if(event.target.getAttribute("target")){return}if(isModifiedEvent(event)||!isLeftClickEvent(event)){return}event.preventDefault();router.history.push(location)};return{href:href,onClick:onClick}}var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var stringSort=function stringSort(fieldName){return function(item){return item[fieldName]}};var sorters={};var sort_table_sortTable=function sortTable(){var array=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];var sortField=arguments.length>1?arguments[1]:undefined;var isSortAscending=arguments.length>2?arguments[2]:undefined;var sorter=sorters[sortField]||stringSort(sortField);var sorted=Object(external_kbnSharedDeps_Lodash_["sortBy"])(array,sorter);return isSortAscending?sorted:sorted.reverse()};function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){retype_metrics_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function retype_metrics_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function retypeMetrics(_ref){var metrics=_ref.metrics,typeMaps=_ref.typeMaps;return metrics.map((function(metric){var metricName=metric.name;var _typeMaps$find=typeMaps.find((function(type){return type.fields.some((function(field){return field.name===metricName}))})),type=_typeMaps$find.type;return _objectSpread(_objectSpread({},metric),{},{type:type})}))}},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";if(true){module.exports=__webpack_require__(15)}else{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_rollup_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14);var _node_modules_val_loader_dist_cjs_js_key_rollup_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_rollup_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/rollup/public",__webpack_require__,20)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["rollup"]},function(module,exports,__webpack_require__){"use strict";function _interopDefault(n){return n&&"object"==typeof n&&"default"in n?n.default:n}Object.defineProperty(exports,"__esModule",{value:!0});var resolvePathname=_interopDefault(__webpack_require__(16)),valueEqual=_interopDefault(__webpack_require__(17));__webpack_require__(18);var invariant=_interopDefault(__webpack_require__(19));function _extends(){return(_extends=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a])}return n}).apply(this,arguments)}function addLeadingSlash(n){return"/"===n.charAt(0)?n:"/"+n}function stripLeadingSlash(n){return"/"===n.charAt(0)?n.substr(1):n}function hasBasename(n,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(n)}function stripBasename(n,t){return hasBasename(n,t)?n.substr(t.length):n}function stripTrailingSlash(n){return"/"===n.charAt(n.length-1)?n.slice(0,-1):n}function parsePath(n){var t=n||"/",e="",a="",o=t.indexOf("#");-1!==o&&(a=t.substr(o),t=t.substr(0,o));var r=t.indexOf("?");return-1!==r&&(e=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===e?"":e,hash:"#"===a?"":a}}function createPath(n){var t=n.pathname,e=n.search,a=n.hash,o=t||"/";return e&&"?"!==e&&(o+="?"===e.charAt(0)?e:"?"+e),a&&"#"!==a&&(o+="#"===a.charAt(0)?a:"#"+a),o}function createLocation(n,t,e,a){var o;"string"==typeof n?(o=parsePath(n)).state=t:(void 0===(o=_extends({},n)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(n){throw n instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):n}return e&&(o.key=e),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=resolvePathname(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o}function locationsAreEqual(n,t){return n.pathname===t.pathname&&n.search===t.search&&n.hash===t.hash&&n.key===t.key&&valueEqual(n.state,t.state)}function createTransitionManager(){var r=null;var a=[];return{setPrompt:function(n){return r=n,function(){r===n&&(r=null)}},confirmTransitionTo:function(n,t,e,a){if(null!=r){var o="function"==typeof r?r(n,t):r;"string"==typeof o?"function"==typeof e?e(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(n){var t=!0;function e(){t&&n.apply(void 0,arguments)}return a.push(e),function(){t=!1,a=a.filter((function(n){return n!==e}))}},notifyListeners:function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];a.forEach((function(n){return n.apply(void 0,t)}))}}}var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement);function getConfirmation(n,t){t(window.confirm(n))}function supportsHistory(){var n=window.navigator.userAgent;return(-1===n.indexOf("Android 2.")&&-1===n.indexOf("Android 4.0")||-1===n.indexOf("Mobile Safari")||-1!==n.indexOf("Chrome")||-1!==n.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}function supportsPopStateOnHashChange(){return-1===window.navigator.userAgent.indexOf("Trident")}function supportsGoWithoutReloadUsingHash(){return-1===window.navigator.userAgent.indexOf("Firefox")}function isExtraneousPopstateEvent(n){void 0===n.state&&navigator.userAgent.indexOf("CriOS")}var PopStateEvent="popstate",HashChangeEvent="hashchange";function getHistoryState(){try{return window.history.state||{}}catch(n){return{}}}function createBrowserHistory(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var c=window.history,s=supportsHistory(),t=!supportsPopStateOnHashChange(),e=n,a=e.forceRefresh,h=void 0!==a&&a,o=e.getUserConfirmation,u=void 0===o?getConfirmation:o,r=e.keyLength,i=void 0===r?6:r,f=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"";function l(n){var t=n||{},e=t.key,a=t.state,o=window.location,r=o.pathname+o.search+o.hash;return f&&(r=stripBasename(r,f)),createLocation(r,a,e)}function d(){return Math.random().toString(36).substr(2,i)}var v=createTransitionManager();function p(n){_extends(T,n),T.length=c.length,v.notifyListeners(T.location,T.action)}function g(n){isExtraneousPopstateEvent(n)||w(l(n.state))}function P(){w(l(getHistoryState()))}var m=!1;function w(t){if(m)m=!1,p();else{v.confirmTransitionTo(t,"POP",u,(function(n){n?p({action:"POP",location:t}):function(n){var t=T.location,e=H.indexOf(t.key);-1===e&&(e=0);var a=H.indexOf(n.key);-1===a&&(a=0);var o=e-a;o&&(m=!0,L(o))}(t)}))}}var y=l(getHistoryState()),H=[y.key];function x(n){return f+createPath(n)}function L(n){c.go(n)}var O=0;function E(n){1===(O+=n)&&1===n?(window.addEventListener(PopStateEvent,g),t&&window.addEventListener(HashChangeEvent,P)):0===O&&(window.removeEventListener(PopStateEvent,g),t&&window.removeEventListener(HashChangeEvent,P))}var S=!1;var T={length:c.length,action:"POP",location:y,createHref:x,push:function(n,t){var i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,"PUSH",u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.pushState({key:e,state:a},null,t),h)window.location.href=t;else{var o=H.indexOf(T.location.key),r=H.slice(0,-1===o?0:o+1);r.push(i.key),H=r,p({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(n,t){var r="REPLACE",i=createLocation(n,t,d(),T.location);v.confirmTransitionTo(i,r,u,(function(n){if(n){var t=x(i),e=i.key,a=i.state;if(s)if(c.replaceState({key:e,state:a},null,t),h)window.location.replace(t);else{var o=H.indexOf(T.location.key);-1!==o&&(H[o]=i.key),p({action:r,location:i})}else window.location.replace(t)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(n){void 0===n&&(n=!1);var t=v.setPrompt(n);return S||(E(1),S=!0),function(){return S&&(S=!1,E(-1)),t()}},listen:function(n){var t=v.appendListener(n);return E(1),function(){E(-1),t()}}};return T}var HashChangeEvent$1="hashchange",HashPathCoders={hashbang:{encodePath:function(n){return"!"===n.charAt(0)?n:"!/"+stripLeadingSlash(n)},decodePath:function(n){return"!"===n.charAt(0)?n.substr(1):n}},noslash:{encodePath:stripLeadingSlash,decodePath:addLeadingSlash},slash:{encodePath:addLeadingSlash,decodePath:addLeadingSlash}};function getHashPath(){var n=window.location.href,t=n.indexOf("#");return-1===t?"":n.substring(t+1)}function pushHashPath(n){window.location.hash=n}function replaceHashPath(n){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,0<=t?t:0)+"#"+n)}function createHashHistory(n){void 0===n&&(n={}),canUseDOM||invariant(!1);var t=window.history,e=(supportsGoWithoutReloadUsingHash(),n),a=e.getUserConfirmation,i=void 0===a?getConfirmation:a,o=e.hashType,r=void 0===o?"slash":o,c=n.basename?stripTrailingSlash(addLeadingSlash(n.basename)):"",s=HashPathCoders[r],h=s.encodePath,u=s.decodePath;function f(){var n=u(getHashPath());return c&&(n=stripBasename(n,c)),createLocation(n)}var l=createTransitionManager();function d(n){_extends(E,n),E.length=t.length,l.notifyListeners(E.location,E.action)}var v=!1,p=null;function g(){var n=getHashPath(),t=h(n);if(n!==t)replaceHashPath(t);else{var e=f(),a=E.location;if(!v&&locationsAreEqual(a,e))return;if(p===createPath(e))return;p=null,function(t){if(v)v=!1,d();else{l.confirmTransitionTo(t,"POP",i,(function(n){n?d({action:"POP",location:t}):function(n){var t=E.location,e=y.lastIndexOf(createPath(t));-1===e&&(e=0);var a=y.lastIndexOf(createPath(n));-1===a&&(a=0);var o=e-a;o&&(v=!0,H(o))}(t)}))}}(e)}}var P=getHashPath(),m=h(P);P!==m&&replaceHashPath(m);var w=f(),y=[createPath(w)];function H(n){t.go(n)}var x=0;function L(n){1===(x+=n)&&1===n?window.addEventListener(HashChangeEvent$1,g):0===x&&window.removeEventListener(HashChangeEvent$1,g)}var O=!1;var E={length:t.length,action:"POP",location:w,createHref:function(n){return"#"+h(c+createPath(n))},push:function(n,t){var r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,"PUSH",i,(function(n){if(n){var t=createPath(r),e=h(c+t);if(getHashPath()!==e){p=t,pushHashPath(e);var a=y.lastIndexOf(createPath(E.location)),o=y.slice(0,-1===a?0:a+1);o.push(t),y=o,d({action:"PUSH",location:r})}else d()}}))},replace:function(n,t){var o="REPLACE",r=createLocation(n,void 0,void 0,E.location);l.confirmTransitionTo(r,o,i,(function(n){if(n){var t=createPath(r),e=h(c+t);getHashPath()!==e&&(p=t,replaceHashPath(e));var a=y.indexOf(createPath(E.location));-1!==a&&(y[a]=t),d({action:o,location:r})}}))},go:H,goBack:function(){H(-1)},goForward:function(){H(1)},block:function(n){void 0===n&&(n=!1);var t=l.setPrompt(n);return O||(L(1),O=!0),function(){return O&&(O=!1,L(-1)),t()}},listen:function(n){var t=l.appendListener(n);return L(1),function(){L(-1),t()}}};return E}function clamp(n,t,e){return Math.min(Math.max(n,t),e)}function createMemoryHistory(n){void 0===n&&(n={});var t=n,o=t.getUserConfirmation,e=t.initialEntries,a=void 0===e?["/"]:e,r=t.initialIndex,i=void 0===r?0:r,c=t.keyLength,s=void 0===c?6:c,h=createTransitionManager();function u(n){_extends(g,n),g.length=g.entries.length,h.notifyListeners(g.location,g.action)}function f(){return Math.random().toString(36).substr(2,s)}var l=clamp(i,0,a.length-1),d=a.map((function(n){return createLocation(n,void 0,"string"==typeof n?f():n.key||f())})),v=createPath;function p(n){var t=clamp(g.index+n,0,g.entries.length-1),e=g.entries[t];h.confirmTransitionTo(e,"POP",o,(function(n){n?u({action:"POP",location:e,index:t}):u()}))}var g={length:d.length,action:"POP",location:d[l],index:l,entries:d,createHref:v,push:function(n,t){var a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,"PUSH",o,(function(n){if(n){var t=g.index+1,e=g.entries.slice(0);e.length>t?e.splice(t,e.length-t,a):e.push(a),u({action:"PUSH",location:a,index:t,entries:e})}}))},replace:function(n,t){var e="REPLACE",a=createLocation(n,t,f(),g.location);h.confirmTransitionTo(a,e,o,(function(n){n&&(g.entries[g.index]=a,u({action:e,location:a}))}))},go:p,goBack:function(){p(-1)},goForward:function(){p(1)},canGo:function(n){var t=g.index+n;return 0<=t&&t<g.entries.length},block:function(n){return void 0===n&&(n=!1),h.setPrompt(n)},listen:function(n){return h.appendListener(n)}};return g}exports.createBrowserHistory=createBrowserHistory,exports.createHashHistory=createHashHistory,exports.createMemoryHistory=createMemoryHistory,exports.createLocation=createLocation,exports.locationsAreEqual=locationsAreEqual,exports.parsePath=parsePath,exports.createPath=createPath},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;function isAbsolute(pathname){return pathname.charAt(0)==="/"}function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1){list[i]=list[k]}list.pop()}function resolvePathname(to){var from=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";var toParts=to&&to.split("/")||[];var fromParts=from&&from.split("/")||[];var isToAbs=to&&isAbsolute(to);var isFromAbs=from&&isAbsolute(from);var mustEndAbs=isToAbs||isFromAbs;if(to&&isAbsolute(to)){fromParts=toParts}else if(toParts.length){fromParts.pop();fromParts=fromParts.concat(toParts)}if(!fromParts.length)return"/";var hasTrailingSlash=void 0;if(fromParts.length){var last=fromParts[fromParts.length-1];hasTrailingSlash=last==="."||last===".."||last===""}else{hasTrailingSlash=false}var up=0;for(var i=fromParts.length;i>=0;i--){var part=fromParts[i];if(part==="."){spliceOne(fromParts,i)}else if(part===".."){spliceOne(fromParts,i);up++}else if(up){spliceOne(fromParts,i);up--}}if(!mustEndAbs)for(;up--;up){fromParts.unshift("..")}if(mustEndAbs&&fromParts[0]!==""&&(!fromParts[0]||!isAbsolute(fromParts[0])))fromParts.unshift("");var result=fromParts.join("/");if(hasTrailingSlash&&result.substr(-1)!=="/")result+="/";return result}exports.default=resolvePathname;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";exports.__esModule=true;var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function valueEqual(a,b){if(a===b)return true;if(a==null||b==null)return false;if(Array.isArray(a)){return Array.isArray(b)&&a.length===b.length&&a.every((function(item,index){return valueEqual(item,b[index])}))}var aType=typeof a==="undefined"?"undefined":_typeof(a);var bType=typeof b==="undefined"?"undefined":_typeof(b);if(aType!==bType)return false;if(aType==="object"){var aValue=a.valueOf();var bValue=b.valueOf();if(aValue!==a||bValue!==b)return valueEqual(aValue,bValue);var aKeys=Object.keys(a);var bKeys=Object.keys(b);if(aKeys.length!==bKeys.length)return false;return aKeys.every((function(key){return valueEqual(a[key],b[key])}))}return false}exports.default=valueEqual;module.exports=exports["default"]},function(module,exports,__webpack_require__){"use strict";var isProduction="production"==="production";function warning(condition,message){if(!isProduction){if(condition){return}var text="Warning: "+message;if(typeof console!=="undefined"){console.warn(text)}try{throw Error(text)}catch(x){}}}module.exports=warning},function(module,exports,__webpack_require__){"use strict";var isProduction="production"==="production";var prefix="Invariant failed";function invariant(condition,message){if(condition){return}if(isProduction){throw new Error(prefix)}else{throw new Error(prefix+": "+(message||""))}}module.exports=invariant},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(0);var external_kbnSharedDeps_Lodash_=__webpack_require__(4);var propertyPath="isRollupIndex";var rollupToggleExtension={matchIndex:function matchIndex(index){return Object(external_kbnSharedDeps_Lodash_["get"])(index,propertyPath)},label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.indexMgmtToggle.toggleLabel",{defaultMessage:"Include rollup indices"}),name:"rollupToggle"};var rollupBadgeExtension={matchIndex:function matchIndex(index){return Object(external_kbnSharedDeps_Lodash_["get"])(index,propertyPath)},label:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.indexMgmtBadge.rollupLabel",{defaultMessage:"Rollup"}),color:"secondary",filterExpression:"isRollupIndex:true"};var external_kbnSharedDeps_React_=__webpack_require__(3);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(8);var rollup_prompt_RollupPrompt=function RollupPrompt(){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"warning",iconType:"help",title:"Beta feature"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.rollupPrompt.betaCalloutParagraph1Text",{defaultMessage:"Kibana's support for rollup index patterns is in beta. You might encounter issues using "+"these patterns in saved searches, visualizations, and dashboards. They are not supported in "+"some advanced features, such as Timelion, and Machine Learning."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.rollupPrompt.betaCalloutParagraph2Text",{defaultMessage:"You can match a rollup index pattern against one rollup index and zero or more regular "+"indices. A rollup index pattern has limited metrics, fields, intervals, and aggregations. A "+"rollup index is limited to indices that have one job configuration, or multiple jobs with "+"compatible configurations."})))};var public_=__webpack_require__(6);function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var rollupIndexPatternTypeName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.defaultTypeName",{defaultMessage:"rollup index pattern"});var rollupIndexPatternButtonText=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.defaultButtonText",{defaultMessage:"Rollup index pattern"});var rollupIndexPatternButtonDescription=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.defaultButtonDescription",{defaultMessage:"Perform limited aggregations against summarized data"});var rollupIndexPatternNoMatchError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.noMatchError",{defaultMessage:"Rollup index pattern error: must match one rollup index"});var rollupIndexPatternTooManyMatchesError=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.tooManyMatchesError",{defaultMessage:"Rollup index pattern error: can only match one rollup index"});var rollupIndexPatternIndexLabel=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.indexLabel",{defaultMessage:"Rollup"});var rollup_index_pattern_creation_config_RollupIndexPatternCreationConfig=function(_IndexPatternCreation){_inherits(RollupIndexPatternCreationConfig,_IndexPatternCreation);var _super=_createSuper(RollupIndexPatternCreationConfig);function RollupIndexPatternCreationConfig(options){var _this;_classCallCheck(this,RollupIndexPatternCreationConfig);_this=_super.call(this,_objectSpread({type:"rollup",name:rollupIndexPatternTypeName,showSystemIndices:false,isBeta:true},options));_defineProperty(_assertThisInitialized(_this),"key","rollup");_defineProperty(_assertThisInitialized(_this),"isRollupIndex",(function(indexName){return _this.rollupIndices.includes(indexName)}));_defineProperty(_assertThisInitialized(_this),"checkIndicesForErrors",(function(indices){_this.rollupIndex=null;if(!indices||!indices.length){return}var rollupIndices=indices.filter((function(index){return _this.isRollupIndex(index.name)}));if(!rollupIndices.length){return[rollupIndexPatternNoMatchError]}else if(rollupIndices.length>1){return[rollupIndexPatternTooManyMatchesError]}var rollupIndexName=rollupIndices[0].name;var error=_this.rollupIndicesCapabilities[rollupIndexName].error;if(error){var errorMessage=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.editRollupIndexPattern.createIndex.uncaughtError",{defaultMessage:"Rollup index pattern error: {error}",values:{error:error}});return[errorMessage]}_this.rollupIndex=rollupIndexName}));_defineProperty(_assertThisInitialized(_this),"getIndexPatternMappings",(function(){return _this.rollupIndex?{type:_this.type,typeMeta:{params:{rollup_index:_this.rollupIndex},aggs:_this.rollupIndicesCapabilities[_this.rollupIndex].aggs}}:{}}));_defineProperty(_assertThisInitialized(_this),"renderPrompt",(function(){return external_kbnSharedDeps_React_default.a.createElement(rollup_prompt_RollupPrompt,null)}));_defineProperty(_assertThisInitialized(_this),"getFetchForWildcardOptions",(function(){return{type:_this.type,params:{rollup_index:_this.rollupIndex}}}));_this.rollupIndex=null;_this.rollupJobs=[];_this.rollupIndicesCapabilities={};_this.rollupIndices=[];return _this}_createClass(RollupIndexPatternCreationConfig,[{key:"setRollupIndices",value:function(){var _setRollupIndices=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var isAnonymous,response;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;isAnonymous=this.httpClient.anonymousPaths.isAnonymous(window.location.pathname);if(isAnonymous){_context.next=7;break}_context.next=5;return this.httpClient.get("/api/rollup/indices");case 5:response=_context.sent;this.rollupIndicesCapabilities=response||{};case 7:this.rollupIndices=Object.keys(this.rollupIndicesCapabilities);_context.next=12;break;case 10:_context.prev=10;_context.t0=_context["catch"](0);case 12:case"end":return _context.stop()}}}),_callee,this,[[0,10]])})));function setRollupIndices(){return _setRollupIndices.apply(this,arguments)}return setRollupIndices}()},{key:"getIndexPatternCreationOption",value:function(){var _getIndexPatternCreationOption=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(urlHandler){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.setRollupIndices();case 2:return _context2.abrupt("return",this.rollupIndices&&this.rollupIndices.length?{text:rollupIndexPatternButtonText,description:rollupIndexPatternButtonDescription,testSubj:"createRollupIndexPatternButton",isBeta:this.isBeta,onClick:function onClick(){urlHandler("/create?type=rollup")}}:null);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function getIndexPatternCreationOption(_x){return _getIndexPatternCreationOption.apply(this,arguments)}return getIndexPatternCreationOption}()},{key:"getIndexTags",value:function getIndexTags(indexName){return this.isRollupIndex(indexName)?[{key:this.type,name:rollupIndexPatternIndexLabel,color:"primary"}]:[]}}]);return RollupIndexPatternCreationConfig}(public_["IndexPatternCreationConfig"]);function rollup_index_pattern_list_config_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function rollup_index_pattern_list_config_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)rollup_index_pattern_list_config_setPrototypeOf(subClass,superClass)}function rollup_index_pattern_list_config_setPrototypeOf(o,p){rollup_index_pattern_list_config_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return rollup_index_pattern_list_config_setPrototypeOf(o,p)}function rollup_index_pattern_list_config_createSuper(Derived){var hasNativeReflectConstruct=rollup_index_pattern_list_config_isNativeReflectConstruct();return function _createSuperInternal(){var Super=rollup_index_pattern_list_config_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=rollup_index_pattern_list_config_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return rollup_index_pattern_list_config_possibleConstructorReturn(this,result)}}function rollup_index_pattern_list_config_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return rollup_index_pattern_list_config_assertThisInitialized(self)}function rollup_index_pattern_list_config_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function rollup_index_pattern_list_config_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function rollup_index_pattern_list_config_getPrototypeOf(o){rollup_index_pattern_list_config_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return rollup_index_pattern_list_config_getPrototypeOf(o)}function rollup_index_pattern_list_config_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isRollup(indexPattern){return indexPattern.type==="rollup"||indexPattern.get&&indexPattern.get("type")==="rollup"}var RollupIndexPatternListConfig=function(_IndexPatternListConf){rollup_index_pattern_list_config_inherits(RollupIndexPatternListConfig,_IndexPatternListConf);var _super=rollup_index_pattern_list_config_createSuper(RollupIndexPatternListConfig);function RollupIndexPatternListConfig(){var _this;rollup_index_pattern_list_config_classCallCheck(this,RollupIndexPatternListConfig);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_super.call.apply(_super,[this].concat(args));rollup_index_pattern_list_config_defineProperty(rollup_index_pattern_list_config_assertThisInitialized(_this),"key","rollup");rollup_index_pattern_list_config_defineProperty(rollup_index_pattern_list_config_assertThisInitialized(_this),"getIndexPatternTags",(function(indexPattern){return isRollup(indexPattern)?[{key:"rollup",name:"Rollup"}]:[]}));rollup_index_pattern_list_config_defineProperty(rollup_index_pattern_list_config_assertThisInitialized(_this),"getFieldInfo",(function(indexPattern,field){if(!isRollup(indexPattern)){return[]}var allAggs=indexPattern.typeMeta&&indexPattern.typeMeta.aggs;var fieldAggs=allAggs&&Object.keys(allAggs).filter((function(agg){return allAggs[agg][field]}));if(!fieldAggs||!fieldAggs.length){return[]}return["Rollup aggregations:"].concat(fieldAggs.map((function(aggName){var agg=allAggs[aggName][field];switch(aggName){case"date_histogram":return"".concat(aggName," (interval: ").concat(agg.interval,", ").concat(agg.delay?"delay: ".concat(agg.delay,","):""," ").concat(agg.time_zone,")");break;case"histogram":return"".concat(aggName," (interval: ").concat(agg.interval,")");default:return aggName}})))}));rollup_index_pattern_list_config_defineProperty(rollup_index_pattern_list_config_assertThisInitialized(_this),"areScriptedFieldsEnabled",(function(indexPattern){return!isRollup(indexPattern)}));return _this}return RollupIndexPatternListConfig}(public_["IndexPatternListConfig"]);var common=__webpack_require__(2);var home_public_=__webpack_require__(10);var services=__webpack_require__(7);var kibana_services=__webpack_require__(1);function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}var plugin_RollupPlugin=function(){function RollupPlugin(){plugin_classCallCheck(this,RollupPlugin)}plugin_createClass(RollupPlugin,[{key:"setup",value:function setup(core,_ref){var home=_ref.home,management=_ref.management,indexManagement=_ref.indexManagement,indexPatternManagement=_ref.indexPatternManagement,usageCollection=_ref.usageCollection;Object(kibana_services["c"])(core.fatalErrors);if(usageCollection){Object(kibana_services["e"])(usageCollection.reportUiStats.bind(usageCollection,common["c"]))}if(indexManagement){indexManagement.extensionsService.addBadge(rollupBadgeExtension);indexManagement.extensionsService.addToggle(rollupToggleExtension)}var isRollupIndexPatternsEnabled=core.uiSettings.get(common["a"]);if(isRollupIndexPatternsEnabled){indexPatternManagement.creation.addCreationConfig(rollup_index_pattern_creation_config_RollupIndexPatternCreationConfig);indexPatternManagement.list.addListConfig(RollupIndexPatternListConfig)}if(home){home.featureCatalogue.register({id:"rollup_jobs",title:"Rollups",description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.featureCatalogueDescription",{defaultMessage:"Summarize and store historical data in a smaller index for future analysis."}),icon:"indexRollupApp",path:"/app/management/data/rollup_jobs/job_list",showOnHomePage:false,category:home_public_["FeatureCatalogueCategory"].ADMIN})}var pluginName=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.rollupJobs.appTitle",{defaultMessage:"Rollup Jobs"});management.sections.section.data.registerApp({id:"rollup_jobs",title:pluginName,order:4,mount(params){return plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _yield$core$getStartS,_yield$core$getStartS2,coreStart,docTitle,_yield$import,renderApp,unmountAppCallback;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return core.getStartServices();case 2:_yield$core$getStartS=_context.sent;_yield$core$getStartS2=_slicedToArray(_yield$core$getStartS,1);coreStart=_yield$core$getStartS2[0];docTitle=coreStart.chrome.docTitle;docTitle.change(pluginName);params.setBreadcrumbs([{text:pluginName}]);_context.next=10;return Promise.all([__webpack_require__.e(1),__webpack_require__.e(2)]).then(__webpack_require__.bind(null,80));case 10:_yield$import=_context.sent;renderApp=_yield$import.renderApp;_context.next=14;return renderApp(core,params);case 14:unmountAppCallback=_context.sent;return _context.abrupt("return",(function(){docTitle.reset();unmountAppCallback()}));case 16:case"end":return _context.stop()}}}),_callee)})))()}})}},{key:"start",value:function start(core){Object(services["A"])(core.http);Object(kibana_services["d"])(core.notifications);Object(services["z"])(core.docLinks.ELASTIC_WEBSITE_URL,core.docLinks.DOC_LINK_VERSION)}}]);return RollupPlugin}();var public_plugin=function plugin(){return new plugin_RollupPlugin}},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom}]);
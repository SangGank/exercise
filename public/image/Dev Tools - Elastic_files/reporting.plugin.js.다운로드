/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements.
 * Licensed under the Elastic License; you may not use this file except in compliance with the Elastic License. */(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=19)})([function(module,exports){module.exports=__kbnSharedDeps__.React},function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Lodash},function(module,exports){module.exports=__kbnSharedDeps__.RxjsOperators},function(module,exports){module.exports=__kbnSharedDeps__.Rxjs},function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports){module.exports=__kbnSharedDeps__.Moment},function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},function(module,exports,__webpack_require__){(function(root,factory){if(true){module.exports=factory()}else{}})(typeof self!=="undefined"?self:this,(function(){var rison={};rison.uri_ok={"~":true,"!":true,"*":true,"(":true,")":true,"-":true,_:true,".":true,",":true,":":true,"@":true,$:true,"'":true,"/":true};(function(){var l=[];for(var hi=0;hi<16;hi++){for(var lo=0;lo<16;lo++){if(hi+lo===0)continue;var c=String.fromCharCode(hi*16+lo);if(!/\w|[-_./~]/.test(c))l.push("\\u00"+hi.toString(16)+lo.toString(16))}}rison.not_idchar=l.join("")})();rison.not_idchar=" '!:(),*@$";rison.not_idstart="-0123456789";(function(){var idrx="[^"+rison.not_idstart+rison.not_idchar+"][^"+rison.not_idchar+"]*";rison.id_ok=new RegExp("^"+idrx+"$");rison.next_id=new RegExp(idrx,"g")})();rison.quote=function(x){if(/^[-A-Za-z0-9~!*()_.',:@$/]*$/.test(x))return x;return encodeURIComponent(x).replace(/%2C/g,",").replace(/%3A/g,":").replace(/%40/g,"@").replace(/%24/g,"$").replace(/%2F/g,"/").replace(/%20/g,"+")};(function(){var sq={"'":true,"!":true},enc=function(v){if(v&&typeof v.toJSON==="function")v=v.toJSON();var fn=s[typeof v];if(fn)return fn(v)},s={array:function(x){var a=["!("],b,i,l=x.length,v;for(i=0;i<l;i+=1){v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a[a.length]=v;b=true}}a[a.length]=")";return a.join("")},boolean:function(x){if(x)return"!t";return"!f"},null:function(){return"!n"},number:function(x){if(!isFinite(x))return"!n";return String(x).replace(/\+/,"")},object:function(x){if(x){if(x instanceof Array){return s.array(x)}if(typeof x.__prototype__==="object"&&typeof x.__prototype__.encode_rison!=="undefined")return x.encode_rison();var a=["("],b,i,v,ki,ks=[];for(i in x)ks[ks.length]=i;ks.sort();for(ki=0;ki<ks.length;ki++){i=ks[ki];v=enc(x[i]);if(typeof v=="string"){if(b){a[a.length]=","}a.push(s.string(i),":",v);b=true}}a[a.length]=")";return a.join("")}return"!n"},string:function(x){if(x==="")return"''";if(rison.id_ok.test(x))return x;x=x.replace(/(['!])/g,(function(a,b){if(sq[b])return"!"+b;return b}));return"'"+x+"'"},undefined:function(){return}};rison.encode=function(v){return enc(v)};rison.encode_object=function(v){if(typeof v!="object"||v===null||v instanceof Array)throw new Error("rison.encode_object expects an object argument");var r=s[typeof v](v);return r.substring(1,r.length-1)};rison.encode_array=function(v){if(!(v instanceof Array))throw new Error("rison.encode_array expects an array argument");var r=s[typeof v](v);return r.substring(2,r.length-1)};rison.encode_uri=function(v){return rison.quote(s[typeof v](v))}})();rison.decode=function(r){var errcb=function(e){throw Error("rison decoder error: "+e)};if(typeof r!=="string")return errcb("decode input must be a string");var p=new rison.parser(errcb);return p.parse(r)};rison.decode_object=function(r){return rison.decode("("+r+")")};rison.decode_array=function(r){return rison.decode("!("+r+")")};rison.parser=function(errcb){this.errorHandler=errcb};rison.parser.WHITESPACE="";rison.parser.prototype.setOptions=function(options){if(options["errorHandler"])this.errorHandler=options.errorHandler};rison.parser.prototype.parse=function(str){this.string=str;this.index=0;this.message=null;var value=this.readValue();if(!this.message&&this.next())value=this.error("unable to parse string as rison: '"+rison.encode(str)+"'");if(this.message&&this.errorHandler)this.errorHandler(this.message,this.index);return value};rison.parser.prototype.error=function(message){if(typeof console!=="undefined")console.log("rison parser error: ",message);this.message=message;return undefined};rison.parser.prototype.readValue=function(){var c=this.next();var fn=c&&this.table[c];if(fn)return fn.apply(this);var s=this.string;var i=this.index-1;rison.next_id.lastIndex=i;var m=rison.next_id.exec(s);if(m.length>0){var id=m[0];this.index=i+id.length;return id}if(c)return this.error("invalid character: '"+c+"'");return this.error("empty expression")};rison.parser.parse_array=function(parser){var ar=[];var c;while((c=parser.next())!==")"){if(!c)return parser.error("unmatched '!('");if(ar.length){if(c!==",")parser.error("missing ','")}else if(c===","){return parser.error("extra ','")}else--parser.index;var n=parser.readValue();if(typeof n=="undefined")return undefined;ar.push(n)}return ar};rison.parser.bangs={t:true,f:false,n:null,"(":rison.parser.parse_array};rison.parser.prototype.table={"!":function(){var s=this.string;var c=s.charAt(this.index++);if(!c)return this.error('"!" at end of input');var x=rison.parser.bangs[c];if(typeof x=="function"){return x.call(null,this)}else if(typeof x=="undefined"){return this.error('unknown literal: "!'+c+'"')}return x},"(":function(){var o={};var c;var count=0;while((c=this.next())!==")"){if(count){if(c!==",")this.error("missing ','")}else if(c===","){return this.error("extra ','")}else--this.index;var k=this.readValue();if(typeof k==="undefined")return undefined;if(this.next()!==":")return this.error("missing ':'");var v=this.readValue();if(typeof v==="undefined")return undefined;o[k]=v;count++}return o},"'":function(){var s=this.string;var i=this.index;var start=i;var segments=[];var c;while((c=s.charAt(i++))!=="'"){if(!c)return this.error('unmatched "\'"');if(c==="!"){if(start<i-1)segments.push(s.slice(start,i-1));c=s.charAt(i++);if("!'".indexOf(c)>=0){segments.push(c)}else{return this.error('invalid string escape: "!'+c+'"')}start=i}}if(start<i-1)segments.push(s.slice(start,i-1));this.index=i;return segments.length===1?segments[0]:segments.join("")},"-":function(){var s=this.string;var i=this.index;var start=i-1;var state="int";var permittedSigns="-";var transitions={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var c=s.charAt(i++);if(!c)break;if("0"<=c&&c<="9")continue;if(permittedSigns.indexOf(c)>=0){permittedSigns="";continue}state=transitions[state+"+"+c.toLowerCase()];if(state==="exp")permittedSigns="-"}while(state);this.index=--i;s=s.slice(start,i);if(s==="-")return this.error("invalid number");return Number(s)}};(function(table){for(var i=0;i<=9;i++)table[String(i)]=table["-"]})(rison.parser.prototype.table);rison.parser.prototype.next=function(){var c;var s=this.string;var i=this.index;do{if(i===s.length)return undefined;c=s.charAt(i++)}while(rison.parser.WHITESPACE.indexOf(c)>=0);this.index=i;return c};return rison}))},function(module,exports,__webpack_require__){function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var moment=__webpack_require__(10);var unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:1e3*60},h:{weight:4,type:"mixed",base:1e3*60*60},d:{weight:5,type:"mixed",base:1e3*60*60*24},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}};var units=Object.keys(unitsMap).sort((function(a,b){return unitsMap[b].weight-unitsMap[a].weight}));var unitsDesc=_toConsumableArray(units);var unitsAsc=_toConsumableArray(units).reverse();var isDate=function isDate(d){return Object.prototype.toString.call(d)==="[object Date]"};var isValidDate=function isValidDate(d){return isDate(d)&&!isNaN(d.valueOf())};function parse(text){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$roundUp=_ref.roundUp,roundUp=_ref$roundUp===void 0?false:_ref$roundUp,_ref$momentInstance=_ref.momentInstance,momentInstance=_ref$momentInstance===void 0?moment:_ref$momentInstance,forceNow=_ref.forceNow;if(!text)return undefined;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(forceNow!==undefined&&!isValidDate(forceNow)){throw new Error("forceNow must be a valid Date")}var time;var mathString="";var index;var parseString;if(text.substring(0,3)==="now"){time=momentInstance(forceNow);mathString=text.substring("now".length)}else{index=text.indexOf("||");if(index===-1){parseString=text;mathString=""}else{parseString=text.substring(0,index);mathString=text.substring(index+2)}time=momentInstance(parseString)}if(!mathString.length){return time}return parseDateMath(mathString,time,roundUp)}function parseDateMath(mathString,time,roundUp){var dateTime=time;var len=mathString.length;var i=0;while(i<len){var c=mathString.charAt(i++);var type=void 0;var num=void 0;var unit=void 0;if(c==="/"){type=0}else if(c==="+"){type=1}else if(c==="-"){type=2}else{return}if(isNaN(mathString.charAt(i))){num=1}else if(mathString.length===2){num=mathString.charAt(i)}else{var numFrom=i;while(!isNaN(mathString.charAt(i))){i++;if(i>=len)return}num=parseInt(mathString.substring(numFrom,i),10)}if(type===0){if(num!==1){return}}unit=mathString.charAt(i++);for(var j=i;j<len;j++){var unitChar=mathString.charAt(i);if(/[a-z]/i.test(unitChar)){unit+=unitChar;i++}else{break}}if(units.indexOf(unit)===-1){return}else{if(type===0){if(roundUp)dateTime.endOf(unit);else dateTime.startOf(unit)}else if(type===1){dateTime.add(num,unit)}else if(type===2){dateTime.subtract(num,unit)}}}return dateTime}module.exports={parse:parse,unitsMap:Object.freeze(unitsMap),units:Object.freeze(units),unitsAsc:Object.freeze(unitsAsc),unitsDesc:Object.freeze(unitsDesc)}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/home/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";const strictUriEncode=__webpack_require__(21);const decodeComponent=__webpack_require__(22);const splitOnFirst=__webpack_require__(23);const isNullOrUndefined=value=>value===null||value===undefined;function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[",index,"]"].join("")]}return[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,[encode(key,options),"[]"].join("")]}return[...result,[encode(key,options),"[]=",encode(value,options)].join("")]};case"comma":case"separator":return key=>(result,value)=>{if(value===null||value===undefined||value.length===0){return result}if(result.length===0){return[[encode(key,options),"=",encode(value,options)].join("")]}return[[result,encode(value,options)].join(options.arrayFormatSeparator)]};default:return key=>(result,value)=>{if(value===undefined||options.skipNull&&value===null||options.skipEmptyString&&value===""){return result}if(value===null){return[...result,encode(key,options)]}return[...result,[encode(key,options),"=",encode(value,options)].join("")]}}}function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)\]$/.exec(key);key=key.replace(/\[\d*\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]={}}accumulator[key][result[1]]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[\])$/.exec(key);key=key.replace(/\[\]$/,"");if(!result){accumulator[key]=value;return}if(accumulator[key]===undefined){accumulator[key]=[value];return}accumulator[key]=[].concat(accumulator[key],value)};case"comma":case"separator":return(key,value,accumulator)=>{const isArray=typeof value==="string"&&value.split("").indexOf(options.arrayFormatSeparator)>-1;const newValue=isArray?value.split(options.arrayFormatSeparator).map(item=>decode(item,options)):value===null?value:decode(value,options);accumulator[key]=newValue};default:return(key,value,accumulator)=>{if(accumulator[key]===undefined){accumulator[key]=value;return}accumulator[key]=[].concat(accumulator[key],value)}}}function validateArrayFormatSeparator(value){if(typeof value!=="string"||value.length!==1){throw new TypeError("arrayFormatSeparator must be single character string")}}function encode(value,options){if(options.encode){return options.strict?strictUriEncode(value):encodeURIComponent(value)}return value}function decode(value,options){if(options.decode){return decodeComponent(value)}return value}function keysSorter(input){if(Array.isArray(input)){return input.sort()}if(typeof input==="object"){return keysSorter(Object.keys(input)).sort((a,b)=>Number(a)-Number(b)).map(key=>input[key])}return input}function removeHash(input){const hashStart=input.indexOf("#");if(hashStart!==-1){input=input.slice(0,hashStart)}return input}function getHash(url){let hash="";const hashStart=url.indexOf("#");if(hashStart!==-1){hash=url.slice(hashStart)}return hash}function extract(input){input=removeHash(input);const queryStart=input.indexOf("?");if(queryStart===-1){return""}return input.slice(queryStart+1)}function parseValue(value,options){if(options.parseNumbers&&!Number.isNaN(Number(value))&&(typeof value==="string"&&value.trim()!=="")){value=Number(value)}else if(options.parseBooleans&&value!==null&&(value.toLowerCase()==="true"||value.toLowerCase()==="false")){value=value.toLowerCase()==="true"}return value}function parse(input,options){options=Object.assign({decode:true,sort:true,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:false,parseBooleans:false},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const formatter=parserForArrayFormat(options);const ret=Object.create(null);if(typeof input!=="string"){return ret}input=input.trim().replace(/^[?#&]/,"");if(!input){return ret}for(const param of input.split("&")){let[key,value]=splitOnFirst(options.decode?param.replace(/\+/g," "):param,"=");value=value===undefined?null:["comma","separator"].includes(options.arrayFormat)?value:decode(value,options);formatter(decode(key,options),value,ret)}for(const key of Object.keys(ret)){const value=ret[key];if(typeof value==="object"&&value!==null){for(const k of Object.keys(value)){value[k]=parseValue(value[k],options)}}else{ret[key]=parseValue(value,options)}}if(options.sort===false){return ret}return(options.sort===true?Object.keys(ret).sort():Object.keys(ret).sort(options.sort)).reduce((result,key)=>{const value=ret[key];if(Boolean(value)&&typeof value==="object"&&!Array.isArray(value)){result[key]=keysSorter(value)}else{result[key]=value}return result},Object.create(null))}exports.extract=extract;exports.parse=parse;exports.stringify=(object,options)=>{if(!object){return""}options=Object.assign({encode:true,strict:true,arrayFormat:"none",arrayFormatSeparator:","},options);validateArrayFormatSeparator(options.arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&object[key]==="";const formatter=encoderForArrayFormat(options);const objectCopy={};for(const key of Object.keys(object)){if(!shouldFilter(key)){objectCopy[key]=object[key]}}const keys=Object.keys(objectCopy);if(options.sort!==false){keys.sort(options.sort)}return keys.map(key=>{const value=object[key];if(value===undefined){return""}if(value===null){return encode(key,options)}if(Array.isArray(value)){return value.reduce(formatter(key),[]).join("&")}return encode(key,options)+"="+encode(value,options)}).filter(x=>x.length>0).join("&")};exports.parseUrl=(input,options)=>{options=Object.assign({decode:true},options);const[url,hash]=splitOnFirst(input,"#");return Object.assign({url:url.split("?")[0]||"",query:parse(extract(input),options)},options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:decode(hash,options)}:{})};exports.stringifyUrl=(input,options)=>{options=Object.assign({encode:true,strict:true},options);const url=removeHash(input.url).split("?")[0]||"";const queryFromUrl=exports.extract(input.url);const parsedQueryFromUrl=exports.parse(queryFromUrl,{sort:false});const query=Object.assign(parsedQueryFromUrl,input.query);let queryString=exports.stringify(query,options);if(queryString){queryString=`?${queryString}`}let hash=getHash(input.url);if(input.fragmentIdentifier){hash=`#${encode(input.fragmentIdentifier,options)}`}return`${url}${queryString}${hash}`}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/uiActions/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__kbnBundles__.get("plugin/discover/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var punycode=__webpack_require__(24);var util=__webpack_require__(27);exports.parse=urlParse;exports.resolve=urlResolve;exports.resolveObject=urlResolveObject;exports.format=urlFormat;exports.Url=Url;function Url(){this.protocol=null;this.slashes=null;this.auth=null;this.host=null;this.port=null;this.hostname=null;this.hash=null;this.search=null;this.query=null;this.pathname=null;this.path=null;this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r","\n","\t"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:true,"javascript:":true},hostlessProtocol={javascript:true,"javascript:":true},slashedProtocol={http:true,https:true,ftp:true,gopher:true,file:true,"http:":true,"https:":true,"ftp:":true,"gopher:":true,"file:":true},querystring=__webpack_require__(28);function urlParse(url,parseQueryString,slashesDenoteHost){if(url&&util.isObject(url)&&url instanceof Url)return url;var u=new Url;u.parse(url,parseQueryString,slashesDenoteHost);return u}Url.prototype.parse=function(url,parseQueryString,slashesDenoteHost){if(!util.isString(url)){throw new TypeError("Parameter 'url' must be a string, not "+typeof url)}var queryIndex=url.indexOf("?"),splitter=queryIndex!==-1&&queryIndex<url.indexOf("#")?"?":"#",uSplit=url.split(splitter),slashRegex=/\\/g;uSplit[0]=uSplit[0].replace(slashRegex,"/");url=uSplit.join(splitter);var rest=url;rest=rest.trim();if(!slashesDenoteHost&&url.split("#").length===1){var simplePath=simplePathPattern.exec(rest);if(simplePath){this.path=rest;this.href=rest;this.pathname=simplePath[1];if(simplePath[2]){this.search=simplePath[2];if(parseQueryString){this.query=querystring.parse(this.search.substr(1))}else{this.query=this.search.substr(1)}}else if(parseQueryString){this.search="";this.query={}}return this}}var proto=protocolPattern.exec(rest);if(proto){proto=proto[0];var lowerProto=proto.toLowerCase();this.protocol=lowerProto;rest=rest.substr(proto.length)}if(slashesDenoteHost||proto||rest.match(/^\/\/[^@\/]+@[^@\/]+/)){var slashes=rest.substr(0,2)==="//";if(slashes&&!(proto&&hostlessProtocol[proto])){rest=rest.substr(2);this.slashes=true}}if(!hostlessProtocol[proto]&&(slashes||proto&&!slashedProtocol[proto])){var hostEnd=-1;for(var i=0;i<hostEndingChars.length;i++){var hec=rest.indexOf(hostEndingChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}var auth,atSign;if(hostEnd===-1){atSign=rest.lastIndexOf("@")}else{atSign=rest.lastIndexOf("@",hostEnd)}if(atSign!==-1){auth=rest.slice(0,atSign);rest=rest.slice(atSign+1);this.auth=decodeURIComponent(auth)}hostEnd=-1;for(var i=0;i<nonHostChars.length;i++){var hec=rest.indexOf(nonHostChars[i]);if(hec!==-1&&(hostEnd===-1||hec<hostEnd))hostEnd=hec}if(hostEnd===-1)hostEnd=rest.length;this.host=rest.slice(0,hostEnd);rest=rest.slice(hostEnd);this.parseHost();this.hostname=this.hostname||"";var ipv6Hostname=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ipv6Hostname){var hostparts=this.hostname.split(/\./);for(var i=0,l=hostparts.length;i<l;i++){var part=hostparts[i];if(!part)continue;if(!part.match(hostnamePartPattern)){var newpart="";for(var j=0,k=part.length;j<k;j++){if(part.charCodeAt(j)>127){newpart+="x"}else{newpart+=part[j]}}if(!newpart.match(hostnamePartPattern)){var validParts=hostparts.slice(0,i);var notHost=hostparts.slice(i+1);var bit=part.match(hostnamePartStart);if(bit){validParts.push(bit[1]);notHost.unshift(bit[2])}if(notHost.length){rest="/"+notHost.join(".")+rest}this.hostname=validParts.join(".");break}}}}if(this.hostname.length>hostnameMaxLen){this.hostname=""}else{this.hostname=this.hostname.toLowerCase()}if(!ipv6Hostname){this.hostname=punycode.toASCII(this.hostname)}var p=this.port?":"+this.port:"";var h=this.hostname||"";this.host=h+p;this.href+=this.host;if(ipv6Hostname){this.hostname=this.hostname.substr(1,this.hostname.length-2);if(rest[0]!=="/"){rest="/"+rest}}}if(!unsafeProtocol[lowerProto]){for(var i=0,l=autoEscape.length;i<l;i++){var ae=autoEscape[i];if(rest.indexOf(ae)===-1)continue;var esc=encodeURIComponent(ae);if(esc===ae){esc=escape(ae)}rest=rest.split(ae).join(esc)}}var hash=rest.indexOf("#");if(hash!==-1){this.hash=rest.substr(hash);rest=rest.slice(0,hash)}var qm=rest.indexOf("?");if(qm!==-1){this.search=rest.substr(qm);this.query=rest.substr(qm+1);if(parseQueryString){this.query=querystring.parse(this.query)}rest=rest.slice(0,qm)}else if(parseQueryString){this.search="";this.query={}}if(rest)this.pathname=rest;if(slashedProtocol[lowerProto]&&this.hostname&&!this.pathname){this.pathname="/"}if(this.pathname||this.search){var p=this.pathname||"";var s=this.search||"";this.path=p+s}this.href=this.format();return this};function urlFormat(obj){if(util.isString(obj))obj=urlParse(obj);if(!(obj instanceof Url))return Url.prototype.format.call(obj);return obj.format()}Url.prototype.format=function(){var auth=this.auth||"";if(auth){auth=encodeURIComponent(auth);auth=auth.replace(/%3A/i,":");auth+="@"}var protocol=this.protocol||"",pathname=this.pathname||"",hash=this.hash||"",host=false,query="";if(this.host){host=auth+this.host}else if(this.hostname){host=auth+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]");if(this.port){host+=":"+this.port}}if(this.query&&util.isObject(this.query)&&Object.keys(this.query).length){query=querystring.stringify(this.query)}var search=this.search||query&&"?"+query||"";if(protocol&&protocol.substr(-1)!==":")protocol+=":";if(this.slashes||(!protocol||slashedProtocol[protocol])&&host!==false){host="//"+(host||"");if(pathname&&pathname.charAt(0)!=="/")pathname="/"+pathname}else if(!host){host=""}if(hash&&hash.charAt(0)!=="#")hash="#"+hash;if(search&&search.charAt(0)!=="?")search="?"+search;pathname=pathname.replace(/[?#]/g,(function(match){return encodeURIComponent(match)}));search=search.replace("#","%23");return protocol+host+pathname+search+hash};function urlResolve(source,relative){return urlParse(source,false,true).resolve(relative)}Url.prototype.resolve=function(relative){return this.resolveObject(urlParse(relative,false,true)).format()};function urlResolveObject(source,relative){if(!source)return relative;return urlParse(source,false,true).resolveObject(relative)}Url.prototype.resolveObject=function(relative){if(util.isString(relative)){var rel=new Url;rel.parse(relative,false,true);relative=rel}var result=new Url;var tkeys=Object.keys(this);for(var tk=0;tk<tkeys.length;tk++){var tkey=tkeys[tk];result[tkey]=this[tkey]}result.hash=relative.hash;if(relative.href===""){result.href=result.format();return result}if(relative.slashes&&!relative.protocol){var rkeys=Object.keys(relative);for(var rk=0;rk<rkeys.length;rk++){var rkey=rkeys[rk];if(rkey!=="protocol")result[rkey]=relative[rkey]}if(slashedProtocol[result.protocol]&&result.hostname&&!result.pathname){result.path=result.pathname="/"}result.href=result.format();return result}if(relative.protocol&&relative.protocol!==result.protocol){if(!slashedProtocol[relative.protocol]){var keys=Object.keys(relative);for(var v=0;v<keys.length;v++){var k=keys[v];result[k]=relative[k]}result.href=result.format();return result}result.protocol=relative.protocol;if(!relative.host&&!hostlessProtocol[relative.protocol]){var relPath=(relative.pathname||"").split("/");while(relPath.length&&!(relative.host=relPath.shift()));if(!relative.host)relative.host="";if(!relative.hostname)relative.hostname="";if(relPath[0]!=="")relPath.unshift("");if(relPath.length<2)relPath.unshift("");result.pathname=relPath.join("/")}else{result.pathname=relative.pathname}result.search=relative.search;result.query=relative.query;result.host=relative.host||"";result.auth=relative.auth;result.hostname=relative.hostname||relative.host;result.port=relative.port;if(result.pathname||result.search){var p=result.pathname||"";var s=result.search||"";result.path=p+s}result.slashes=result.slashes||relative.slashes;result.href=result.format();return result}var isSourceAbs=result.pathname&&result.pathname.charAt(0)==="/",isRelAbs=relative.host||relative.pathname&&relative.pathname.charAt(0)==="/",mustEndAbs=isRelAbs||isSourceAbs||result.host&&relative.pathname,removeAllDots=mustEndAbs,srcPath=result.pathname&&result.pathname.split("/")||[],relPath=relative.pathname&&relative.pathname.split("/")||[],psychotic=result.protocol&&!slashedProtocol[result.protocol];if(psychotic){result.hostname="";result.port=null;if(result.host){if(srcPath[0]==="")srcPath[0]=result.host;else srcPath.unshift(result.host)}result.host="";if(relative.protocol){relative.hostname=null;relative.port=null;if(relative.host){if(relPath[0]==="")relPath[0]=relative.host;else relPath.unshift(relative.host)}relative.host=null}mustEndAbs=mustEndAbs&&(relPath[0]===""||srcPath[0]==="")}if(isRelAbs){result.host=relative.host||relative.host===""?relative.host:result.host;result.hostname=relative.hostname||relative.hostname===""?relative.hostname:result.hostname;result.search=relative.search;result.query=relative.query;srcPath=relPath}else if(relPath.length){if(!srcPath)srcPath=[];srcPath.pop();srcPath=srcPath.concat(relPath);result.search=relative.search;result.query=relative.query}else if(!util.isNullOrUndefined(relative.search)){if(psychotic){result.hostname=result.host=srcPath.shift();var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}result.search=relative.search;result.query=relative.query;if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.href=result.format();return result}if(!srcPath.length){result.pathname=null;if(result.search){result.path="/"+result.search}else{result.path=null}result.href=result.format();return result}var last=srcPath.slice(-1)[0];var hasTrailingSlash=(result.host||relative.host||srcPath.length>1)&&(last==="."||last==="..")||last==="";var up=0;for(var i=srcPath.length;i>=0;i--){last=srcPath[i];if(last==="."){srcPath.splice(i,1)}else if(last===".."){srcPath.splice(i,1);up++}else if(up){srcPath.splice(i,1);up--}}if(!mustEndAbs&&!removeAllDots){for(;up--;up){srcPath.unshift("..")}}if(mustEndAbs&&srcPath[0]!==""&&(!srcPath[0]||srcPath[0].charAt(0)!=="/")){srcPath.unshift("")}if(hasTrailingSlash&&srcPath.join("/").substr(-1)!=="/"){srcPath.push("")}var isAbsolute=srcPath[0]===""||srcPath[0]&&srcPath[0].charAt(0)==="/";if(psychotic){result.hostname=result.host=isAbsolute?"":srcPath.length?srcPath.shift():"";var authInHost=result.host&&result.host.indexOf("@")>0?result.host.split("@"):false;if(authInHost){result.auth=authInHost.shift();result.host=result.hostname=authInHost.shift()}}mustEndAbs=mustEndAbs||result.host&&srcPath.length;if(mustEndAbs&&!isAbsolute){srcPath.unshift("")}if(!srcPath.length){result.pathname=null;result.path=null}else{result.pathname=srcPath.join("/")}if(!util.isNull(result.pathname)||!util.isNull(result.search)){result.path=(result.pathname?result.pathname:"")+(result.search?result.search:"")}result.auth=relative.auth||result.auth;result.slashes=result.slashes||relative.slashes;result.href=result.format();return result};Url.prototype.parseHost=function(){var host=this.host;var port=portPattern.exec(host);if(port){port=port[0];if(port!==":"){this.port=port.substr(1)}host=host.substr(0,host.length-port.length)}if(host)this.hostname=host}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_reporting_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20);var _node_modules_val_loader_dist_cjs_js_key_reporting_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_reporting_kbn_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__kbnBundles__.define("plugin/reporting/public",__webpack_require__,31)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__kbnPublicPath__["reporting"]},function(module,exports,__webpack_require__){"use strict";module.exports=str=>encodeURIComponent(str).replace(/[!'()*]/g,x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)},function(module,exports,__webpack_require__){"use strict";var token="%[a-f0-9]{2}";var singleMatcher=new RegExp(token,"gi");var multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(components,split){try{return decodeURIComponent(components.join(""))}catch(err){}if(components.length===1){return components}split=split||1;var left=components.slice(0,split);var right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch(err){var tokens=input.match(singleMatcher);for(var i=1;i<tokens.length;i++){input=decodeComponents(tokens,i).join("");tokens=input.match(singleMatcher)}return input}}function customDecodeURIComponent(input){var replaceMap={"%FE%FF":"��","%FF%FE":"��"};var match=multiMatcher.exec(input);while(match){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch(err){var result=decode(match[0]);if(result!==match[0]){replaceMap[match[0]]=result}}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";var entries=Object.keys(replaceMap);for(var i=0;i<entries.length;i++){var key=entries[i];input=input.replace(new RegExp(key,"g"),replaceMap[key])}return input}module.exports=function(encodedURI){if(typeof encodedURI!=="string"){throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`")}try{encodedURI=encodedURI.replace(/\+/g," ");return decodeURIComponent(encodedURI)}catch(err){return customDecodeURIComponent(encodedURI)}}},function(module,exports,__webpack_require__){"use strict";module.exports=(string,separator)=>{if(!(typeof string==="string"&&typeof separator==="string")){throw new TypeError("Expected the arguments to be of type `string`")}if(separator===""){return[string]}const separatorIndex=string.indexOf(separator);if(separatorIndex===-1){return[string]}return[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}},function(module,exports,__webpack_require__){(function(module,global){var __WEBPACK_AMD_DEFINE_RESULT__;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(root){var freeExports=true&&exports&&!exports.nodeType&&exports;var freeModule=true&&module&&!module.nodeType&&module;var freeGlobal=typeof global=="object"&&global;if(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal||freeGlobal.self===freeGlobal){root=freeGlobal}var punycode,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^\x20-\x7E]/,regexSeparators=/[\x2E\u3002\uFF0E\uFF61]/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode,key;function error(type){throw new RangeError(errors[type])}function map(array,fn){var length=array.length;var result=[];while(length--){result[length]=fn(array[length])}return result}function mapDomain(string,fn){var parts=string.split("@");var result="";if(parts.length>1){result=parts[0]+"@";string=parts[1]}string=string.replace(regexSeparators,".");var labels=string.split(".");var encoded=map(labels,fn).join(".");return result+encoded}function ucs2decode(string){var output=[],counter=0,length=string.length,value,extra;while(counter<length){value=string.charCodeAt(counter++);if(value>=55296&&value<=56319&&counter<length){extra=string.charCodeAt(counter++);if((extra&64512)==56320){output.push(((value&1023)<<10)+(extra&1023)+65536)}else{output.push(value);counter--}}else{output.push(value)}}return output}function ucs2encode(array){return map(array,(function(value){var output="";if(value>65535){value-=65536;output+=stringFromCharCode(value>>>10&1023|55296);value=56320|value&1023}output+=stringFromCharCode(value);return output})).join("")}function basicToDigit(codePoint){if(codePoint-48<10){return codePoint-22}if(codePoint-65<26){return codePoint-65}if(codePoint-97<26){return codePoint-97}return base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((flag!=0)<<5)}function adapt(delta,numPoints,firstTime){var k=0;delta=firstTime?floor(delta/damp):delta>>1;delta+=floor(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor(delta/baseMinusTMin)}return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var output=[],inputLength=input.length,out,i=0,n=initialN,bias=initialBias,basic,j,index,oldi,w,k,digit,t,baseMinusT;basic=input.lastIndexOf(delimiter);if(basic<0){basic=0}for(j=0;j<basic;++j){if(input.charCodeAt(j)>=128){error("not-basic")}output.push(input.charCodeAt(j))}for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;;k+=base){if(index>=inputLength){error("invalid-input")}digit=basicToDigit(input.charCodeAt(index++));if(digit>=base||digit>floor((maxInt-i)/w)){error("overflow")}i+=digit*w;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(digit<t){break}baseMinusT=base-t;if(w>floor(maxInt/baseMinusT)){error("overflow")}w*=baseMinusT}out=output.length+1;bias=adapt(i-oldi,out,oldi==0);if(floor(i/out)>maxInt-n){error("overflow")}n+=floor(i/out);i%=out;output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,output=[],inputLength,handledCPCountPlusOne,baseMinusT,qMinusT;input=ucs2decode(input);inputLength=input.length;n=initialN;delta=0;bias=initialBias;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<128){output.push(stringFromCharCode(currentValue))}}handledCPCount=basicLength=output.length;if(basicLength){output.push(delimiter)}while(handledCPCount<inputLength){for(m=maxInt,j=0;j<inputLength;++j){currentValue=input[j];if(currentValue>=n&&currentValue<m){m=currentValue}}handledCPCountPlusOne=handledCPCount+1;if(m-n>floor((maxInt-delta)/handledCPCountPlusOne)){error("overflow")}delta+=(m-n)*handledCPCountPlusOne;n=m;for(j=0;j<inputLength;++j){currentValue=input[j];if(currentValue<n&&++delta>maxInt){error("overflow")}if(currentValue==n){for(q=delta,k=base;;k+=base){t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias;if(q<t){break}qMinusT=q-t;baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0)));q=floor(qMinusT/baseMinusT)}output.push(stringFromCharCode(digitToBasic(q,0)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount}}++delta;++n}return output.join("")}function toUnicode(input){return mapDomain(input,(function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string}))}function toASCII(input){return mapDomain(input,(function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string}))}punycode={version:"1.4.1",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:toASCII,toUnicode:toUnicode};if(true){!(__WEBPACK_AMD_DEFINE_RESULT__=function(){return punycode}.call(exports,__webpack_require__,exports,module),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else{}})(this)}).call(this,__webpack_require__(25)(module),__webpack_require__(26))},function(module,exports){module.exports=function(module){if(!module.webpackPolyfill){module.deprecate=function(){};module.paths=[];if(!module.children)module.children=[];Object.defineProperty(module,"loaded",{enumerable:true,get:function(){return module.l}});Object.defineProperty(module,"id",{enumerable:true,get:function(){return module.i}});module.webpackPolyfill=1}return module}},function(module,exports){var g;g=function(){return this}();try{g=g||new Function("return this")()}catch(e){if(typeof window==="object")g=window}module.exports=g},function(module,exports,__webpack_require__){"use strict";module.exports={isString:function(arg){return typeof arg==="string"},isObject:function(arg){return typeof arg==="object"&&arg!==null},isNull:function(arg){return arg===null},isNullOrUndefined:function(arg){return arg==null}}},function(module,exports,__webpack_require__){"use strict";exports.decode=exports.parse=__webpack_require__(29);exports.encode=exports.stringify=__webpack_require__(30)},function(module,exports,__webpack_require__){"use strict";function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}module.exports=function(qs,sep,eq,options){sep=sep||"&";eq=eq||"=";var obj={};if(typeof qs!=="string"||qs.length===0){return obj}var regexp=/\+/g;qs=qs.split(sep);var maxKeys=1e3;if(options&&typeof options.maxKeys==="number"){maxKeys=options.maxKeys}var len=qs.length;if(maxKeys>0&&len>maxKeys){len=maxKeys}for(var i=0;i<len;++i){var x=qs[i].replace(regexp,"%20"),idx=x.indexOf(eq),kstr,vstr,k,v;if(idx>=0){kstr=x.substr(0,idx);vstr=x.substr(idx+1)}else{kstr=x;vstr=""}k=decodeURIComponent(kstr);v=decodeURIComponent(vstr);if(!hasOwnProperty(obj,k)){obj[k]=v}else if(isArray(obj[k])){obj[k].push(v)}else{obj[k]=[obj[k],v]}}return obj};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"}},function(module,exports,__webpack_require__){"use strict";var stringifyPrimitive=function(v){switch(typeof v){case"string":return v;case"boolean":return v?"true":"false";case"number":return isFinite(v)?v:"";default:return""}};module.exports=function(obj,sep,eq,name){sep=sep||"&";eq=eq||"=";if(obj===null){obj=undefined}if(typeof obj==="object"){return map(objectKeys(obj),(function(k){var ks=encodeURIComponent(stringifyPrimitive(k))+eq;if(isArray(obj[k])){return map(obj[k],(function(v){return ks+encodeURIComponent(stringifyPrimitive(v))})).join(sep)}else{return ks+encodeURIComponent(stringifyPrimitive(obj[k]))}})).join(sep)}if(!name)return"";return encodeURIComponent(stringifyPrimitive(name))+eq+encodeURIComponent(stringifyPrimitive(obj))};var isArray=Array.isArray||function(xs){return Object.prototype.toString.call(xs)==="[object Array]"};function map(xs,f){if(xs.map)return xs.map(f);var res=[];for(var i=0;i<xs.length;i++){res.push(f(xs[i],i))}return res}var objectKeys=Object.keys||function(obj){var res=[];for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))res.push(key)}return res}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));__webpack_require__.d(__webpack_exports__,"Plugin",(function(){return plugin_ReportingPublicPlugin}));__webpack_require__.d(__webpack_exports__,"jobCompletionNotifications",(function(){return job_completion_notifications_namespaceObject}));var job_completion_notifications_namespaceObject={};__webpack_require__.r(job_completion_notifications_namespaceObject);__webpack_require__.d(job_completion_notifications_namespaceObject,"add",(function(){return add}));__webpack_require__.d(job_completion_notifications_namespaceObject,"remove",(function(){return remove}));var external_kbnSharedDeps_KbnI18n_=__webpack_require__(3);var external_kbnSharedDeps_KbnI18nReact_=__webpack_require__(2);var external_kbnSharedDeps_React_=__webpack_require__(0);var external_kbnSharedDeps_React_default=__webpack_require__.n(external_kbnSharedDeps_React_);var external_kbnSharedDeps_ReactDom_=__webpack_require__(11);var external_kbnSharedDeps_ReactDom_default=__webpack_require__.n(external_kbnSharedDeps_ReactDom_);var external_kbnSharedDeps_Rxjs_=__webpack_require__(7);var external_kbnSharedDeps_RxjsOperators_=__webpack_require__(6);var public_=__webpack_require__(9);var home_public_=__webpack_require__(14);var durationToNumber=function durationToNumber(value){if(typeof value==="number"){return value}return value.asMilliseconds()};var byteSizeValueToNumber=function byteSizeValueToNumber(value){if(typeof value==="number"){return value}return value.getValueInBytes()};var JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY="xpack.reporting.jobCompletionNotifications";var API_BASE_URL="/api/reporting";var API_LIST_URL="".concat(API_BASE_URL,"/jobs");var API_BASE_GENERATE="".concat(API_BASE_URL,"/generate");var API_GENERATE_IMMEDIATE="".concat(API_BASE_URL,"/v1/generate/immediate/csv/saved-object");var REPORTING_MANAGEMENT_HOME="/app/management/insightsAndAlerting/reporting";var JOB_STATUS_FAILED="failed";var JOB_STATUS_COMPLETED="completed";var JOB_STATUS_WARNINGS="completed_with_warnings";var JobStatuses;(function(JobStatuses){JobStatuses["PENDING"]="pending";JobStatuses["PROCESSING"]="processing";JobStatuses["COMPLETED"]="completed";JobStatuses["FAILED"]="failed";JobStatuses["CANCELLED"]="cancelled";JobStatuses["WARNINGS"]="completed_with_warnings"})(JobStatuses||(JobStatuses={}));var PDF_JOB_TYPE="printable_pdf";var PNG_JOB_TYPE="PNG";var CSV_JOB_TYPE="csv";var CSV_FROM_SAVEDOBJECT_JOB_TYPE="csv_from_savedobject";var USES_HEADLESS_JOB_TYPES=[PDF_JOB_TYPE,PNG_JOB_TYPE];var CSV_REPORTING_ACTION="downloadCsvReport";var kibanaReact_public_=__webpack_require__(4);var external_kbnSharedDeps_ElasticEui_=__webpack_require__(1);var job_download_button_DownloadButton=function DownloadButton(_ref){var getUrl=_ref.getUrl,job=_ref.job;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{size:"s","data-test-subj":"downloadCompletedReportButton",href:getUrl(job.id),target:"_blank"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.downloadReportButtonLabel",defaultMessage:"Download report"}))};var report_link_ReportLink=function ReportLink(_ref){var getUrl=_ref.getUrl;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.reportLink.pickItUpFromPathDescription",defaultMessage:"Pick it up from {path}.",values:{path:external_kbnSharedDeps_React_default.a.createElement("a",{href:getUrl()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.reportLink.reportingSectionUrlLinkLabel",defaultMessage:"Management > Kibana > Reporting"}))}})};var job_success_getSuccessToast=function getSuccessToast(job,getReportLink,getDownloadLink){return{title:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.successfullyCreatedReportNotificationTitle",defaultMessage:"Created report for {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.jobtype,reportObjectTitle:job.title}})),color:"success",text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(report_link_ReportLink,{getUrl:getReportLink})),external_kbnSharedDeps_React_default.a.createElement(job_download_button_DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportSuccess"}};var job_failure_getFailureToast=function getFailureToast(errorText,job,getManagmenetLink){return{title:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.error.couldNotCreateReportTitle",defaultMessage:"Could not create report for {reportObjectType} '{reportObjectTitle}'.",values:{reportObjectType:job.jobtype,reportObjectTitle:job.title}})),text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{size:"m",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.publicNotifier.error.calloutTitle",{defaultMessage:"The reporting job failed"}),color:"danger",iconType:"alert"},errorText),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.error.checkManagement",defaultMessage:"More information is available at {path}.",values:{path:external_kbnSharedDeps_React_default.a.createElement("a",{href:getManagmenetLink()},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.error.reportingSectionUrlLinkLabel",defaultMessage:"Management > Kibana > Reporting"}))}})))),iconType:undefined,"data-test-subj":"completeReportFailure"}};var job_warning_formulas_getWarningFormulasToast=function getWarningFormulasToast(job,getReportLink,getDownloadLink){return{title:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.csvContainsFormulas.formulaReportTitle",defaultMessage:"Report may contain formulas {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.jobtype,reportObjectTitle:job.title}})),text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.csvContainsFormulas.formulaReportMessage",defaultMessage:"The report contains characters which spreadsheet applications can interpret as formulas."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(report_link_ReportLink,{getUrl:getReportLink})),external_kbnSharedDeps_React_default.a.createElement(job_download_button_DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportCsvFormulasWarning"}};var job_warning_max_size_getWarningMaxSizeToast=function getWarningMaxSizeToast(job,getReportLink,getDownloadLink){return{title:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.maxSizeReached.partialReportTitle",defaultMessage:"Created partial report for {reportObjectType} '{reportObjectTitle}'",values:{reportObjectType:job.jobtype,reportObjectTitle:job.title}})),text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.maxSizeReached.partialReportDescription",defaultMessage:"The report reached the max size and contains partial data."})),external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(report_link_ReportLink,{getUrl:getReportLink})),external_kbnSharedDeps_React_default.a.createElement(job_download_button_DownloadButton,{getUrl:getDownloadLink,job:job}))),"data-test-subj":"completeReportMaxSizeWarning"}};var general_error_getGeneralErrorToast=function getGeneralErrorToast(errorText,err){return{text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{title:errorText,color:"danger",iconType:"alert"},err.toString()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.publicNotifier.error.tryRefresh",defaultMessage:"Try refreshing the page."}))),iconType:undefined}};var external_kbnSharedDeps_Lodash_=__webpack_require__(5);var external_kbnSharedDeps_Lodash_default=__webpack_require__.n(external_kbnSharedDeps_Lodash_);var external_kbnSharedDeps_Moment_=__webpack_require__(10);var external_kbnSharedDeps_Moment_default=__webpack_require__.n(external_kbnSharedDeps_Moment_);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var poller_Poller=function(){function Poller(options){_classCallCheck(this,Poller);_defineProperty(this,"functionToPoll",void 0);_defineProperty(this,"successFunction",void 0);_defineProperty(this,"errorFunction",void 0);_defineProperty(this,"_isRunning",void 0);_defineProperty(this,"_timeoutId",void 0);_defineProperty(this,"pollFrequencyInMillis",void 0);_defineProperty(this,"trailing",void 0);_defineProperty(this,"continuePollingOnError",void 0);_defineProperty(this,"pollFrequencyErrorMultiplier",void 0);this.functionToPoll=options.functionToPoll;this.successFunction=options.successFunction||external_kbnSharedDeps_Lodash_default.a.noop;this.errorFunction=options.errorFunction||external_kbnSharedDeps_Lodash_default.a.noop;this.pollFrequencyInMillis=options.pollFrequencyInMillis;this.trailing=options.trailing||false;this.continuePollingOnError=options.continuePollingOnError||false;this.pollFrequencyErrorMultiplier=options.pollFrequencyErrorMultiplier||1;this._timeoutId=null;this._isRunning=false}_createClass(Poller,[{key:"getPollFrequency",value:function getPollFrequency(){return this.pollFrequencyInMillis}},{key:"_poll",value:function _poll(){var _this=this;return this.functionToPoll().then(this.successFunction).then((function(){if(!_this._isRunning){return}_this._timeoutId=setTimeout(_this._poll.bind(_this),_this.pollFrequencyInMillis)})).catch((function(e){_this.errorFunction(e);if(!_this._isRunning){return}if(_this.continuePollingOnError){_this._timeoutId=setTimeout(_this._poll.bind(_this),_this.pollFrequencyInMillis*_this.pollFrequencyErrorMultiplier)}else{_this.stop()}}))}},{key:"start",value:function start(){if(this._isRunning){return}this._isRunning=true;if(this.trailing){this._timeoutId=setTimeout(this._poll.bind(this),this.pollFrequencyInMillis)}else{this._poll()}}},{key:"stop",value:function stop(){if(!this._isRunning){return}this._isRunning=false;if(this._timeoutId){clearTimeout(this._timeoutId)}this._timeoutId=null}},{key:"isRunning",value:function isRunning(){return this._isRunning}}]);return Poller}();var checkLicense=function checkLicense(checkResults){switch(checkResults.state){case"valid":{return{showLinks:true,enableLinks:true,message:""}}case"invalid":{return{showLinks:false,enableLinks:false,message:"Your license does not support Reporting. Please upgrade your license."}}case"unavailable":{return{showLinks:true,enableLinks:false,message:"You cannot use Reporting because license information is not available at this time."}}case"expired":{return{showLinks:true,enableLinks:false,message:"You cannot use Reporting because your license has expired."}}default:{return{showLinks:true,enableLinks:true,message:""}}}};function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_error_button_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_error_button_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_error_button_createClass(Constructor,protoProps,staticProps){if(protoProps)report_error_button_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_error_button_defineProperties(Constructor,staticProps);return Constructor}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function report_error_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var report_error_button_ReportErrorButtonUi=function(_Component){_inherits(ReportErrorButtonUi,_Component);var _super=_createSuper(ReportErrorButtonUi);function ReportErrorButtonUi(props){var _this;report_error_button_classCallCheck(this,ReportErrorButtonUi);_this=_super.call(this,props);report_error_button_defineProperty(_assertThisInitialized(_this),"mounted",void 0);report_error_button_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState((function(prevState){return{isPopoverOpen:!prevState.isPopoverOpen}}));if(!_this.state.error){_this.loadError()}}));report_error_button_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));report_error_button_defineProperty(_assertThisInitialized(_this),"loadError",_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _this$props,record,apiClient,intl,reportContent;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,record=_this$props.record,apiClient=_this$props.apiClient,intl=_this$props.intl;_this.setState({isLoading:true});_context.prev=2;_context.next=5;return apiClient.getContent(record.id);case 5:reportContent=_context.sent;if(_this.mounted){_this.setState({isLoading:false,error:reportContent.content})}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);if(_this.mounted){_this.setState({isLoading:false,calloutTitle:intl.formatMessage({id:"xpack.reporting.errorButton.unableToFetchReportContentTitle",defaultMessage:"Unable to fetch report content"}),error:_context.t0.message})}case 12:case"end":return _context.stop()}}}),_callee,null,[[2,9]])}))));_this.state={isLoading:false,isPopoverOpen:false,calloutTitle:props.intl.formatMessage({id:"xpack.reporting.errorButton.unableToGenerateReportTitle",defaultMessage:"Unable to generate report"})};return _this}report_error_button_createClass(ReportErrorButtonUi,[{key:"render",value:function render(){var _this$props2=this.props,record=_this$props2.record,intl=_this$props2.intl;if(record.status!==JobStatuses.FAILED){return null}var button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.togglePopover,iconType:"alert",color:"danger","aria-label":intl.formatMessage({id:"xpack.reporting.errorButton.showReportErrorAriaLabel",defaultMessage:"Show report error"})});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPopover"],{id:"popover",button:button,isOpen:this.state.isPopoverOpen,closePopover:this.closePopover,anchorPosition:"downRight"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",title:this.state.calloutTitle},external_kbnSharedDeps_React_default.a.createElement("p",null,this.state.error)))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true}}]);return ReportErrorButtonUi}(external_kbnSharedDeps_React_["Component"]);var ReportErrorButton=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(report_error_button_ReportErrorButtonUi);function report_delete_button_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_delete_button_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_delete_button_createClass(Constructor,protoProps,staticProps){if(protoProps)report_delete_button_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_delete_button_defineProperties(Constructor,staticProps);return Constructor}function report_delete_button_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)report_delete_button_setPrototypeOf(subClass,superClass)}function report_delete_button_setPrototypeOf(o,p){report_delete_button_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return report_delete_button_setPrototypeOf(o,p)}function report_delete_button_createSuper(Derived){var hasNativeReflectConstruct=report_delete_button_isNativeReflectConstruct();return function _createSuperInternal(){var Super=report_delete_button_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=report_delete_button_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return report_delete_button_possibleConstructorReturn(this,result)}}function report_delete_button_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return report_delete_button_assertThisInitialized(self)}function report_delete_button_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function report_delete_button_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function report_delete_button_getPrototypeOf(o){report_delete_button_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return report_delete_button_getPrototypeOf(o)}var report_delete_button_ReportDeleteButton=function(_PureComponent){report_delete_button_inherits(ReportDeleteButton,_PureComponent);var _super=report_delete_button_createSuper(ReportDeleteButton);function ReportDeleteButton(props){var _this;report_delete_button_classCallCheck(this,ReportDeleteButton);_this=_super.call(this,props);_this.state={showConfirm:false};return _this}report_delete_button_createClass(ReportDeleteButton,[{key:"hideConfirm",value:function hideConfirm(){this.setState({showConfirm:false})}},{key:"showConfirm",value:function showConfirm(){this.setState({showConfirm:true})}},{key:"renderConfirm",value:function renderConfirm(){var _this2=this;var _this$props=this.props,intl=_this$props.intl,jobsToDelete=_this$props.jobsToDelete;var title=jobsToDelete.length>1?intl.formatMessage({id:"xpack.reporting.listing.table.deleteNumConfirmTitle",defaultMessage:"Delete {num} reports?"},{num:jobsToDelete.length}):intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmTitle",defaultMessage:'Delete the "{name}" report?'},{name:jobsToDelete[0].object_title});var message=intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmMessage",defaultMessage:"You can't recover deleted reports."});var confirmButtonText=intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfirmButton",defaultMessage:"Delete"});var cancelButtonText=intl.formatMessage({id:"xpack.reporting.listing.table.deleteCancelButton",defaultMessage:"Cancel"});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiConfirmModal"],{title:title,onCancel:function onCancel(){return _this2.hideConfirm()},onConfirm:function onConfirm(){return _this2.props.performDelete()},confirmButtonText:confirmButtonText,cancelButtonText:cancelButtonText,defaultFocusedButton:"confirm",buttonColor:"danger"},message))}},{key:"render",value:function render(){var _this3=this;var _this$props2=this.props,jobsToDelete=_this$props2.jobsToDelete,intl=_this$props2.intl;if(jobsToDelete.length===0)return null;return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{onClick:function onClick(){return _this3.showConfirm()},iconType:"trash",color:"danger","data-test-subj":"deleteReportButton"},intl.formatMessage({id:"xpack.reporting.listing.table.deleteReportButton",defaultMessage:"Delete ({num})"},{num:jobsToDelete.length})),this.state.showConfirm?this.renderConfirm():null)}}]);return ReportDeleteButton}(external_kbnSharedDeps_React_["PureComponent"]);var report_download_button_ReportDownloadButton=function ReportDownloadButton(props){var record=props.record,apiClient=props.apiClient,intl=props.intl;if(record.status!==JobStatuses.COMPLETED&&record.status!==JobStatuses.WARNINGS){return null}var button=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:function onClick(){return apiClient.downloadReport(record.id)},iconType:"importAction","aria-label":intl.formatMessage({id:"xpack.reporting.listing.table.downloadReportAriaLabel",defaultMessage:"Download report"})});if(record.csv_contains_formulas){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.csvContainsFormulas",defaultMessage:"Your CSV contains characters which spreadsheet applications can interpret as formulas."})},button)}if(record.max_size_reached){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.maxSizeReachedTooltip",defaultMessage:"Max size reached, contains partial data."})},button)}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:intl.formatMessage({id:"xpack.reporting.listing.table.downloadReport",defaultMessage:"Download report"})},button)};function report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function report_info_button_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){report_info_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_info_button_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_info_button_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_info_button_createClass(Constructor,protoProps,staticProps){if(protoProps)report_info_button_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_info_button_defineProperties(Constructor,staticProps);return Constructor}function report_info_button_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)report_info_button_setPrototypeOf(subClass,superClass)}function report_info_button_setPrototypeOf(o,p){report_info_button_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return report_info_button_setPrototypeOf(o,p)}function report_info_button_createSuper(Derived){var hasNativeReflectConstruct=report_info_button_isNativeReflectConstruct();return function _createSuperInternal(){var Super=report_info_button_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=report_info_button_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return report_info_button_possibleConstructorReturn(this,result)}}function report_info_button_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return report_info_button_assertThisInitialized(self)}function report_info_button_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function report_info_button_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function report_info_button_getPrototypeOf(o){report_info_button_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return report_info_button_getPrototypeOf(o)}function report_info_button_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var NA="n/a";var UNKNOWN="unknown";var report_info_button_getDimensions=function getDimensions(info){var defaultDimensions={width:null,height:null};var _get=Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.layout.dimensions",defaultDimensions),width=_get.width,height=_get.height;if(width&&height){return"Width: ".concat(width," x Height: ").concat(height)}return NA};var report_info_button_ReportInfoButton=function(_Component){report_info_button_inherits(ReportInfoButton,_Component);var _super=report_info_button_createSuper(ReportInfoButton);function ReportInfoButton(props){var _this;report_info_button_classCallCheck(this,ReportInfoButton);_this=_super.call(this,props);report_info_button_defineProperty(report_info_button_assertThisInitialized(_this),"mounted",void 0);report_info_button_defineProperty(report_info_button_assertThisInitialized(_this),"loadInfo",report_info_button_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var info;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({isLoading:true});_context.prev=1;_context.next=4;return _this.props.apiClient.getInfo(_this.props.jobId);case 4:info=_context.sent;if(_this.mounted){_this.setState({isLoading:false,info:info})}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context["catch"](1);if(_this.mounted){_this.setState({isLoading:false,calloutTitle:"Unable to fetch report info",info:null,error:_context.t0})}case 11:case"end":return _context.stop()}}}),_callee,null,[[1,8]])}))));report_info_button_defineProperty(report_info_button_assertThisInitialized(_this),"closeFlyout",(function(){_this.setState({isFlyoutVisible:false,info:null})}));report_info_button_defineProperty(report_info_button_assertThisInitialized(_this),"showFlyout",(function(){_this.setState({isFlyoutVisible:true});if(!_this.state.info){_this.loadInfo()}}));_this.state={isLoading:false,isFlyoutVisible:false,calloutTitle:"Job Info",info:null,error:null};_this.closeFlyout=_this.closeFlyout.bind(report_info_button_assertThisInitialized(_this));_this.showFlyout=_this.showFlyout.bind(report_info_button_assertThisInitialized(_this));return _this}report_info_button_createClass(ReportInfoButton,[{key:"renderInfo",value:function renderInfo(){var _this$state=this.state,info=_this$state.info,err=_this$state.error;if(err){return err.message}if(!info){return null}var jobType=info.jobtype||NA;var attempts=info.attempts?info.attempts.toString():NA;var maxAttempts=info.max_attempts?info.max_attempts.toString():NA;var priority=info.priority?info.priority.toString():NA;var timeout=info.timeout?info.timeout.toString():NA;var warnings=info.output&&info.output.warnings?info.output.warnings.join(","):null;var jobInfoDateTimes=[{title:"Created By",description:info.created_by||NA},{title:"Created At",description:info.created_at||NA},{title:"Started At",description:info.started_at||NA},{title:"Completed At",description:info.completed_at||NA},{title:"Processed By",description:info.kibana_name&&info.kibana_id?"".concat(info.kibana_name," (").concat(info.kibana_id,")"):UNKNOWN},{title:"Browser Timezone",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.browserTimezone")||NA}];var jobInfoPayload=[{title:"Title",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"payload.title")||NA},{title:"Layout",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"meta.layout")||NA},{title:"Dimensions",description:report_info_button_getDimensions(info)},{title:"Job Type",description:jobType},{title:"Content Type",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"output.content_type")||NA},{title:"Size in Bytes",description:Object(external_kbnSharedDeps_Lodash_["get"])(info,"output.size")||NA}];var jobInfoStatus=[{title:"Attempts",description:attempts},{title:"Max Attempts",description:maxAttempts},{title:"Priority",description:priority},{title:"Timeout",description:timeout},{title:"Status",description:info.status||NA},{title:"Browser Type",description:USES_HEADLESS_JOB_TYPES.includes(jobType)?info.browser_type||UNKNOWN:NA}];if(warnings){jobInfoStatus.push({title:"Errors",description:warnings})}var jobInfoParts={datetimes:jobInfoDateTimes,payload:jobInfoPayload,status:jobInfoStatus};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.datetimes,type:"column",align:"center",compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.payload,type:"column",align:"center",compressed:true}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiDescriptionList"],{listItems:jobInfoParts.status,type:"column",align:"center",compressed:true}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true}},{key:"render",value:function render(){var flyout;if(this.state.isFlyoutVisible){flyout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPortal"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{ownFocus:true,onClose:this.closeFlyout,size:"s","aria-labelledby":"flyoutTitle","data-test-subj":"reportInfoFlyout"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",{id:"flyoutTitle"},this.state.calloutTitle))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],null,this.renderInfo()))))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonIcon"],{onClick:this.showFlyout,iconType:"iInCircle",color:"primary","data-test-subj":"reportInfoButton","aria-label":"Show report info"}),flyout)}}]);return ReportInfoButton}(external_kbnSharedDeps_React_["Component"]);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach((function(key){report_diagnostic_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function report_diagnostic_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}var statuses;(function(statuses){statuses["configStatus"]="configStatus";statuses["chromeStatus"]="chromeStatus";statuses["screenshotStatus"]="screenshotStatus"})(statuses||(statuses={}));var initialState={[statuses.configStatus]:"incomplete",[statuses.chromeStatus]:"incomplete",[statuses.screenshotStatus]:"incomplete",isFlyoutVisible:false,help:[],logs:"",isBusy:false,success:true};var report_diagnostic_ReportDiagnostic=function ReportDiagnostic(_ref){var apiClient=_ref.apiClient;var _useState=Object(external_kbnSharedDeps_React_["useState"])(initialState),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setStateBase=_useState2[1];var setState=function setState(s){return setStateBase(_objectSpread(_objectSpread({},state),s))};var configStatus=state.configStatus,isBusy=state.isBusy,screenshotStatus=state.screenshotStatus,chromeStatus=state.chromeStatus,isFlyoutVisible=state.isFlyoutVisible,help=state.help,logs=state.logs,success=state.success;var closeFlyout=function closeFlyout(){return setState(_objectSpread(_objectSpread({},initialState),{},{isFlyoutVisible:false}))};var showFlyout=function showFlyout(){return setState({isFlyoutVisible:true})};var apiWrapper=function apiWrapper(apiMethod,statusProp){return function(){setState({isBusy:true,[statusProp]:"incomplete"});apiMethod().then((function(response){setState({isBusy:false,help:response.help,logs:response.logs,success:response.success,[statusProp]:response.success?"complete":"danger"})})).catch((function(error){setState({isBusy:false,help:[external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticApiCallFailure",{defaultMessage:"There was a problem running the diagnostic: {error}",values:{error:error}})],logs:"".concat(error.message),success:false,[statusProp]:"danger"})}))}};var steps=[{title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticConfigTitle",{defaultMessage:"Verify Kibana configuration"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticConfigMessage",defaultMessage:"Ensure your Kibana configuration is properly set up for reports."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||configStatus==="complete",isLoading:isBusy&&configStatus==="incomplete",onClick:apiWrapper(apiClient.verifyConfig,statuses.configStatus),iconType:configStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticConfigButton",defaultMessage:"Verify configuration"}))),status:!success&&configStatus!=="complete"?"danger":configStatus}];if(configStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticBrowserTitle",{defaultMessage:"Check browser"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticBrowserMessage",defaultMessage:"Reporting uses a headless browser to generate PDF and PNGs. Validate that the browser can launch successfully."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||chromeStatus==="complete",onClick:apiWrapper(apiClient.verifyBrowser,statuses.chromeStatus),isLoading:isBusy&&chromeStatus==="incomplete",iconType:chromeStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticBrowserButton",defaultMessage:"Check browser"}))),status:!success&&chromeStatus!=="complete"?"danger":chromeStatus})}if(chromeStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticScreenshotTitle",{defaultMessage:"Check screen capture"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticScreenshotMessage",defaultMessage:"Ensure that the headless browser can capture a screenshot of a page."}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isBusy||screenshotStatus==="complete",onClick:apiWrapper(apiClient.verifyScreenCapture,statuses.screenshotStatus),isLoading:isBusy&&screenshotStatus==="incomplete",iconType:screenshotStatus==="complete"?"check":undefined},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticScreenshotButton",defaultMessage:"Capture screenshot"}))),status:!success&&screenshotStatus!=="complete"?"danger":screenshotStatus})}if(screenshotStatus==="complete"){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticSuccessTitle",{defaultMessage:"All set!"}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticSuccessMessage",defaultMessage:"Everything looks good for reporting to function."})),status:!success?"danger":screenshotStatus})}if(!success){steps.push({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.listing.diagnosticFailureTitle",{defaultMessage:"Something isn't working properly."}),children:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,help.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCallOut"],{color:"danger",iconType:"alert"},external_kbnSharedDeps_React_default.a.createElement("p",null,help.join("\n")))):null,logs.length?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticFailureDescription",defaultMessage:"Here are some details about the issue:"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCodeBlock"],null,logs)):null),status:"danger"})}var flyout;if(isFlyoutVisible){flyout=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyout"],{onClose:closeFlyout,"aria-labelledby":"reportingHelperTitle",size:"m"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_kbnSharedDeps_React_default.a.createElement("h2",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticTitle",defaultMessage:"Reporting Diagnostics"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticDescription",defaultMessage:"Run diagnostics to automatically troubleshoot common reporting problems."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlyoutBody"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSteps"],{steps:steps})))}return external_kbnSharedDeps_React_default.a.createElement("div",null,flyout,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",flush:"left",onClick:showFlyout},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.diagnosticButton",defaultMessage:"Run reporting diagnostics"})))};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=report_listing_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function report_listing_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return report_listing_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return report_listing_arrayLikeToArray(o,minLen)}function report_listing_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function report_listing_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){report_listing_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function report_listing_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function report_listing_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){report_listing_ownKeys(Object(source),true).forEach((function(key){report_listing_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{report_listing_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function report_listing_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function report_listing_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function report_listing_createClass(Constructor,protoProps,staticProps){if(protoProps)report_listing_defineProperties(Constructor.prototype,protoProps);if(staticProps)report_listing_defineProperties(Constructor,staticProps);return Constructor}function report_listing_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)report_listing_setPrototypeOf(subClass,superClass)}function report_listing_setPrototypeOf(o,p){report_listing_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return report_listing_setPrototypeOf(o,p)}function report_listing_createSuper(Derived){var hasNativeReflectConstruct=report_listing_isNativeReflectConstruct();return function _createSuperInternal(){var Super=report_listing_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=report_listing_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return report_listing_possibleConstructorReturn(this,result)}}function report_listing_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return report_listing_assertThisInitialized(self)}function report_listing_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function report_listing_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function report_listing_getPrototypeOf(o){report_listing_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return report_listing_getPrototypeOf(o)}function report_listing_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var jobStatusLabelsMap=new Map([[JobStatuses.PENDING,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.pendingText",{defaultMessage:"Pending"})],[JobStatuses.PROCESSING,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.processingText",{defaultMessage:"Processing"})],[JobStatuses.COMPLETED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.completedText",{defaultMessage:"Completed"})],[JobStatuses.WARNINGS,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.warningText",{defaultMessage:"Completed with warnings"})],[JobStatuses.FAILED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.failedText",{defaultMessage:"Failed"})],[JobStatuses.CANCELLED,external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.jobStatuses.cancelledText",{defaultMessage:"Cancelled"})]]);var report_listing_ReportListingUi=function(_Component){report_listing_inherits(ReportListingUi,_Component);var _super=report_listing_createSuper(ReportListingUi);function ReportListingUi(props){var _this;report_listing_classCallCheck(this,ReportListingUi);_this=_super.call(this,props);report_listing_defineProperty(report_listing_assertThisInitialized(_this),"isInitialJobsFetch",void 0);report_listing_defineProperty(report_listing_assertThisInitialized(_this),"licenseSubscription",void 0);report_listing_defineProperty(report_listing_assertThisInitialized(_this),"mounted",void 0);report_listing_defineProperty(report_listing_assertThisInitialized(_this),"poller",void 0);report_listing_defineProperty(report_listing_assertThisInitialized(_this),"licenseHandler",(function(license){var _checkLicense=checkLicense(license.check("reporting","basic")),enableLinks=_checkLicense.enableLinks,showLinks=_checkLicense.showLinks,badLicenseMessage=_checkLicense.message;_this.setState({enableLinks:enableLinks,showLinks:showLinks,badLicenseMessage:badLicenseMessage})}));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"onSelectionChange",(function(jobs){_this.setState((function(current){return report_listing_objectSpread(report_listing_objectSpread({},current),{},{selectedJobs:jobs})}))}));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"removeRecord",(function(record){var jobs=_this.state.jobs;var filtered=jobs.filter((function(j){return j.id!==record.id}));_this.setState((function(current){return report_listing_objectSpread(report_listing_objectSpread({},current),{},{jobs:filtered})}))}));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"renderDeleteButton",(function(){var selectedJobs=_this.state.selectedJobs;if(selectedJobs.length===0)return undefined;var performDelete=function(){var _ref=report_listing_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _iterator,_step,record;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_iterator=_createForOfIteratorHelper(selectedJobs);_context.prev=1;_iterator.s();case 3:if((_step=_iterator.n()).done){_context.next=18;break}record=_step.value;_context.prev=5;_context.next=8;return _this.props.apiClient.deleteReport(record.id);case 8:_this.removeRecord(record);_this.props.toasts.addSuccess(_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteConfim",defaultMessage:"The {reportTitle} report was deleted"},{reportTitle:record.object_title}));_context.next=16;break;case 12:_context.prev=12;_context.t0=_context["catch"](5);_this.props.toasts.addDanger(_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.deleteFailedErrorMessage",defaultMessage:"The report was not deleted: {error}"},{error:_context.t0}));throw _context.t0;case 16:_context.next=3;break;case 18:_context.next=23;break;case 20:_context.prev=20;_context.t1=_context["catch"](1);_iterator.e(_context.t1);case 23:_context.prev=23;_iterator.f();return _context.finish(23);case 26:_this.setState((function(){return{page:0}}),_this.fetchJobs);case 27:case"end":return _context.stop()}}}),_callee,null,[[1,20,23,26],[5,12]])})));return function performDelete(){return _ref.apply(this,arguments)}}();return external_kbnSharedDeps_React_default.a.createElement(report_delete_button_ReportDeleteButton,_extends({jobsToDelete:selectedJobs,performDelete:performDelete},_this.props))}));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"onTableChange",(function(_ref2){var page=_ref2.page;var pageIndex=page.index;_this.setState((function(){return{page:pageIndex}}),_this.fetchJobs)}));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"fetchJobs",report_listing_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var jobs,total;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(_this.isInitialJobsFetch){_this.setState((function(){return{isLoading:true}}))}_context2.prev=1;_context2.next=4;return _this.props.apiClient.list(_this.state.page);case 4:jobs=_context2.sent;_context2.next=7;return _this.props.apiClient.total();case 7:total=_context2.sent;_this.isInitialJobsFetch=false;_context2.next=20;break;case 11:_context2.prev=11;_context2.t0=_context2["catch"](1);if(_this.licenseAllowsToShowThisPage()){_context2.next=17;break}_this.props.toasts.addDanger(_this.state.badLicenseMessage);_this.props.redirect("management");return _context2.abrupt("return");case 17:if(_context2.t0.message==="Failed to fetch"){_this.props.toasts.addDanger(_context2.t0.message||_this.props.intl.formatMessage({id:"xpack.reporting.listing.table.requestFailedErrorMessage",defaultMessage:"Request failed"}))}if(_this.mounted){_this.setState((function(){return{isLoading:false,jobs:[],total:0}}))}return _context2.abrupt("return");case 20:if(_this.mounted){_this.setState((function(){return{isLoading:false,total:total,jobs:jobs.map((function(job){var source=job._source;return{id:job._id,type:source.jobtype,object_type:source.payload.objectType,object_title:source.payload.title,created_by:source.created_by,created_at:source.created_at,started_at:source.started_at,completed_at:source.completed_at,status:source.status,statusLabel:jobStatusLabelsMap.get(source.status)||source.status,max_size_reached:source.output?source.output.max_size_reached:false,attempts:source.attempts,max_attempts:source.max_attempts,csv_contains_formulas:Object(external_kbnSharedDeps_Lodash_["get"])(source,"output.csv_contains_formulas"),warnings:source.output?source.output.warnings:undefined}}))}}))}case 21:case"end":return _context2.stop()}}}),_callee2,null,[[1,11]])}))));report_listing_defineProperty(report_listing_assertThisInitialized(_this),"licenseAllowsToShowThisPage",(function(){return _this.state.showLinks&&_this.state.enableLinks}));_this.state={page:0,total:0,jobs:[],selectedJobs:[],isLoading:false,showLinks:false,enableLinks:false,badLicenseMessage:""};_this.isInitialJobsFetch=true;return _this}report_listing_createClass(ReportListingUi,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center",className:"euiPageBody--restrictWidth-default"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTitle"],null,external_kbnSharedDeps_React_default.a.createElement("h1",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.reportstitle",defaultMessage:"Reports"}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{color:"subdued",size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.reports.subtitle",defaultMessage:"Get reports generated in Kibana applications."}))))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderTable()),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",direction:"rowReverse"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_kbnSharedDeps_React_default.a.createElement(report_diagnostic_ReportDiagnostic,{apiClient:this.props.apiClient}))))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false;this.poller.stop();if(this.licenseSubscription){this.licenseSubscription.unsubscribe()}}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.mounted=true;var _this$props=this.props,pollConfig=_this$props.pollConfig,license$=_this$props.license$;var pollFrequencyInMillis=durationToNumber(pollConfig.jobsRefresh.interval);this.poller=new poller_Poller({functionToPoll:function functionToPoll(){return _this2.fetchJobs()},pollFrequencyInMillis:pollFrequencyInMillis,trailing:false,continuePollingOnError:true,pollFrequencyErrorMultiplier:pollConfig.jobsRefresh.intervalErrorMultiplier});this.poller.start();this.licenseSubscription=license$.subscribe(this.licenseHandler)}},{key:"formatDate",value:function formatDate(timestamp){try{return external_kbnSharedDeps_Moment_default()(timestamp).format("YYYY-MM-DD @ hh:mm A")}catch(error){return timestamp}}},{key:"renderTable",value:function renderTable(){var _this3=this;var intl=this.props.intl;var tableColumns=[{field:"object_title",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.reportTitle",defaultMessage:"Report"}),render:function render(objectTitle,record){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,objectTitle),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},record.object_type)))}},{field:"created_at",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.createdAtTitle",defaultMessage:"Created at"}),render:function render(createdAt,record){if(record.created_by){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement("div",null,_this3.formatDate(createdAt)),external_kbnSharedDeps_React_default.a.createElement("span",null,record.created_by))}return _this3.formatDate(createdAt)}},{field:"status",name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.statusTitle",defaultMessage:"Status"}),render:function render(status,record){if(status==="pending"){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.pendingStatusReachedText",defaultMessage:"Pending - waiting for job to be processed"}))}var maxSizeReached;if(record.max_size_reached){maxSizeReached=external_kbnSharedDeps_React_default.a.createElement("span",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.maxSizeReachedText",defaultMessage:" - Max size reached"}))}var warnings;if(record.warnings){warnings=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.warningsText",defaultMessage:"Errors occurred: see job info for details."})))}var statusTimestamp;if(status===JobStatuses.PROCESSING&&record.started_at){statusTimestamp=_this3.formatDate(record.started_at)}else if(record.completed_at&&[JobStatuses.COMPLETED,JobStatuses.FAILED,JobStatuses.WARNINGS].includes(status)){statusTimestamp=_this3.formatDate(record.completed_at)}var statusLabel=jobStatusLabelsMap.get(status)||status;if(status===JobStatuses.PROCESSING){statusLabel=statusLabel+" (attempt ".concat(record.attempts," of ").concat(record.max_attempts,")")}if(statusTimestamp){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.listing.tableValue.statusDetail.statusTimestampText",defaultMessage:"{statusLabel} at {statusTimestamp}",values:{statusLabel:statusLabel,statusTimestamp:external_kbnSharedDeps_React_default.a.createElement("span",{className:"eui-textNoWrap"},statusTimestamp)}}),maxSizeReached,warnings)}return external_kbnSharedDeps_React_default.a.createElement("div",null,statusLabel,maxSizeReached)}},{name:intl.formatMessage({id:"xpack.reporting.listing.tableColumns.actionsTitle",defaultMessage:"Actions"}),actions:[{render:function render(record){return external_kbnSharedDeps_React_default.a.createElement("div",null,external_kbnSharedDeps_React_default.a.createElement(report_download_button_ReportDownloadButton,_extends({},_this3.props,{record:record})),external_kbnSharedDeps_React_default.a.createElement(ReportErrorButton,_extends({},_this3.props,{record:record})),external_kbnSharedDeps_React_default.a.createElement(report_info_button_ReportInfoButton,_extends({},_this3.props,{jobId:record.id})))}}]}];var pagination={pageIndex:this.state.page,pageSize:10,totalItemCount:this.state.total,hidePerPageOptions:true};var selection={itemId:"id",onSelectionChange:this.onSelectionChange};return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiBasicTable"],{itemId:"id",items:this.state.jobs,loading:this.state.isLoading,columns:tableColumns,noItemsMessage:this.state.isLoading?intl.formatMessage({id:"xpack.reporting.listing.table.loadingReportsDescription",defaultMessage:"Loading reports"}):intl.formatMessage({id:"xpack.reporting.listing.table.noCreatedReportsDescription",defaultMessage:"No reports have been created"}),pagination:pagination,selection:selection,isSelectable:true,onChange:this.onTableChange,"data-test-subj":"reportJobListing"}),this.state.selectedJobs.length>0?this.renderDeleteButton():null)}}]);return ReportListingUi}(external_kbnSharedDeps_React_["Component"]);var ReportListing=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(report_listing_ReportListingUi);var query_string=__webpack_require__(15);var rison=__webpack_require__(12);var rison_default=__webpack_require__.n(rison);var job_completion_notifications_set=function set(jobs){sessionStorage.setItem(JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY,JSON.stringify(jobs))};var job_completion_notifications_getAll=function getAll(){var sessionValue=sessionStorage.getItem(JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY);return sessionValue?JSON.parse(sessionValue):[]};var add=function add(jobId){var jobs=job_completion_notifications_getAll();jobs.push(jobId);job_completion_notifications_set(jobs)};var remove=function remove(jobId){var jobs=job_completion_notifications_getAll();var index=jobs.indexOf(jobId);if(!index){throw new Error("Unable to find job to remove it")}jobs.splice(index,1);job_completion_notifications_set(jobs)};function reporting_api_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function reporting_api_client_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){reporting_api_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){reporting_api_client_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function reporting_api_client_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporting_api_client_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporting_api_client_createClass(Constructor,protoProps,staticProps){if(protoProps)reporting_api_client_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporting_api_client_defineProperties(Constructor,staticProps);return Constructor}function reporting_api_client_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporting_api_client_ReportingAPIClient=function(){function ReportingAPIClient(http){var _this=this;reporting_api_client_classCallCheck(this,ReportingAPIClient);reporting_api_client_defineProperty(this,"http",void 0);reporting_api_client_defineProperty(this,"list",(function(){var page=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var jobIds=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var query={page:page};if(jobIds.length>0){query.ids=jobIds.slice(0,10).join(",")}return _this.http.get("".concat(API_LIST_URL,"/list"),{query:query,asSystemRequest:true})}));reporting_api_client_defineProperty(this,"findForJobIds",(function(jobIds){return _this.http.fetch("".concat(API_LIST_URL,"/list"),{query:{page:0,ids:jobIds.join(",")},method:"GET"})}));reporting_api_client_defineProperty(this,"getReportingJobPath",(function(exportType,jobParams){var params=Object(query_string["stringify"])({jobParams:rison_default.a.encode(jobParams)});return"".concat(_this.http.basePath.prepend(API_BASE_GENERATE),"/").concat(exportType,"?").concat(params)}));reporting_api_client_defineProperty(this,"createReportingJob",function(){var _ref=reporting_api_client_asyncToGenerator(regeneratorRuntime.mark((function _callee(exportType,jobParams){var jobParamsRison,resp;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:jobParamsRison=rison_default.a.encode(jobParams);_context.next=3;return _this.http.post("".concat(API_BASE_GENERATE,"/").concat(exportType),{method:"POST",body:JSON.stringify({jobParams:jobParamsRison})});case 3:resp=_context.sent;add(resp.job.id);return _context.abrupt("return",resp);case 6:case"end":return _context.stop()}}}),_callee)})));return function(_x,_x2){return _ref.apply(this,arguments)}}());reporting_api_client_defineProperty(this,"getManagementLink",(function(){return _this.http.basePath.prepend(REPORTING_MANAGEMENT_HOME)}));reporting_api_client_defineProperty(this,"getDownloadLink",(function(jobId){return _this.http.basePath.prepend("".concat(API_LIST_URL,"/download/").concat(jobId))}));reporting_api_client_defineProperty(this,"getServerBasePath",(function(){return _this.http.basePath.serverBasePath}));reporting_api_client_defineProperty(this,"verifyConfig",(function(){return _this.http.post("".concat(API_BASE_URL,"/diagnose/config"),{asSystemRequest:true})}));reporting_api_client_defineProperty(this,"verifyBrowser",(function(){return _this.http.post("".concat(API_BASE_URL,"/diagnose/browser"),{asSystemRequest:true})}));reporting_api_client_defineProperty(this,"verifyScreenCapture",(function(){return _this.http.post("".concat(API_BASE_URL,"/diagnose/screenshot"),{asSystemRequest:true})}));this.http=http}reporting_api_client_createClass(ReportingAPIClient,[{key:"getReportURL",value:function getReportURL(jobId){var apiBaseUrl=this.http.basePath.prepend(API_LIST_URL);var downloadLink="".concat(apiBaseUrl,"/download/").concat(jobId);return downloadLink}},{key:"downloadReport",value:function downloadReport(jobId){var location=this.getReportURL(jobId);window.open(location)}},{key:"deleteReport",value:function(){var _deleteReport=reporting_api_client_asyncToGenerator(regeneratorRuntime.mark((function _callee2(jobId){return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.http.delete("".concat(API_LIST_URL,"/delete/").concat(jobId),{asSystemRequest:true});case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop()}}}),_callee2,this)})));function deleteReport(_x3){return _deleteReport.apply(this,arguments)}return deleteReport}()},{key:"total",value:function total(){return this.http.get("".concat(API_LIST_URL,"/count"),{asSystemRequest:true})}},{key:"getContent",value:function getContent(jobId){return this.http.get("".concat(API_LIST_URL,"/output/").concat(jobId),{asSystemRequest:true})}},{key:"getInfo",value:function getInfo(jobId){return this.http.get("".concat(API_LIST_URL,"/info/").concat(jobId),{asSystemRequest:true})}}]);return ReportingAPIClient}();function stream_handler_createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=stream_handler_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it.return!=null)it.return()}finally{if(didErr)throw err}}}}function stream_handler_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return stream_handler_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return stream_handler_arrayLikeToArray(o,minLen)}function stream_handler_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function stream_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function stream_handler_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){stream_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){stream_handler_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function stream_handler_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function stream_handler_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function stream_handler_createClass(Constructor,protoProps,staticProps){if(protoProps)stream_handler_defineProperties(Constructor.prototype,protoProps);if(staticProps)stream_handler_defineProperties(Constructor,staticProps);return Constructor}function updateStored(jobIds){sessionStorage.setItem(JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY,JSON.stringify(jobIds))}function getReportStatus(src){var _src$_source$output,_src$_source$output2;return{id:src._id,status:src._source.status,title:src._source.payload.title,jobtype:src._source.jobtype,maxSizeReached:(_src$_source$output=src._source.output)===null||_src$_source$output===void 0?void 0:_src$_source$output.max_size_reached,csvContainsFormulas:(_src$_source$output2=src._source.output)===null||_src$_source$output2===void 0?void 0:_src$_source$output2.csv_contains_formulas}}var stream_handler_ReportingNotifierStreamHandler=function(){function ReportingNotifierStreamHandler(notifications,apiClient){stream_handler_classCallCheck(this,ReportingNotifierStreamHandler);this.notifications=notifications;this.apiClient=apiClient}stream_handler_createClass(ReportingNotifierStreamHandler,[{key:"showNotifications",value:function showNotifications(_ref){var _this=this;var completedJobs=_ref.completed,failedJobs=_ref.failed;var showNotificationsAsync=function(){var _ref2=stream_handler_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var _iterator,_step,job,_iterator2,_step2,_job,_yield$_this$apiClien,content;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_iterator=stream_handler_createForOfIteratorHelper(completedJobs);try{for(_iterator.s();!(_step=_iterator.n()).done;){job=_step.value;if(job.csvContainsFormulas){_this.notifications.toasts.addWarning(job_warning_formulas_getWarningFormulasToast(job,_this.apiClient.getManagementLink,_this.apiClient.getDownloadLink))}else if(job.maxSizeReached){_this.notifications.toasts.addWarning(job_warning_max_size_getWarningMaxSizeToast(job,_this.apiClient.getManagementLink,_this.apiClient.getDownloadLink))}else{_this.notifications.toasts.addSuccess(job_success_getSuccessToast(job,_this.apiClient.getManagementLink,_this.apiClient.getDownloadLink))}}}catch(err){_iterator.e(err)}finally{_iterator.f()}_iterator2=stream_handler_createForOfIteratorHelper(failedJobs);_context.prev=3;_iterator2.s();case 5:if((_step2=_iterator2.n()).done){_context.next=14;break}_job=_step2.value;_context.next=9;return _this.apiClient.getContent(_job.id);case 9:_yield$_this$apiClien=_context.sent;content=_yield$_this$apiClien.content;_this.notifications.toasts.addDanger(job_failure_getFailureToast(content,_job,_this.apiClient.getManagementLink));case 12:_context.next=5;break;case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context["catch"](3);_iterator2.e(_context.t0);case 19:_context.prev=19;_iterator2.f();return _context.finish(19);case 22:return _context.abrupt("return",{completed:completedJobs,failed:failedJobs});case 23:case"end":return _context.stop()}}}),_callee,null,[[3,16,19,22]])})));return function showNotificationsAsync(){return _ref2.apply(this,arguments)}}();return external_kbnSharedDeps_Rxjs_["from"](showNotificationsAsync())}},{key:"findChangedStatusJobs",value:function findChangedStatusJobs(storedJobs){var _this2=this;return external_kbnSharedDeps_Rxjs_["from"](this.apiClient.findForJobIds(storedJobs)).pipe(Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(jobs){var completedJobs=[];var failedJobs=[];var pending=[];var _iterator3=stream_handler_createForOfIteratorHelper(jobs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var job=_step3.value;var jobId=job._id,jobStatus=job._source.status;if(storedJobs.includes(jobId)){if(jobStatus===JOB_STATUS_COMPLETED||jobStatus===JOB_STATUS_WARNINGS){completedJobs.push(getReportStatus(job))}else if(jobStatus===JOB_STATUS_FAILED){failedJobs.push(getReportStatus(job))}else{pending.push(jobId)}}}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}updateStored(pending);return{completed:completedJobs,failed:failedJobs}})),Object(external_kbnSharedDeps_RxjsOperators_["catchError"])((function(err){_this2.notifications.toasts.addDanger(general_error_getGeneralErrorToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.publicNotifier.httpErrorMessage",{defaultMessage:"Could not check Reporting job status!"}),err));window.console.error(err);return external_kbnSharedDeps_Rxjs_["of"]({completed:[],failed:[]})})))}}]);return ReportingNotifierStreamHandler}();var elastic_datemath=__webpack_require__(13);var elastic_datemath_default=__webpack_require__.n(elastic_datemath);var external_kbnSharedDeps_MomentTimezone_=__webpack_require__(8);var external_kbnSharedDeps_MomentTimezone_default=__webpack_require__.n(external_kbnSharedDeps_MomentTimezone_);var uiActions_public_=__webpack_require__(16);var discover_public_=__webpack_require__(17);function get_csv_panel_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function get_csv_panel_action_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){get_csv_panel_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){get_csv_panel_action_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function get_csv_panel_action_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function get_csv_panel_action_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function get_csv_panel_action_createClass(Constructor,protoProps,staticProps){if(protoProps)get_csv_panel_action_defineProperties(Constructor.prototype,protoProps);if(staticProps)get_csv_panel_action_defineProperties(Constructor,staticProps);return Constructor}function get_csv_panel_action_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function isSavedSearchEmbeddable(embeddable){return embeddable.type===discover_public_["SEARCH_EMBEDDABLE_TYPE"]}var get_csv_panel_action_GetCsvReportPanelAction=function(){function GetCsvReportPanelAction(core,license$){var _this=this;get_csv_panel_action_classCallCheck(this,GetCsvReportPanelAction);get_csv_panel_action_defineProperty(this,"isDownloading",void 0);get_csv_panel_action_defineProperty(this,"type","");get_csv_panel_action_defineProperty(this,"id",CSV_REPORTING_ACTION);get_csv_panel_action_defineProperty(this,"canDownloadCSV",false);get_csv_panel_action_defineProperty(this,"core",void 0);get_csv_panel_action_defineProperty(this,"isCompatible",function(){var _ref=get_csv_panel_action_asyncToGenerator(regeneratorRuntime.mark((function _callee(context){var embeddable;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(_this.canDownloadCSV){_context.next=2;break}return _context.abrupt("return",false);case 2:embeddable=context.embeddable;return _context.abrupt("return",embeddable.getInput().viewMode!==public_["ViewMode"].EDIT&&embeddable.type==="search");case 4:case"end":return _context.stop()}}}),_callee)})));return function(_x){return _ref.apply(this,arguments)}}());get_csv_panel_action_defineProperty(this,"execute",function(){var _ref2=get_csv_panel_action_asyncToGenerator(regeneratorRuntime.mark((function _callee2(context){var embeddable,_embeddable$getInput,_embeddable$getInput$,to,from,searchEmbeddable,searchRequestBody,state,kibanaTimezone,id,filename,timezone,fromTime,toTime,body;return regeneratorRuntime.wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:embeddable=context.embeddable;if(isSavedSearchEmbeddable(embeddable)){_context2.next=3;break}throw new uiActions_public_["IncompatibleActionError"];case 3:if(!_this.isDownloading){_context2.next=5;break}return _context2.abrupt("return");case 5:_embeddable$getInput=embeddable.getInput(),_embeddable$getInput$=_embeddable$getInput.timeRange,to=_embeddable$getInput$.to,from=_embeddable$getInput$.from;searchEmbeddable=embeddable;_context2.next=9;return _this.getSearchRequestBody({searchEmbeddable:searchEmbeddable});case 9:searchRequestBody=_context2.sent;state=external_kbnSharedDeps_Lodash_default.a.pick(searchRequestBody,["sort","docvalue_fields","query"]);kibanaTimezone=_this.core.uiSettings.get("dateFormat:tz");id="search:".concat(embeddable.getSavedSearch().id);filename=embeddable.getSavedSearch().title;timezone=kibanaTimezone==="Browser"?external_kbnSharedDeps_MomentTimezone_default.a.tz.guess():kibanaTimezone;fromTime=elastic_datemath_default.a.parse(from);toTime=elastic_datemath_default.a.parse(to,{roundUp:true});if(!(!fromTime||!toTime)){_context2.next=19;break}return _context2.abrupt("return",_this.onGenerationFail(new Error("Invalid time range: From: ".concat(fromTime,", To: ").concat(toTime))));case 19:body=JSON.stringify({timerange:{min:fromTime.format(),max:toTime.format(),timezone:timezone},state:state});_this.isDownloading=true;_this.core.notifications.toasts.addSuccess({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.dashboard.csvDownloadStartedTitle",{defaultMessage:"CSV Download Started"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.dashboard.csvDownloadStartedMessage",{defaultMessage:"Your CSV will download momentarily."}),"data-test-subj":"csvDownloadStarted"});_context2.next=24;return _this.core.http.post("".concat(API_GENERATE_IMMEDIATE,"/").concat(id),{body:body}).then((function(rawResponse){_this.isDownloading=false;var download="".concat(filename,".csv");var blob=new Blob([rawResponse],{type:"text/csv;charset=utf-8;"});if(window.navigator.msSaveOrOpenBlob){return window.navigator.msSaveOrOpenBlob(blob,download)}var a=window.document.createElement("a");var downloadObject=window.URL.createObjectURL(blob);a.href=downloadObject;a.download=download;document.body.appendChild(a);a.click();window.URL.revokeObjectURL(downloadObject);document.body.removeChild(a)})).catch(_this.onGenerationFail.bind(_this));case 24:case"end":return _context2.stop()}}}),_callee2)})));return function(_x2){return _ref2.apply(this,arguments)}}());this.isDownloading=false;this.core=core;license$.subscribe((function(license){var results=license.check("reporting","basic");var _checkLicense=checkLicense(results),showLinks=_checkLicense.showLinks;_this.canDownloadCSV=showLinks}))}get_csv_panel_action_createClass(GetCsvReportPanelAction,[{key:"getIconType",value:function getIconType(){return"document"}},{key:"getDisplayName",value:function getDisplayName(){return external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.dashboard.downloadCsvPanelTitle",{defaultMessage:"Download CSV"})}},{key:"getSearchRequestBody",value:function getSearchRequestBody(_ref3){var searchEmbeddable=_ref3.searchEmbeddable;var adapters=searchEmbeddable.getInspectorAdapters();if(!adapters){return{}}if(adapters.requests.requests.length===0){return{}}return searchEmbeddable.getSavedSearch().searchSource.getSearchRequestBody()}},{key:"onGenerationFail",value:function onGenerationFail(error){this.isDownloading=false;this.core.notifications.toasts.addDanger({title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.dashboard.failedCsvDownloadTitle",{defaultMessage:"CSV download failed"}),text:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.dashboard.failedCsvDownloadMessage",{defaultMessage:"We couldn't generate your CSV at this time."}),"data-test-subj":"downloadCsvFail"})}}]);return GetCsvReportPanelAction}();var url=__webpack_require__(18);var url_default=__webpack_require__.n(url);function reporting_panel_content_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function reporting_panel_content_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){reporting_panel_content_ownKeys(Object(source),true).forEach((function(key){reporting_panel_content_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{reporting_panel_content_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function reporting_panel_content_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function reporting_panel_content_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function reporting_panel_content_createClass(Constructor,protoProps,staticProps){if(protoProps)reporting_panel_content_defineProperties(Constructor.prototype,protoProps);if(staticProps)reporting_panel_content_defineProperties(Constructor,staticProps);return Constructor}function reporting_panel_content_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)reporting_panel_content_setPrototypeOf(subClass,superClass)}function reporting_panel_content_setPrototypeOf(o,p){reporting_panel_content_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return reporting_panel_content_setPrototypeOf(o,p)}function reporting_panel_content_createSuper(Derived){var hasNativeReflectConstruct=reporting_panel_content_isNativeReflectConstruct();return function _createSuperInternal(){var Super=reporting_panel_content_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=reporting_panel_content_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return reporting_panel_content_possibleConstructorReturn(this,result)}}function reporting_panel_content_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return reporting_panel_content_assertThisInitialized(self)}function reporting_panel_content_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function reporting_panel_content_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function reporting_panel_content_getPrototypeOf(o){reporting_panel_content_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return reporting_panel_content_getPrototypeOf(o)}function reporting_panel_content_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var reporting_panel_content_ReportingPanelContentUi=function(_Component){reporting_panel_content_inherits(ReportingPanelContentUi,_Component);var _super=reporting_panel_content_createSuper(ReportingPanelContentUi);function ReportingPanelContentUi(_props){var _this;reporting_panel_content_classCallCheck(this,ReportingPanelContentUi);_this=_super.call(this,_props);reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"mounted",void 0);reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"getAbsoluteReportGenerationUrl",(function(props){var relativePath=_this.props.apiClient.getReportingJobPath(props.reportType,props.getJobParams());return url_default.a.resolve(window.location.href,relativePath)}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"renderGenerateReportButton",(function(isDisabled){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{disabled:isDisabled,fullWidth:true,fill:true,onClick:_this.createReportingJob,"data-test-subj":"generateReportButton",size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.generateButtonLabel",defaultMessage:"Generate {reportingType}",values:{reportingType:_this.prettyPrintReportingType()}}))}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"prettyPrintReportingType",(function(){switch(_this.props.reportType){case"printablePdf":return"PDF";case"csv":return"CSV";case"png":return"PNG";default:return _this.props.reportType}}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"markAsStale",(function(){if(!_this.mounted){return}_this.setState({isStale:true})}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"isNotSaved",(function(){return _this.props.objectId===undefined||_this.props.objectId===""}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"setAbsoluteReportGenerationUrl",(function(){if(!_this.mounted){return}var absoluteUrl=_this.getAbsoluteReportGenerationUrl(_this.props);_this.setState({absoluteUrl:absoluteUrl})}));reporting_panel_content_defineProperty(reporting_panel_content_assertThisInitialized(_this),"createReportingJob",(function(){var intl=_this.props.intl;return _this.props.apiClient.createReportingJob(_this.props.reportType,_this.props.getJobParams()).then((function(){_this.props.toasts.addSuccess({title:intl.formatMessage({id:"xpack.reporting.panelContent.successfullyQueuedReportNotificationTitle",defaultMessage:"Queued report for {objectType}"},{objectType:_this.props.objectType}),text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.successfullyQueuedReportNotificationDescription",defaultMessage:"Track its progress in Management"})),"data-test-subj":"queueReportSuccess"});_this.props.onClose()})).catch((function(error){var _error$res;if(error.message==="not exportable"){return _this.props.toasts.addWarning({title:intl.formatMessage({id:"xpack.reporting.panelContent.whatCanBeExportedWarningTitle",defaultMessage:"Only saved {objectType} can be exported"},{objectType:_this.props.objectType}),text:Object(kibanaReact_public_["toMountPoint"])(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.whatCanBeExportedWarningDescription",defaultMessage:"Please save your work first"}))})}var defaultMessage=(error===null||error===void 0?void 0:(_error$res=error.res)===null||_error$res===void 0?void 0:_error$res.status)===403?external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.noPermissionToGenerateReportDescription",defaultMessage:"You don't have permission to generate this report."}):external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.notification.cantReachServerDescription",defaultMessage:"Can't reach the server. Please try again."});_this.props.toasts.addDanger({title:intl.formatMessage({id:"xpack.reporting.panelContent.notification.reportingErrorTitle",defaultMessage:"Reporting error"}),text:Object(kibanaReact_public_["toMountPoint"])(error.message||defaultMessage),"data-test-subj":"queueReportError"})}))}));_this.state={isStale:false,absoluteUrl:_this.getAbsoluteReportGenerationUrl(_props),layoutId:""};return _this}reporting_panel_content_createClass(ReportingPanelContentUi,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(this.props.layoutId&&this.props.layoutId!==prevState.layoutId){this.setState(reporting_panel_content_objectSpread(reporting_panel_content_objectSpread({},prevState),{},{absoluteUrl:this.getAbsoluteReportGenerationUrl(this.props),layoutId:this.props.layoutId}))}}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("hashchange",this.markAsStale);window.removeEventListener("resize",this.setAbsoluteReportGenerationUrl);this.mounted=false}},{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;window.addEventListener("hashchange",this.markAsStale,false);window.addEventListener("resize",this.setAbsoluteReportGenerationUrl)}},{key:"render",value:function render(){if(this.isNotSaved()||this.props.isDirty||this.state.isStale){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareReportingForm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiFormRow"],{helpText:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.saveWorkDescription",defaultMessage:"Please save your work before generating a report."})},this.renderGenerateReportButton(true)))}var reportMsg=external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.generationTimeDescription",defaultMessage:"{reportingType}s can take a minute or two to generate based upon the size of your {objectType}.",description:"Here 'reportingType' can be 'PDF' or 'CSV'",values:{reportingType:this.prettyPrintReportingType(),objectType:this.props.objectType}});return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiForm"],{className:"kbnShareContextMenu__finalPanel","data-test-subj":"shareReportingForm"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,reportMsg)),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),this.props.options,this.renderGenerateReportButton(false),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_kbnSharedDeps_React_default.a.createElement("p",null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.howToCallGenerationDescription",defaultMessage:"Alternatively, copy this POST URL to call generation from outside Kibana or from Watcher."}))),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiCopy"],{textToCopy:this.state.absoluteUrl,anchorClassName:"eui-displayBlock"},(function(copy){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiButton"],{fullWidth:true,onClick:copy,size:"s"},external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.panelContent.copyUrlButtonLabel",defaultMessage:"Copy POST URL"}))})))}}]);return ReportingPanelContentUi}(external_kbnSharedDeps_React_["Component"]);var ReportingPanelContent=Object(external_kbnSharedDeps_KbnI18nReact_["injectI18n"])(reporting_panel_content_ReportingPanelContentUi);var register_csv_reporting_csvReportingProvider=function csvReportingProvider(_ref){var apiClient=_ref.apiClient,toasts=_ref.toasts,license$=_ref.license$,uiSettings=_ref.uiSettings;var toolTipContent="";var disabled=true;var hasCSVReporting=false;license$.subscribe((function(license){var _checkLicense=checkLicense(license.check("reporting","basic")),enableLinks=_checkLicense.enableLinks,showLinks=_checkLicense.showLinks,message=_checkLicense.message;toolTipContent=message;hasCSVReporting=showLinks;disabled=!enableLinks}));var browserTimezone=uiSettings.get("dateFormat:tz")==="Browser"?external_kbnSharedDeps_MomentTimezone_default.a.tz.guess():uiSettings.get("dateFormat:tz");var getShareMenuItems=function getShareMenuItems(_ref2){var objectType=_ref2.objectType,objectId=_ref2.objectId,sharingData=_ref2.sharingData,isDirty=_ref2.isDirty,onClose=_ref2.onClose;if("search"!==objectType){return[]}var jobParams={browserTimezone:browserTimezone,objectType:objectType,title:sharingData.title,indexPatternId:sharingData.indexPatternId,searchRequest:sharingData.searchRequest,fields:sharingData.fields,metaFields:sharingData.metaFields,conflictedTypesFields:sharingData.conflictedTypesFields};var getJobParams=function getJobParams(){return jobParams};var shareActions=[];if(hasCSVReporting){var panelTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.shareContextMenu.csvReportsButtonLabel",{defaultMessage:"CSV Reports"});shareActions.push({shareMenuItem:{name:panelTitle,icon:"document",toolTipContent:toolTipContent,disabled:disabled,["data-test-subj"]:"csvReportMenuItem",sortOrder:1},panel:{id:"csvReportingPanel",title:panelTitle,content:external_kbnSharedDeps_React_default.a.createElement(ReportingPanelContent,{apiClient:apiClient,toasts:toasts,reportType:"csv",layoutId:undefined,objectType:objectType,objectId:objectId,getJobParams:getJobParams,isDirty:isDirty,onClose:onClose})}})}return shareActions};return{id:"csvReports",getShareMenuItems:getShareMenuItems}};function screen_capture_panel_content_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function screen_capture_panel_content_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){screen_capture_panel_content_ownKeys(Object(source),true).forEach((function(key){screen_capture_panel_content_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{screen_capture_panel_content_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function screen_capture_panel_content_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function screen_capture_panel_content_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function screen_capture_panel_content_createClass(Constructor,protoProps,staticProps){if(protoProps)screen_capture_panel_content_defineProperties(Constructor.prototype,protoProps);if(staticProps)screen_capture_panel_content_defineProperties(Constructor,staticProps);return Constructor}function screen_capture_panel_content_inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)screen_capture_panel_content_setPrototypeOf(subClass,superClass)}function screen_capture_panel_content_setPrototypeOf(o,p){screen_capture_panel_content_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return screen_capture_panel_content_setPrototypeOf(o,p)}function screen_capture_panel_content_createSuper(Derived){var hasNativeReflectConstruct=screen_capture_panel_content_isNativeReflectConstruct();return function _createSuperInternal(){var Super=screen_capture_panel_content_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=screen_capture_panel_content_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return screen_capture_panel_content_possibleConstructorReturn(this,result)}}function screen_capture_panel_content_possibleConstructorReturn(self,call){if(call&&(typeof call==="object"||typeof call==="function")){return call}return screen_capture_panel_content_assertThisInitialized(self)}function screen_capture_panel_content_assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function screen_capture_panel_content_isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(e){return false}}function screen_capture_panel_content_getPrototypeOf(o){screen_capture_panel_content_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return screen_capture_panel_content_getPrototypeOf(o)}function screen_capture_panel_content_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var screen_capture_panel_content_ScreenCapturePanelContent=function(_Component){screen_capture_panel_content_inherits(ScreenCapturePanelContent,_Component);var _super=screen_capture_panel_content_createSuper(ScreenCapturePanelContent);function ScreenCapturePanelContent(props){var _this;screen_capture_panel_content_classCallCheck(this,ScreenCapturePanelContent);_this=_super.call(this,props);screen_capture_panel_content_defineProperty(screen_capture_panel_content_assertThisInitialized(_this),"renderOptions",(function(){if(_this.state.isPreserveLayoutSupported){return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSwitch"],{label:external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["FormattedMessage"],{id:"xpack.reporting.screenCapturePanelContent.optimizeForPrintingLabel",defaultMessage:"Optimize for printing"}),checked:_this.state.usePrintLayout,onChange:_this.handlePrintLayoutChange,"data-test-subj":"usePrintLayout"}),external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}return external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_React_["Fragment"],null,external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}));screen_capture_panel_content_defineProperty(screen_capture_panel_content_assertThisInitialized(_this),"handlePrintLayoutChange",(function(evt){_this.setState({usePrintLayout:evt.target.checked})}));screen_capture_panel_content_defineProperty(screen_capture_panel_content_assertThisInitialized(_this),"getLayout",(function(){if(_this.state.usePrintLayout){return{id:"print"}}var el=document.querySelector("[data-shared-items-container]");var bounds=el?el.getBoundingClientRect():{height:768,width:1024};return{id:_this.props.reportType==="png"?"png":"preserve_layout",dimensions:{height:bounds.height,width:bounds.width}}}));screen_capture_panel_content_defineProperty(screen_capture_panel_content_assertThisInitialized(_this),"getJobParams",(function(){return screen_capture_panel_content_objectSpread(screen_capture_panel_content_objectSpread({},_this.props.getJobParams()),{},{layout:_this.getLayout()})}));var isPreserveLayoutSupported=props.reportType!=="png"&&props.objectType!=="visualization";_this.state={isPreserveLayoutSupported:isPreserveLayoutSupported,usePrintLayout:false};return _this}screen_capture_panel_content_createClass(ScreenCapturePanelContent,[{key:"render",value:function render(){return external_kbnSharedDeps_React_default.a.createElement(ReportingPanelContent,{apiClient:this.props.apiClient,toasts:this.props.toasts,reportType:this.props.reportType,layoutId:this.getLayout().id,objectType:this.props.objectType,objectId:this.props.objectId,getJobParams:this.getJobParams,options:this.renderOptions(),isDirty:this.props.isDirty,onClose:this.props.onClose})}}]);return ScreenCapturePanelContent}(external_kbnSharedDeps_React_["Component"]);var register_pdf_png_reporting_reportingPDFPNGProvider=function reportingPDFPNGProvider(_ref){var apiClient=_ref.apiClient,toasts=_ref.toasts,license$=_ref.license$,uiSettings=_ref.uiSettings;var toolTipContent="";var disabled=true;var hasPDFPNGReporting=false;license$.subscribe((function(license){var _checkLicense=checkLicense(license.check("reporting","gold")),enableLinks=_checkLicense.enableLinks,showLinks=_checkLicense.showLinks,message=_checkLicense.message;toolTipContent=message;hasPDFPNGReporting=showLinks;disabled=!enableLinks}));var browserTimezone=uiSettings.get("dateFormat:tz")==="Browser"?external_kbnSharedDeps_MomentTimezone_default.a.tz.guess():uiSettings.get("dateFormat:tz");var getShareMenuItems=function getShareMenuItems(_ref2){var objectType=_ref2.objectType,objectId=_ref2.objectId,sharingData=_ref2.sharingData,isDirty=_ref2.isDirty,onClose=_ref2.onClose,shareableUrl=_ref2.shareableUrl;if(!["dashboard","visualization"].includes(objectType)){return[]}if(objectType==="dashboard"&&false){return[]}var getPdfJobParams=function getPdfJobParams(){var relativeUrl=shareableUrl.replace(window.location.origin+apiClient.getServerBasePath(),"");return{objectType:objectType,browserTimezone:browserTimezone,relativeUrls:[relativeUrl],layout:sharingData.layout,title:sharingData.title}};var getPngJobParams=function getPngJobParams(){var relativeUrl=shareableUrl.replace(window.location.origin+apiClient.getServerBasePath(),"");return{objectType:objectType,browserTimezone:browserTimezone,relativeUrl:relativeUrl,layout:sharingData.layout,title:sharingData.title}};var shareActions=[];if(hasPDFPNGReporting){var pngPanelTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.shareContextMenu.pngReportsButtonLabel",{defaultMessage:"PNG Reports"});var pdfPanelTitle=external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.shareContextMenu.pdfReportsButtonLabel",{defaultMessage:"PDF Reports"});shareActions.push({shareMenuItem:{name:pngPanelTitle,icon:"document",toolTipContent:toolTipContent,disabled:disabled,["data-test-subj"]:"pngReportMenuItem",sortOrder:10},panel:{id:"reportingPngPanel",title:pngPanelTitle,content:external_kbnSharedDeps_React_default.a.createElement(screen_capture_panel_content_ScreenCapturePanelContent,{apiClient:apiClient,toasts:toasts,reportType:"png",objectType:objectType,objectId:objectId,getJobParams:getPngJobParams,isDirty:isDirty,onClose:onClose})}});shareActions.push({shareMenuItem:{name:pdfPanelTitle,icon:"document",toolTipContent:toolTipContent,disabled:disabled,["data-test-subj"]:"pdfReportMenuItem",sortOrder:10},panel:{id:"reportingPdfPanel",title:pdfPanelTitle,content:external_kbnSharedDeps_React_default.a.createElement(screen_capture_panel_content_ScreenCapturePanelContent,{apiClient:apiClient,toasts:toasts,reportType:"printablePdf",objectType:objectType,objectId:objectId,getJobParams:getPdfJobParams,isDirty:isDirty,onClose:onClose})}})}return shareActions};return{id:"screenCaptureReports",getShareMenuItems:getShareMenuItems}};function plugin_slicedToArray(arr,i){return plugin_arrayWithHoles(arr)||plugin_iterableToArrayLimit(arr,i)||plugin_unsupportedIterableToArray(arr,i)||plugin_nonIterableRest()}function plugin_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function plugin_unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return plugin_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return plugin_arrayLikeToArray(o,minLen)}function plugin_arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function plugin_iterableToArrayLimit(arr,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(arr)))return;var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function plugin_arrayWithHoles(arr){if(Array.isArray(arr))return arr}function plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function plugin_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){plugin_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)}))}}function plugin_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function plugin_defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function plugin_createClass(Constructor,protoProps,staticProps){if(protoProps)plugin_defineProperties(Constructor.prototype,protoProps);if(staticProps)plugin_defineProperties(Constructor,staticProps);return Constructor}function plugin_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getStored(){var sessionValue=sessionStorage.getItem(JOB_COMPLETION_NOTIFICATIONS_SESSION_KEY);return sessionValue?JSON.parse(sessionValue):[]}function handleError(notifications,err){notifications.toasts.addDanger(general_error_getGeneralErrorToast(external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.publicNotifier.pollingErrorMessage",{defaultMessage:"Reporting notifier error!"}),err));window.console.error(err);return external_kbnSharedDeps_Rxjs_["of"]({completed:[],failed:[]})}var plugin_ReportingPublicPlugin=function(){function ReportingPublicPlugin(initializerContext){plugin_classCallCheck(this,ReportingPublicPlugin);plugin_defineProperty(this,"config",void 0);plugin_defineProperty(this,"stop$",new external_kbnSharedDeps_Rxjs_["ReplaySubject"](1));plugin_defineProperty(this,"title",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.management.reportingTitle",{defaultMessage:"Reporting"}));plugin_defineProperty(this,"breadcrumbText",external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.breadcrumb",{defaultMessage:"Reporting"}));this.config=initializerContext.config.get()}plugin_createClass(ReportingPublicPlugin,[{key:"setup",value:function setup(core,_ref){var _this=this;var home=_ref.home,management=_ref.management,licensing=_ref.licensing,uiActions=_ref.uiActions,share=_ref.share;var http=core.http,toasts=core.notifications.toasts,getStartServices=core.getStartServices,uiSettings=core.uiSettings;var license$=licensing.license$;var apiClient=new reporting_api_client_ReportingAPIClient(http);var action=new get_csv_panel_action_GetCsvReportPanelAction(core,license$);home.featureCatalogue.register({id:"reporting",title:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.registerFeature.reportingTitle",{defaultMessage:"Reporting"}),description:external_kbnSharedDeps_KbnI18n_["i18n"].translate("xpack.reporting.registerFeature.reportingDescription",{defaultMessage:"Manage your reports generated from Discover, Visualize, and Dashboard."}),icon:"reportingApp",path:"/app/management/insightsAndAlerting/reporting",showOnHomePage:false,category:home_public_["FeatureCatalogueCategory"].ADMIN});management.sections.section.insightsAndAlerting.registerApp({id:"reporting",title:this.title,order:1,mount:function(){var _mount=plugin_asyncToGenerator(regeneratorRuntime.mark((function _callee(params){var _yield$getStartServic,_yield$getStartServic2,start;return regeneratorRuntime.wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getStartServices();case 2:_yield$getStartServic=_context.sent;_yield$getStartServic2=plugin_slicedToArray(_yield$getStartServic,1);start=_yield$getStartServic2[0];params.setBreadcrumbs([{text:_this.breadcrumbText}]);external_kbnSharedDeps_ReactDom_default.a.render(external_kbnSharedDeps_React_default.a.createElement(external_kbnSharedDeps_KbnI18nReact_["I18nProvider"],null,external_kbnSharedDeps_React_default.a.createElement(ReportListing,{toasts:toasts,license$:license$,pollConfig:_this.config.poll,redirect:start.application.navigateToApp,apiClient:apiClient})),params.element);return _context.abrupt("return",(function(){external_kbnSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}));case 8:case"end":return _context.stop()}}}),_callee)})));function mount(_x){return _mount.apply(this,arguments)}return mount}()});uiActions.addTriggerAction(public_["CONTEXT_MENU_TRIGGER"],action);share.register(register_csv_reporting_csvReportingProvider({apiClient:apiClient,toasts:toasts,license$:license$,uiSettings:uiSettings}));share.register(register_pdf_png_reporting_reportingPDFPNGProvider({apiClient:apiClient,toasts:toasts,license$:license$,uiSettings:uiSettings}))}},{key:"start",value:function start(core){var http=core.http,notifications=core.notifications;var apiClient=new reporting_api_client_ReportingAPIClient(http);var streamHandler=new stream_handler_ReportingNotifierStreamHandler(notifications,apiClient);var interval=durationToNumber(this.config.poll.jobsRefresh.interval);external_kbnSharedDeps_Rxjs_["timer"](0,interval).pipe(Object(external_kbnSharedDeps_RxjsOperators_["takeUntil"])(this.stop$),Object(external_kbnSharedDeps_RxjsOperators_["map"])((function(){return getStored()})),Object(external_kbnSharedDeps_RxjsOperators_["filter"])((function(storedJobs){return storedJobs.length>0})),Object(external_kbnSharedDeps_RxjsOperators_["mergeMap"])((function(storedJobs){return streamHandler.findChangedStatusJobs(storedJobs)})),Object(external_kbnSharedDeps_RxjsOperators_["mergeMap"])((function(_ref2){var completed=_ref2.completed,failed=_ref2.failed;return streamHandler.showNotifications({completed:completed,failed:failed})})),Object(external_kbnSharedDeps_RxjsOperators_["catchError"])((function(err){return handleError(notifications,err)}))).subscribe()}},{key:"stop",value:function stop(){this.stop$.next()}}]);return ReportingPublicPlugin}();function public_plugin(initializerContext){return new plugin_ReportingPublicPlugin(initializerContext)}}]);